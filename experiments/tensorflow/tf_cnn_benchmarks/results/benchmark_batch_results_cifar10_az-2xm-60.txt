++ TF_BENCHMARKS_PATH=tensorflow-benchmarks/scripts/tf_cnn_benchmarks
++ for MODEL in alexnet resnet20 resnet32 resnet44 resnet56 resnet110 densenet40_k12 densenet100_k12
++ RUN='python tensorflow-benchmarks/scripts/tf_cnn_benchmarks/tf_cnn_benchmarks.py --model alexnet --data_name cifar10 --data_dir /home/morgan/.keras/datasets/cifar-10-batches-py'
++ CUDA_VISIBLE_DEVICES=0
++ python tensorflow-benchmarks/scripts/tf_cnn_benchmarks/tf_cnn_benchmarks.py --model alexnet --data_name cifar10 --data_dir /home/morgan/.keras/datasets/cifar-10-batches-py --num_gpus 1
2017-10-02 16:50:17.860786: W tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use SSE4.1 instructions, but these are available on your machine and could speed up CPU computations.
2017-10-02 16:50:17.860842: W tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use SSE4.2 instructions, but these are available on your machine and could speed up CPU computations.
2017-10-02 16:50:17.860848: W tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use AVX instructions, but these are available on your machine and could speed up CPU computations.
2017-10-02 16:50:17.860852: W tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use AVX2 instructions, but these are available on your machine and could speed up CPU computations.
2017-10-02 16:50:17.860856: W tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use FMA instructions, but these are available on your machine and could speed up CPU computations.
2017-10-02 16:50:24.658221: I tensorflow/core/common_runtime/gpu/gpu_device.cc:955] Found device 0 with properties: 
name: Tesla M60
major: 5 minor: 2 memoryClockRate (GHz) 1.1775
pciBusID 9fa3:00:00.0
Total memory: 7.93GiB
Free memory: 7.86GiB
2017-10-02 16:50:24.658301: I tensorflow/core/common_runtime/gpu/gpu_device.cc:976] DMA: 0 
2017-10-02 16:50:24.658328: I tensorflow/core/common_runtime/gpu/gpu_device.cc:986] 0:   Y 
2017-10-02 16:50:24.658355: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1045] Creating TensorFlow device (/gpu:0) -> (device: 0, name: Tesla M60, pci bus id: 9fa3:00:00.0)
WARNING:tensorflow:Standard services need a 'logdir' passed to the SessionManager
TensorFlow:  1.3
Model:       alexnet
Mode:        training
Batch size:  128 global
             128 per device
Devices:     ['/gpu:0']
Data format: NCHW
Optimizer:   sgd
Variables:   parameter_server
==========
Generating model
number of parameters: 1756620.0
Running warm up
Done warm up
Step	Img/sec	loss
1	images/sec: 4808.2 +/- 0.0 (jitter = 0.0)	2.188
10	images/sec: 4862.5 +/- 61.0 (jitter = 259.8)	2.262
20	images/sec: 4852.5 +/- 87.4 (jitter = 258.1)	2.140
30	images/sec: 4900.8 +/- 85.2 (jitter = 322.1)	2.125
40	images/sec: 4546.1 +/- 135.0 (jitter = 563.2)	2.027
50	images/sec: 4709.9 +/- 113.5 (jitter = 528.9)	1.957
60	images/sec: 4833.2 +/- 99.0 (jitter = 511.4)	2.001
70	images/sec: 4935.2 +/- 88.4 (jitter = 423.9)	1.911
80	images/sec: 5024.9 +/- 79.9 (jitter = 375.6)	2.023
90	images/sec: 5096.1 +/- 72.7 (jitter = 297.9)	2.174
100	images/sec: 5153.4 +/- 66.6 (jitter = 257.8)	1.847
----------------------------------------------------------------
total images/sec: 5165.54
----------------------------------------------------------------
++ CUDA_VISIBLE_DEVICES=0
++ python tensorflow-benchmarks/scripts/tf_cnn_benchmarks/tf_cnn_benchmarks.py --model alexnet --data_name cifar10 --data_dir /home/morgan/.keras/datasets/cifar-10-batches-py --num_gpus 1 --data_format NHWC
2017-10-02 16:50:42.197558: W tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use SSE4.1 instructions, but these are available on your machine and could speed up CPU computations.
2017-10-02 16:50:42.197655: W tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use SSE4.2 instructions, but these are available on your machine and could speed up CPU computations.
2017-10-02 16:50:42.197691: W tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use AVX instructions, but these are available on your machine and could speed up CPU computations.
2017-10-02 16:50:42.197713: W tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use AVX2 instructions, but these are available on your machine and could speed up CPU computations.
2017-10-02 16:50:42.197733: W tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use FMA instructions, but these are available on your machine and could speed up CPU computations.
2017-10-02 16:50:49.188799: I tensorflow/core/common_runtime/gpu/gpu_device.cc:955] Found device 0 with properties: 
name: Tesla M60
major: 5 minor: 2 memoryClockRate (GHz) 1.1775
pciBusID 9fa3:00:00.0
Total memory: 7.93GiB
Free memory: 7.86GiB
2017-10-02 16:50:49.188837: I tensorflow/core/common_runtime/gpu/gpu_device.cc:976] DMA: 0 
2017-10-02 16:50:49.188844: I tensorflow/core/common_runtime/gpu/gpu_device.cc:986] 0:   Y 
2017-10-02 16:50:49.188852: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1045] Creating TensorFlow device (/gpu:0) -> (device: 0, name: Tesla M60, pci bus id: 9fa3:00:00.0)
WARNING:tensorflow:Standard services need a 'logdir' passed to the SessionManager
TensorFlow:  1.3
Model:       alexnet
Mode:        training
Batch size:  128 global
             128 per device
Devices:     ['/gpu:0']
Data format: NHWC
Optimizer:   sgd
Variables:   parameter_server
==========
Generating model
number of parameters: 1756620.0
Running warm up
Done warm up
Step	Img/sec	loss
1	images/sec: 2757.8 +/- 0.0 (jitter = 0.0)	2.280
10	images/sec: 2809.2 +/- 46.6 (jitter = 163.8)	2.220
20	images/sec: 2915.1 +/- 41.9 (jitter = 259.3)	2.293
30	images/sec: 2740.3 +/- 73.8 (jitter = 132.0)	2.148
40	images/sec: 2821.0 +/- 57.2 (jitter = 109.2)	2.068
50	images/sec: 2878.4 +/- 47.1 (jitter = 101.5)	2.075
60	images/sec: 2915.1 +/- 39.8 (jitter = 60.7)	1.877
70	images/sec: 2938.3 +/- 34.3 (jitter = 57.4)	1.961
80	images/sec: 2962.5 +/- 30.5 (jitter = 58.8)	1.908
90	images/sec: 2977.6 +/- 27.3 (jitter = 57.8)	1.819
100	images/sec: 2987.9 +/- 24.7 (jitter = 57.6)	1.685
----------------------------------------------------------------
total images/sec: 2993.15
----------------------------------------------------------------
++ CUDA_VISIBLE_DEVICES=0,1
++ python tensorflow-benchmarks/scripts/tf_cnn_benchmarks/tf_cnn_benchmarks.py --model alexnet --data_name cifar10 --data_dir /home/morgan/.keras/datasets/cifar-10-batches-py --num_gpus 2
2017-10-02 16:51:13.740063: W tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use SSE4.1 instructions, but these are available on your machine and could speed up CPU computations.
2017-10-02 16:51:13.740115: W tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use SSE4.2 instructions, but these are available on your machine and could speed up CPU computations.
2017-10-02 16:51:13.740121: W tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use AVX instructions, but these are available on your machine and could speed up CPU computations.
2017-10-02 16:51:13.740125: W tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use AVX2 instructions, but these are available on your machine and could speed up CPU computations.
2017-10-02 16:51:13.740129: W tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use FMA instructions, but these are available on your machine and could speed up CPU computations.
2017-10-02 16:51:20.336911: I tensorflow/core/common_runtime/gpu/gpu_device.cc:955] Found device 0 with properties: 
name: Tesla M60
major: 5 minor: 2 memoryClockRate (GHz) 1.1775
pciBusID 9fa3:00:00.0
Total memory: 7.93GiB
Free memory: 7.86GiB
2017-10-02 16:51:20.486303: W tensorflow/stream_executor/cuda/cuda_driver.cc:523] A non-primary context 0x83de8d0 exists before initializing the StreamExecutor. We haven't verified StreamExecutor works with that.
2017-10-02 16:51:20.486956: I tensorflow/core/common_runtime/gpu/gpu_device.cc:955] Found device 1 with properties: 
name: Tesla M60
major: 5 minor: 2 memoryClockRate (GHz) 1.1775
pciBusID c533:00:00.0
Total memory: 7.93GiB
Free memory: 7.86GiB
2017-10-02 16:51:20.487040: I tensorflow/core/common_runtime/gpu/gpu_device.cc:847] Peer access not supported between device ordinals 0 and 1
2017-10-02 16:51:20.487082: I tensorflow/core/common_runtime/gpu/gpu_device.cc:847] Peer access not supported between device ordinals 1 and 0
2017-10-02 16:51:20.487125: I tensorflow/core/common_runtime/gpu/gpu_device.cc:976] DMA: 0 1 
2017-10-02 16:51:20.487152: I tensorflow/core/common_runtime/gpu/gpu_device.cc:986] 0:   Y N 
2017-10-02 16:51:20.487173: I tensorflow/core/common_runtime/gpu/gpu_device.cc:986] 1:   N Y 
2017-10-02 16:51:20.487199: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1045] Creating TensorFlow device (/gpu:0) -> (device: 0, name: Tesla M60, pci bus id: 9fa3:00:00.0)
2017-10-02 16:51:20.487223: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1045] Creating TensorFlow device (/gpu:1) -> (device: 1, name: Tesla M60, pci bus id: c533:00:00.0)
WARNING:tensorflow:Standard services need a 'logdir' passed to the SessionManager
TensorFlow:  1.3
Model:       alexnet
Mode:        training
Batch size:  256 global
             128 per device
Devices:     ['/gpu:0', '/gpu:1']
Data format: NCHW
Optimizer:   sgd
Variables:   parameter_server
==========
Generating model
number of parameters: 1756620.0
number of parameters: 1756620.0
Running warm up
Done warm up
Step	Img/sec	loss
1	images/sec: 6618.4 +/- 0.0 (jitter = 0.0)	2.352
10	images/sec: 4343.8 +/- 389.0 (jitter = 1646.2)	2.216
20	images/sec: 4766.6 +/- 299.0 (jitter = 1707.0)	2.336
30	images/sec: 5286.8 +/- 246.2 (jitter = 899.2)	2.006
40	images/sec: 5540.9 +/- 195.4 (jitter = 717.7)	1.930
50	images/sec: 5529.5 +/- 179.2 (jitter = 717.7)	1.910
60	images/sec: 5585.1 +/- 160.6 (jitter = 684.6)	1.959
70	images/sec: 5517.8 +/- 151.8 (jitter = 554.0)	1.854
80	images/sec: 5648.8 +/- 136.5 (jitter = 433.3)	1.838
90	images/sec: 5759.8 +/- 124.2 (jitter = 383.5)	2.000
100	images/sec: 5845.2 +/- 114.5 (jitter = 418.9)	1.886
----------------------------------------------------------------
total images/sec: 5811.44
----------------------------------------------------------------
++ CUDA_VISIBLE_DEVICES=0,1
++ python tensorflow-benchmarks/scripts/tf_cnn_benchmarks/tf_cnn_benchmarks.py --model alexnet --data_name cifar10 --data_dir /home/morgan/.keras/datasets/cifar-10-batches-py --num_gpus 2 --local_parameter_device cpu
2017-10-02 16:51:47.928097: W tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use SSE4.1 instructions, but these are available on your machine and could speed up CPU computations.
2017-10-02 16:51:47.928191: W tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use SSE4.2 instructions, but these are available on your machine and could speed up CPU computations.
2017-10-02 16:51:47.928217: W tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use AVX instructions, but these are available on your machine and could speed up CPU computations.
2017-10-02 16:51:47.928237: W tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use AVX2 instructions, but these are available on your machine and could speed up CPU computations.
2017-10-02 16:51:47.928256: W tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use FMA instructions, but these are available on your machine and could speed up CPU computations.
2017-10-02 16:51:54.295706: I tensorflow/core/common_runtime/gpu/gpu_device.cc:955] Found device 0 with properties: 
name: Tesla M60
major: 5 minor: 2 memoryClockRate (GHz) 1.1775
pciBusID 9fa3:00:00.0
Total memory: 7.93GiB
Free memory: 7.86GiB
2017-10-02 16:51:54.446292: W tensorflow/stream_executor/cuda/cuda_driver.cc:523] A non-primary context 0xc0d1c40 exists before initializing the StreamExecutor. We haven't verified StreamExecutor works with that.
2017-10-02 16:51:54.446983: I tensorflow/core/common_runtime/gpu/gpu_device.cc:955] Found device 1 with properties: 
name: Tesla M60
major: 5 minor: 2 memoryClockRate (GHz) 1.1775
pciBusID c533:00:00.0
Total memory: 7.93GiB
Free memory: 7.86GiB
2017-10-02 16:51:54.447044: I tensorflow/core/common_runtime/gpu/gpu_device.cc:847] Peer access not supported between device ordinals 0 and 1
2017-10-02 16:51:54.447064: I tensorflow/core/common_runtime/gpu/gpu_device.cc:847] Peer access not supported between device ordinals 1 and 0
2017-10-02 16:51:54.447080: I tensorflow/core/common_runtime/gpu/gpu_device.cc:976] DMA: 0 1 
2017-10-02 16:51:54.447086: I tensorflow/core/common_runtime/gpu/gpu_device.cc:986] 0:   Y N 
2017-10-02 16:51:54.447090: I tensorflow/core/common_runtime/gpu/gpu_device.cc:986] 1:   N Y 
2017-10-02 16:51:54.447098: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1045] Creating TensorFlow device (/gpu:0) -> (device: 0, name: Tesla M60, pci bus id: 9fa3:00:00.0)
2017-10-02 16:51:54.447103: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1045] Creating TensorFlow device (/gpu:1) -> (device: 1, name: Tesla M60, pci bus id: c533:00:00.0)
WARNING:tensorflow:Standard services need a 'logdir' passed to the SessionManager
TensorFlow:  1.3
Model:       alexnet
Mode:        training
Batch size:  256 global
             128 per device
Devices:     ['/gpu:0', '/gpu:1']
Data format: NCHW
Optimizer:   sgd
Variables:   parameter_server
==========
Generating model
number of parameters: 1756620.0
number of parameters: 1756620.0
Running warm up
Done warm up
Step	Img/sec	loss
1	images/sec: 4600.5 +/- 0.0 (jitter = 0.0)	2.283
10	images/sec: 4532.4 +/- 465.0 (jitter = 1199.1)	2.206
20	images/sec: 4559.2 +/- 345.6 (jitter = 875.9)	2.158
30	images/sec: 4963.4 +/- 284.4 (jitter = 2304.7)	2.112
40	images/sec: 5307.3 +/- 246.5 (jitter = 1163.9)	2.023
50	images/sec: 5505.4 +/- 206.8 (jitter = 978.3)	1.853
60	images/sec: 5715.1 +/- 182.4 (jitter = 829.9)	1.931
70	images/sec: 5765.5 +/- 164.5 (jitter = 787.2)	1.888
80	images/sec: 5881.5 +/- 146.6 (jitter = 721.0)	1.917
90	images/sec: 5994.0 +/- 133.5 (jitter = 543.6)	1.928
100	images/sec: 5931.4 +/- 128.1 (jitter = 592.4)	1.829
----------------------------------------------------------------
total images/sec: 6063.88
----------------------------------------------------------------
++ for USE_NCCL in true false
++ CUDA_VISIBLE_DEVICES=0,1
++ python tensorflow-benchmarks/scripts/tf_cnn_benchmarks/tf_cnn_benchmarks.py --model alexnet --data_name cifar10 --data_dir /home/morgan/.keras/datasets/cifar-10-batches-py --num_gpus 2 --variable_update replicated --use_nccl true
2017-10-02 16:52:21.720842: W tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use SSE4.1 instructions, but these are available on your machine and could speed up CPU computations.
2017-10-02 16:52:21.720897: W tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use SSE4.2 instructions, but these are available on your machine and could speed up CPU computations.
2017-10-02 16:52:21.720903: W tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use AVX instructions, but these are available on your machine and could speed up CPU computations.
2017-10-02 16:52:21.720907: W tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use AVX2 instructions, but these are available on your machine and could speed up CPU computations.
2017-10-02 16:52:21.720911: W tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use FMA instructions, but these are available on your machine and could speed up CPU computations.
2017-10-02 16:52:28.592597: I tensorflow/core/common_runtime/gpu/gpu_device.cc:955] Found device 0 with properties: 
name: Tesla M60
major: 5 minor: 2 memoryClockRate (GHz) 1.1775
pciBusID 9fa3:00:00.0
Total memory: 7.93GiB
Free memory: 7.86GiB
2017-10-02 16:52:28.735369: W tensorflow/stream_executor/cuda/cuda_driver.cc:523] A non-primary context 0x95894f0 exists before initializing the StreamExecutor. We haven't verified StreamExecutor works with that.
2017-10-02 16:52:28.735992: I tensorflow/core/common_runtime/gpu/gpu_device.cc:955] Found device 1 with properties: 
name: Tesla M60
major: 5 minor: 2 memoryClockRate (GHz) 1.1775
pciBusID c533:00:00.0
Total memory: 7.93GiB
Free memory: 7.86GiB
2017-10-02 16:52:28.736050: I tensorflow/core/common_runtime/gpu/gpu_device.cc:847] Peer access not supported between device ordinals 0 and 1
2017-10-02 16:52:28.736069: I tensorflow/core/common_runtime/gpu/gpu_device.cc:847] Peer access not supported between device ordinals 1 and 0
2017-10-02 16:52:28.736084: I tensorflow/core/common_runtime/gpu/gpu_device.cc:976] DMA: 0 1 
2017-10-02 16:52:28.736095: I tensorflow/core/common_runtime/gpu/gpu_device.cc:986] 0:   Y N 
2017-10-02 16:52:28.736099: I tensorflow/core/common_runtime/gpu/gpu_device.cc:986] 1:   N Y 
2017-10-02 16:52:28.736110: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1045] Creating TensorFlow device (/gpu:0) -> (device: 0, name: Tesla M60, pci bus id: 9fa3:00:00.0)
2017-10-02 16:52:28.736120: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1045] Creating TensorFlow device (/gpu:1) -> (device: 1, name: Tesla M60, pci bus id: c533:00:00.0)
WARNING:tensorflow:Standard services need a 'logdir' passed to the SessionManager
TensorFlow:  1.3
Model:       alexnet
Mode:        training
Batch size:  256 global
             128 per device
Devices:     ['/gpu:0', '/gpu:1']
Data format: NCHW
Optimizer:   sgd
Variables:   replicated
Use NCCL:    True
==========
Generating model
number of parameters: 1756620.0
number of parameters: 3513239.0
Running warm up
Done warm up
Step	Img/sec	loss
1	images/sec: 5827.2 +/- 0.0 (jitter = 0.0)	2.441
10	images/sec: 4214.9 +/- 365.0 (jitter = 980.8)	2.225
20	images/sec: 4414.6 +/- 324.1 (jitter = 2077.6)	2.309
30	images/sec: 4980.7 +/- 270.7 (jitter = 1134.6)	1.998
40	images/sec: 5318.5 +/- 223.2 (jitter = 819.0)	2.032
50	images/sec: 5550.3 +/- 187.1 (jitter = 649.9)	2.048
60	images/sec: 5725.5 +/- 161.2 (jitter = 492.2)	1.963
70	images/sec: 5681.7 +/- 154.0 (jitter = 512.5)	2.134
80	images/sec: 5661.3 +/- 142.7 (jitter = 509.9)	1.851
90	images/sec: 5685.5 +/- 127.4 (jitter = 606.5)	1.778
100	images/sec: 5750.4 +/- 116.5 (jitter = 594.5)	2.138
----------------------------------------------------------------
total images/sec: 5828.97
----------------------------------------------------------------
++ for USE_NCCL in true false
++ CUDA_VISIBLE_DEVICES=0,1
++ python tensorflow-benchmarks/scripts/tf_cnn_benchmarks/tf_cnn_benchmarks.py --model alexnet --data_name cifar10 --data_dir /home/morgan/.keras/datasets/cifar-10-batches-py --num_gpus 2 --variable_update replicated --use_nccl false
2017-10-02 16:52:56.168988: W tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use SSE4.1 instructions, but these are available on your machine and could speed up CPU computations.
2017-10-02 16:52:56.169041: W tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use SSE4.2 instructions, but these are available on your machine and could speed up CPU computations.
2017-10-02 16:52:56.169047: W tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use AVX instructions, but these are available on your machine and could speed up CPU computations.
2017-10-02 16:52:56.169051: W tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use AVX2 instructions, but these are available on your machine and could speed up CPU computations.
2017-10-02 16:52:56.169055: W tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use FMA instructions, but these are available on your machine and could speed up CPU computations.
2017-10-02 16:53:02.685194: I tensorflow/core/common_runtime/gpu/gpu_device.cc:955] Found device 0 with properties: 
name: Tesla M60
major: 5 minor: 2 memoryClockRate (GHz) 1.1775
pciBusID 9fa3:00:00.0
Total memory: 7.93GiB
Free memory: 7.86GiB
2017-10-02 16:53:02.826808: W tensorflow/stream_executor/cuda/cuda_driver.cc:523] A non-primary context 0x92b37c0 exists before initializing the StreamExecutor. We haven't verified StreamExecutor works with that.
2017-10-02 16:53:02.827481: I tensorflow/core/common_runtime/gpu/gpu_device.cc:955] Found device 1 with properties: 
name: Tesla M60
major: 5 minor: 2 memoryClockRate (GHz) 1.1775
pciBusID c533:00:00.0
Total memory: 7.93GiB
Free memory: 7.86GiB
2017-10-02 16:53:02.827566: I tensorflow/core/common_runtime/gpu/gpu_device.cc:847] Peer access not supported between device ordinals 0 and 1
2017-10-02 16:53:02.827608: I tensorflow/core/common_runtime/gpu/gpu_device.cc:847] Peer access not supported between device ordinals 1 and 0
2017-10-02 16:53:02.827643: I tensorflow/core/common_runtime/gpu/gpu_device.cc:976] DMA: 0 1 
2017-10-02 16:53:02.827662: I tensorflow/core/common_runtime/gpu/gpu_device.cc:986] 0:   Y N 
2017-10-02 16:53:02.827675: I tensorflow/core/common_runtime/gpu/gpu_device.cc:986] 1:   N Y 
2017-10-02 16:53:02.827693: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1045] Creating TensorFlow device (/gpu:0) -> (device: 0, name: Tesla M60, pci bus id: 9fa3:00:00.0)
2017-10-02 16:53:02.827709: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1045] Creating TensorFlow device (/gpu:1) -> (device: 1, name: Tesla M60, pci bus id: c533:00:00.0)
WARNING:tensorflow:Standard services need a 'logdir' passed to the SessionManager
TensorFlow:  1.3
Model:       alexnet
Mode:        training
Batch size:  256 global
             128 per device
Devices:     ['/gpu:0', '/gpu:1']
Data format: NCHW
Optimizer:   sgd
Variables:   replicated
Use NCCL:    False
==========
Generating model
number of parameters: 1756620.0
number of parameters: 3513239.0
Running warm up
Done warm up
Step	Img/sec	loss
1	images/sec: 4070.5 +/- 0.0 (jitter = 0.0)	2.699
10	images/sec: 3081.1 +/- 610.3 (jitter = 970.4)	2.272
20	images/sec: 3763.1 +/- 395.6 (jitter = 2371.3)	2.165
30	images/sec: 4364.0 +/- 314.3 (jitter = 1222.2)	2.043
40	images/sec: 4787.1 +/- 260.4 (jitter = 869.5)	1.969
50	images/sec: 5113.7 +/- 225.0 (jitter = 735.2)	1.922
60	images/sec: 5363.8 +/- 196.9 (jitter = 725.0)	1.943
70	images/sec: 5561.9 +/- 175.0 (jitter = 610.4)	1.827
80	images/sec: 5524.4 +/- 163.4 (jitter = 684.3)	1.948
90	images/sec: 5604.6 +/- 146.8 (jitter = 662.5)	1.879
100	images/sec: 5696.3 +/- 133.8 (jitter = 594.3)	1.840
----------------------------------------------------------------
total images/sec: 5925.45
----------------------------------------------------------------
++ CUDA_VISIBLE_DEVICES=0,1
++ python tensorflow-benchmarks/scripts/tf_cnn_benchmarks/tf_cnn_benchmarks.py --model alexnet --data_name cifar10 --data_dir /home/morgan/.keras/datasets/cifar-10-batches-py --num_gpus 2 --variable_update independent
2017-10-02 16:53:31.431531: W tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use SSE4.1 instructions, but these are available on your machine and could speed up CPU computations.
2017-10-02 16:53:31.431637: W tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use SSE4.2 instructions, but these are available on your machine and could speed up CPU computations.
2017-10-02 16:53:31.431665: W tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use AVX instructions, but these are available on your machine and could speed up CPU computations.
2017-10-02 16:53:31.431686: W tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use AVX2 instructions, but these are available on your machine and could speed up CPU computations.
2017-10-02 16:53:31.431706: W tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use FMA instructions, but these are available on your machine and could speed up CPU computations.
2017-10-02 16:53:38.368554: I tensorflow/core/common_runtime/gpu/gpu_device.cc:955] Found device 0 with properties: 
name: Tesla M60
major: 5 minor: 2 memoryClockRate (GHz) 1.1775
pciBusID 9fa3:00:00.0
Total memory: 7.93GiB
Free memory: 7.86GiB
2017-10-02 16:53:38.505355: W tensorflow/stream_executor/cuda/cuda_driver.cc:523] A non-primary context 0x9723270 exists before initializing the StreamExecutor. We haven't verified StreamExecutor works with that.
2017-10-02 16:53:38.505945: I tensorflow/core/common_runtime/gpu/gpu_device.cc:955] Found device 1 with properties: 
name: Tesla M60
major: 5 minor: 2 memoryClockRate (GHz) 1.1775
pciBusID c533:00:00.0
Total memory: 7.93GiB
Free memory: 7.86GiB
2017-10-02 16:53:38.506005: I tensorflow/core/common_runtime/gpu/gpu_device.cc:847] Peer access not supported between device ordinals 0 and 1
2017-10-02 16:53:38.506025: I tensorflow/core/common_runtime/gpu/gpu_device.cc:847] Peer access not supported between device ordinals 1 and 0
2017-10-02 16:53:38.506040: I tensorflow/core/common_runtime/gpu/gpu_device.cc:976] DMA: 0 1 
2017-10-02 16:53:38.506051: I tensorflow/core/common_runtime/gpu/gpu_device.cc:986] 0:   Y N 
2017-10-02 16:53:38.506055: I tensorflow/core/common_runtime/gpu/gpu_device.cc:986] 1:   N Y 
2017-10-02 16:53:38.506064: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1045] Creating TensorFlow device (/gpu:0) -> (device: 0, name: Tesla M60, pci bus id: 9fa3:00:00.0)
2017-10-02 16:53:38.506069: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1045] Creating TensorFlow device (/gpu:1) -> (device: 1, name: Tesla M60, pci bus id: c533:00:00.0)
WARNING:tensorflow:Standard services need a 'logdir' passed to the SessionManager
TensorFlow:  1.3
Model:       alexnet
Mode:        training
Batch size:  256 global
             128 per device
Devices:     ['/gpu:0', '/gpu:1']
Data format: NCHW
Optimizer:   sgd
Variables:   independent
==========
Generating model
number of parameters: 1756620.0
number of parameters: 3513239.0
Running warm up
Done warm up
Step	Img/sec	loss
1	images/sec: 6120.7 +/- 0.0 (jitter = 0.0)	2.326
10	images/sec: 4411.5 +/- 346.2 (jitter = 1527.9)	2.240
20	images/sec: 4664.5 +/- 322.4 (jitter = 1677.1)	2.172
30	images/sec: 4965.3 +/- 246.7 (jitter = 1662.3)	2.187
40	images/sec: 5252.6 +/- 199.0 (jitter = 917.8)	2.077
50	images/sec: 5524.7 +/- 179.8 (jitter = 1029.1)	1.905
60	images/sec: 5724.0 +/- 160.9 (jitter = 964.6)	1.910
70	images/sec: 5891.1 +/- 146.5 (jitter = 977.4)	1.855
80	images/sec: 6017.7 +/- 132.3 (jitter = 787.4)	1.925
90	images/sec: 6125.3 +/- 121.0 (jitter = 606.1)	1.959
100	images/sec: 6207.9 +/- 111.1 (jitter = 578.4)	1.902
----------------------------------------------------------------
total images/sec: 6322.44
----------------------------------------------------------------
++ for MODEL in alexnet resnet20 resnet32 resnet44 resnet56 resnet110 densenet40_k12 densenet100_k12
++ RUN='python tensorflow-benchmarks/scripts/tf_cnn_benchmarks/tf_cnn_benchmarks.py --model resnet20 --data_name cifar10 --data_dir /home/morgan/.keras/datasets/cifar-10-batches-py'
++ CUDA_VISIBLE_DEVICES=0
++ python tensorflow-benchmarks/scripts/tf_cnn_benchmarks/tf_cnn_benchmarks.py --model resnet20 --data_name cifar10 --data_dir /home/morgan/.keras/datasets/cifar-10-batches-py --num_gpus 1
2017-10-02 16:54:02.862546: W tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use SSE4.1 instructions, but these are available on your machine and could speed up CPU computations.
2017-10-02 16:54:02.862605: W tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use SSE4.2 instructions, but these are available on your machine and could speed up CPU computations.
2017-10-02 16:54:02.862611: W tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use AVX instructions, but these are available on your machine and could speed up CPU computations.
2017-10-02 16:54:02.862615: W tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use AVX2 instructions, but these are available on your machine and could speed up CPU computations.
2017-10-02 16:54:02.862619: W tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use FMA instructions, but these are available on your machine and could speed up CPU computations.
2017-10-02 16:54:09.591223: I tensorflow/core/common_runtime/gpu/gpu_device.cc:955] Found device 0 with properties: 
name: Tesla M60
major: 5 minor: 2 memoryClockRate (GHz) 1.1775
pciBusID 9fa3:00:00.0
Total memory: 7.93GiB
Free memory: 7.86GiB
2017-10-02 16:54:09.591309: I tensorflow/core/common_runtime/gpu/gpu_device.cc:976] DMA: 0 
2017-10-02 16:54:09.591335: I tensorflow/core/common_runtime/gpu/gpu_device.cc:986] 0:   Y 
2017-10-02 16:54:09.591362: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1045] Creating TensorFlow device (/gpu:0) -> (device: 0, name: Tesla M60, pci bus id: 9fa3:00:00.0)
WARNING:tensorflow:Standard services need a 'logdir' passed to the SessionManager
TensorFlow:  1.3
Model:       resnet20
Mode:        training
Batch size:  128 global
             128 per device
Devices:     ['/gpu:0']
Data format: NCHW
Optimizer:   sgd
Variables:   parameter_server
==========
Generating model
number of parameters: 271164.0
Running warm up
Done warm up
Step	Img/sec	loss
1	images/sec: 2565.0 +/- 0.0 (jitter = 0.0)	2.218
10	images/sec: 2836.0 +/- 149.4 (jitter = 503.2)	2.101
20	images/sec: 3113.2 +/- 96.1 (jitter = 153.8)	2.027
30	images/sec: 2980.4 +/- 98.9 (jitter = 119.5)	2.089
40	images/sec: 3044.0 +/- 75.6 (jitter = 119.1)	1.935
50	images/sec: 3088.9 +/- 62.1 (jitter = 140.3)	1.945
60	images/sec: 3127.7 +/- 52.8 (jitter = 152.6)	1.854
70	images/sec: 3157.8 +/- 46.3 (jitter = 123.9)	1.941
80	images/sec: 3192.3 +/- 41.2 (jitter = 118.6)	1.928
90	images/sec: 3217.4 +/- 37.1 (jitter = 105.8)	1.752
100	images/sec: 3226.7 +/- 33.9 (jitter = 105.8)	1.599
----------------------------------------------------------------
total images/sec: 3250.52
----------------------------------------------------------------
++ CUDA_VISIBLE_DEVICES=0
++ python tensorflow-benchmarks/scripts/tf_cnn_benchmarks/tf_cnn_benchmarks.py --model resnet20 --data_name cifar10 --data_dir /home/morgan/.keras/datasets/cifar-10-batches-py --num_gpus 1 --data_format NHWC
2017-10-02 16:54:30.578748: W tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use SSE4.1 instructions, but these are available on your machine and could speed up CPU computations.
2017-10-02 16:54:30.578853: W tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use SSE4.2 instructions, but these are available on your machine and could speed up CPU computations.
2017-10-02 16:54:30.578882: W tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use AVX instructions, but these are available on your machine and could speed up CPU computations.
2017-10-02 16:54:30.578904: W tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use AVX2 instructions, but these are available on your machine and could speed up CPU computations.
2017-10-02 16:54:30.578926: W tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use FMA instructions, but these are available on your machine and could speed up CPU computations.
2017-10-02 16:54:37.329378: I tensorflow/core/common_runtime/gpu/gpu_device.cc:955] Found device 0 with properties: 
name: Tesla M60
major: 5 minor: 2 memoryClockRate (GHz) 1.1775
pciBusID 9fa3:00:00.0
Total memory: 7.93GiB
Free memory: 7.86GiB
2017-10-02 16:54:37.329420: I tensorflow/core/common_runtime/gpu/gpu_device.cc:976] DMA: 0 
2017-10-02 16:54:37.329427: I tensorflow/core/common_runtime/gpu/gpu_device.cc:986] 0:   Y 
2017-10-02 16:54:37.329436: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1045] Creating TensorFlow device (/gpu:0) -> (device: 0, name: Tesla M60, pci bus id: 9fa3:00:00.0)
WARNING:tensorflow:Standard services need a 'logdir' passed to the SessionManager
TensorFlow:  1.3
Model:       resnet20
Mode:        training
Batch size:  128 global
             128 per device
Devices:     ['/gpu:0']
Data format: NHWC
Optimizer:   sgd
Variables:   parameter_server
==========
Generating model
number of parameters: 271164.0
Running warm up
Done warm up
Step	Img/sec	loss
1	images/sec: 1622.0 +/- 0.0 (jitter = 0.0)	2.129
10	images/sec: 1968.8 +/- 85.4 (jitter = 158.9)	2.218
20	images/sec: 2079.1 +/- 51.9 (jitter = 125.6)	2.048
30	images/sec: 2123.5 +/- 41.1 (jitter = 207.8)	2.041
40	images/sec: 2166.8 +/- 32.9 (jitter = 164.0)	1.969
50	images/sec: 2107.7 +/- 37.9 (jitter = 172.3)	1.868
60	images/sec: 2136.6 +/- 32.2 (jitter = 116.8)	1.875
70	images/sec: 2147.5 +/- 28.0 (jitter = 112.1)	1.943
80	images/sec: 2173.1 +/- 25.4 (jitter = 99.9)	1.900
90	images/sec: 2183.1 +/- 23.0 (jitter = 98.0)	1.782
100	images/sec: 2195.8 +/- 21.0 (jitter = 92.0)	1.622
----------------------------------------------------------------
total images/sec: 2209.69
----------------------------------------------------------------
++ CUDA_VISIBLE_DEVICES=0,1
++ python tensorflow-benchmarks/scripts/tf_cnn_benchmarks/tf_cnn_benchmarks.py --model resnet20 --data_name cifar10 --data_dir /home/morgan/.keras/datasets/cifar-10-batches-py --num_gpus 2
2017-10-02 16:55:05.680241: W tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use SSE4.1 instructions, but these are available on your machine and could speed up CPU computations.
2017-10-02 16:55:05.680276: W tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use SSE4.2 instructions, but these are available on your machine and could speed up CPU computations.
2017-10-02 16:55:05.680283: W tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use AVX instructions, but these are available on your machine and could speed up CPU computations.
2017-10-02 16:55:05.680288: W tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use AVX2 instructions, but these are available on your machine and could speed up CPU computations.
2017-10-02 16:55:05.680294: W tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use FMA instructions, but these are available on your machine and could speed up CPU computations.
2017-10-02 16:55:11.820839: I tensorflow/core/common_runtime/gpu/gpu_device.cc:955] Found device 0 with properties: 
name: Tesla M60
major: 5 minor: 2 memoryClockRate (GHz) 1.1775
pciBusID 9fa3:00:00.0
Total memory: 7.93GiB
Free memory: 7.86GiB
2017-10-02 16:55:12.057478: W tensorflow/stream_executor/cuda/cuda_driver.cc:523] A non-primary context 0xc3e9040 exists before initializing the StreamExecutor. We haven't verified StreamExecutor works with that.
2017-10-02 16:55:12.058066: I tensorflow/core/common_runtime/gpu/gpu_device.cc:955] Found device 1 with properties: 
name: Tesla M60
major: 5 minor: 2 memoryClockRate (GHz) 1.1775
pciBusID c533:00:00.0
Total memory: 7.93GiB
Free memory: 7.86GiB
2017-10-02 16:55:12.058130: I tensorflow/core/common_runtime/gpu/gpu_device.cc:847] Peer access not supported between device ordinals 0 and 1
2017-10-02 16:55:12.058152: I tensorflow/core/common_runtime/gpu/gpu_device.cc:847] Peer access not supported between device ordinals 1 and 0
2017-10-02 16:55:12.058169: I tensorflow/core/common_runtime/gpu/gpu_device.cc:976] DMA: 0 1 
2017-10-02 16:55:12.058181: I tensorflow/core/common_runtime/gpu/gpu_device.cc:986] 0:   Y N 
2017-10-02 16:55:12.058186: I tensorflow/core/common_runtime/gpu/gpu_device.cc:986] 1:   N Y 
2017-10-02 16:55:12.058196: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1045] Creating TensorFlow device (/gpu:0) -> (device: 0, name: Tesla M60, pci bus id: 9fa3:00:00.0)
2017-10-02 16:55:12.058207: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1045] Creating TensorFlow device (/gpu:1) -> (device: 1, name: Tesla M60, pci bus id: c533:00:00.0)
WARNING:tensorflow:Standard services need a 'logdir' passed to the SessionManager
TensorFlow:  1.3
Model:       resnet20
Mode:        training
Batch size:  256 global
             128 per device
Devices:     ['/gpu:0', '/gpu:1']
Data format: NCHW
Optimizer:   sgd
Variables:   parameter_server
==========
Generating model
number of parameters: 271164.0
number of parameters: 271164.0
Running warm up
Done warm up
Step	Img/sec	loss
1	images/sec: 4300.4 +/- 0.0 (jitter = 0.0)	2.056
10	images/sec: 3731.6 +/- 132.0 (jitter = 505.2)	1.978
20	images/sec: 3985.0 +/- 240.6 (jitter = 954.7)	1.988
30	images/sec: 4436.6 +/- 202.6 (jitter = 472.3)	1.838
40	images/sec: 4686.4 +/- 165.0 (jitter = 329.5)	1.752
50	images/sec: 4882.6 +/- 141.2 (jitter = 247.4)	1.739
60	images/sec: 5012.1 +/- 121.4 (jitter = 203.3)	1.718
70	images/sec: 5095.0 +/- 105.9 (jitter = 177.1)	1.806
80	images/sec: 5158.6 +/- 93.8 (jitter = 175.0)	1.618
90	images/sec: 5066.2 +/- 92.8 (jitter = 194.3)	1.624
100	images/sec: 5112.7 +/- 84.1 (jitter = 197.5)	1.554
----------------------------------------------------------------
total images/sec: 5118.23
----------------------------------------------------------------
++ CUDA_VISIBLE_DEVICES=0,1
++ python tensorflow-benchmarks/scripts/tf_cnn_benchmarks/tf_cnn_benchmarks.py --model resnet20 --data_name cifar10 --data_dir /home/morgan/.keras/datasets/cifar-10-batches-py --num_gpus 2 --local_parameter_device cpu
2017-10-02 16:55:43.234309: W tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use SSE4.1 instructions, but these are available on your machine and could speed up CPU computations.
2017-10-02 16:55:43.234411: W tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use SSE4.2 instructions, but these are available on your machine and could speed up CPU computations.
2017-10-02 16:55:43.234441: W tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use AVX instructions, but these are available on your machine and could speed up CPU computations.
2017-10-02 16:55:43.234462: W tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use AVX2 instructions, but these are available on your machine and could speed up CPU computations.
2017-10-02 16:55:43.234483: W tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use FMA instructions, but these are available on your machine and could speed up CPU computations.
2017-10-02 16:55:49.653316: I tensorflow/core/common_runtime/gpu/gpu_device.cc:955] Found device 0 with properties: 
name: Tesla M60
major: 5 minor: 2 memoryClockRate (GHz) 1.1775
pciBusID 9fa3:00:00.0
Total memory: 7.93GiB
Free memory: 7.86GiB
2017-10-02 16:55:49.829539: W tensorflow/stream_executor/cuda/cuda_driver.cc:523] A non-primary context 0x9e7ea60 exists before initializing the StreamExecutor. We haven't verified StreamExecutor works with that.
2017-10-02 16:55:49.830136: I tensorflow/core/common_runtime/gpu/gpu_device.cc:955] Found device 1 with properties: 
name: Tesla M60
major: 5 minor: 2 memoryClockRate (GHz) 1.1775
pciBusID c533:00:00.0
Total memory: 7.93GiB
Free memory: 7.86GiB
2017-10-02 16:55:49.830198: I tensorflow/core/common_runtime/gpu/gpu_device.cc:847] Peer access not supported between device ordinals 0 and 1
2017-10-02 16:55:49.830218: I tensorflow/core/common_runtime/gpu/gpu_device.cc:847] Peer access not supported between device ordinals 1 and 0
2017-10-02 16:55:49.830234: I tensorflow/core/common_runtime/gpu/gpu_device.cc:976] DMA: 0 1 
2017-10-02 16:55:49.830246: I tensorflow/core/common_runtime/gpu/gpu_device.cc:986] 0:   Y N 
2017-10-02 16:55:49.830250: I tensorflow/core/common_runtime/gpu/gpu_device.cc:986] 1:   N Y 
2017-10-02 16:55:49.830259: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1045] Creating TensorFlow device (/gpu:0) -> (device: 0, name: Tesla M60, pci bus id: 9fa3:00:00.0)
2017-10-02 16:55:49.830269: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1045] Creating TensorFlow device (/gpu:1) -> (device: 1, name: Tesla M60, pci bus id: c533:00:00.0)
WARNING:tensorflow:Standard services need a 'logdir' passed to the SessionManager
TensorFlow:  1.3
Model:       resnet20
Mode:        training
Batch size:  256 global
             128 per device
Devices:     ['/gpu:0', '/gpu:1']
Data format: NCHW
Optimizer:   sgd
Variables:   parameter_server
==========
Generating model
number of parameters: 271164.0
number of parameters: 271164.0
Running warm up
Done warm up
Step	Img/sec	loss
1	images/sec: 2664.0 +/- 0.0 (jitter = 0.0)	2.060
10	images/sec: 3781.2 +/- 326.3 (jitter = 1535.9)	2.072
20	images/sec: 4392.7 +/- 214.2 (jitter = 472.1)	1.987
30	images/sec: 4277.8 +/- 183.4 (jitter = 680.3)	1.834
40	images/sec: 4558.9 +/- 159.1 (jitter = 614.2)	1.882
50	images/sec: 4724.5 +/- 136.1 (jitter = 515.5)	1.783
60	images/sec: 4707.2 +/- 130.7 (jitter = 546.5)	1.765
70	images/sec: 4705.7 +/- 120.2 (jitter = 542.3)	1.688
80	images/sec: 4763.9 +/- 107.3 (jitter = 561.5)	1.716
90	images/sec: 4741.1 +/- 103.4 (jitter = 612.2)	1.672
100	images/sec: 4843.6 +/- 97.9 (jitter = 603.1)	1.739
----------------------------------------------------------------
total images/sec: 4917.74
----------------------------------------------------------------
++ for USE_NCCL in true false
++ CUDA_VISIBLE_DEVICES=0,1
++ python tensorflow-benchmarks/scripts/tf_cnn_benchmarks/tf_cnn_benchmarks.py --model resnet20 --data_name cifar10 --data_dir /home/morgan/.keras/datasets/cifar-10-batches-py --num_gpus 2 --variable_update replicated --use_nccl true
2017-10-02 16:56:22.272237: W tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use SSE4.1 instructions, but these are available on your machine and could speed up CPU computations.
2017-10-02 16:56:22.272291: W tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use SSE4.2 instructions, but these are available on your machine and could speed up CPU computations.
2017-10-02 16:56:22.272297: W tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use AVX instructions, but these are available on your machine and could speed up CPU computations.
2017-10-02 16:56:22.272302: W tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use AVX2 instructions, but these are available on your machine and could speed up CPU computations.
2017-10-02 16:56:22.272306: W tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use FMA instructions, but these are available on your machine and could speed up CPU computations.
2017-10-02 16:56:28.751302: I tensorflow/core/common_runtime/gpu/gpu_device.cc:955] Found device 0 with properties: 
name: Tesla M60
major: 5 minor: 2 memoryClockRate (GHz) 1.1775
pciBusID 9fa3:00:00.0
Total memory: 7.93GiB
Free memory: 7.86GiB
2017-10-02 16:56:28.903296: W tensorflow/stream_executor/cuda/cuda_driver.cc:523] A non-primary context 0xa8f50f0 exists before initializing the StreamExecutor. We haven't verified StreamExecutor works with that.
2017-10-02 16:56:28.903913: I tensorflow/core/common_runtime/gpu/gpu_device.cc:955] Found device 1 with properties: 
name: Tesla M60
major: 5 minor: 2 memoryClockRate (GHz) 1.1775
pciBusID c533:00:00.0
Total memory: 7.93GiB
Free memory: 7.86GiB
2017-10-02 16:56:28.903975: I tensorflow/core/common_runtime/gpu/gpu_device.cc:847] Peer access not supported between device ordinals 0 and 1
2017-10-02 16:56:28.903995: I tensorflow/core/common_runtime/gpu/gpu_device.cc:847] Peer access not supported between device ordinals 1 and 0
2017-10-02 16:56:28.904012: I tensorflow/core/common_runtime/gpu/gpu_device.cc:976] DMA: 0 1 
2017-10-02 16:56:28.904023: I tensorflow/core/common_runtime/gpu/gpu_device.cc:986] 0:   Y N 
2017-10-02 16:56:28.904028: I tensorflow/core/common_runtime/gpu/gpu_device.cc:986] 1:   N Y 
2017-10-02 16:56:28.904036: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1045] Creating TensorFlow device (/gpu:0) -> (device: 0, name: Tesla M60, pci bus id: 9fa3:00:00.0)
2017-10-02 16:56:28.904042: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1045] Creating TensorFlow device (/gpu:1) -> (device: 1, name: Tesla M60, pci bus id: c533:00:00.0)
WARNING:tensorflow:Standard services need a 'logdir' passed to the SessionManager
TensorFlow:  1.3
Model:       resnet20
Mode:        training
Batch size:  256 global
             128 per device
Devices:     ['/gpu:0', '/gpu:1']
Data format: NCHW
Optimizer:   sgd
Variables:   replicated
Use NCCL:    True
==========
Generating model
number of parameters: 271164.0
number of parameters: 542327.0
Running warm up
Done warm up
Step	Img/sec	loss
1	images/sec: 4809.4 +/- 0.0 (jitter = 0.0)	2.234
10	images/sec: 4607.8 +/- 238.9 (jitter = 577.2)	2.246
20	images/sec: 4564.0 +/- 184.1 (jitter = 820.2)	2.276
30	images/sec: 4705.2 +/- 157.2 (jitter = 700.6)	1.794
40	images/sec: 4934.0 +/- 133.4 (jitter = 480.3)	1.927
50	images/sec: 5086.1 +/- 114.1 (jitter = 426.9)	1.953
60	images/sec: 5195.1 +/- 99.7 (jitter = 373.7)	1.801
70	images/sec: 5126.9 +/- 100.8 (jitter = 335.5)	1.709
80	images/sec: 5207.4 +/- 90.5 (jitter = 298.9)	1.802
90	images/sec: 5267.5 +/- 81.9 (jitter = 296.4)	1.719
100	images/sec: 5325.6 +/- 75.6 (jitter = 280.5)	1.638
----------------------------------------------------------------
total images/sec: 5340.06
----------------------------------------------------------------
++ for USE_NCCL in true false
++ CUDA_VISIBLE_DEVICES=0,1
++ python tensorflow-benchmarks/scripts/tf_cnn_benchmarks/tf_cnn_benchmarks.py --model resnet20 --data_name cifar10 --data_dir /home/morgan/.keras/datasets/cifar-10-batches-py --num_gpus 2 --variable_update replicated --use_nccl false
2017-10-02 16:57:01.496762: W tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use SSE4.1 instructions, but these are available on your machine and could speed up CPU computations.
2017-10-02 16:57:01.496818: W tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use SSE4.2 instructions, but these are available on your machine and could speed up CPU computations.
2017-10-02 16:57:01.496824: W tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use AVX instructions, but these are available on your machine and could speed up CPU computations.
2017-10-02 16:57:01.496828: W tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use AVX2 instructions, but these are available on your machine and could speed up CPU computations.
2017-10-02 16:57:01.496832: W tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use FMA instructions, but these are available on your machine and could speed up CPU computations.
2017-10-02 16:57:08.325008: I tensorflow/core/common_runtime/gpu/gpu_device.cc:955] Found device 0 with properties: 
name: Tesla M60
major: 5 minor: 2 memoryClockRate (GHz) 1.1775
pciBusID 9fa3:00:00.0
Total memory: 7.93GiB
Free memory: 7.86GiB
2017-10-02 16:57:08.465555: W tensorflow/stream_executor/cuda/cuda_driver.cc:523] A non-primary context 0xdbbaa80 exists before initializing the StreamExecutor. We haven't verified StreamExecutor works with that.
2017-10-02 16:57:08.466185: I tensorflow/core/common_runtime/gpu/gpu_device.cc:955] Found device 1 with properties: 
name: Tesla M60
major: 5 minor: 2 memoryClockRate (GHz) 1.1775
pciBusID c533:00:00.0
Total memory: 7.93GiB
Free memory: 7.86GiB
2017-10-02 16:57:08.466266: I tensorflow/core/common_runtime/gpu/gpu_device.cc:847] Peer access not supported between device ordinals 0 and 1
2017-10-02 16:57:08.466306: I tensorflow/core/common_runtime/gpu/gpu_device.cc:847] Peer access not supported between device ordinals 1 and 0
2017-10-02 16:57:08.466348: I tensorflow/core/common_runtime/gpu/gpu_device.cc:976] DMA: 0 1 
2017-10-02 16:57:08.466374: I tensorflow/core/common_runtime/gpu/gpu_device.cc:986] 0:   Y N 
2017-10-02 16:57:08.466394: I tensorflow/core/common_runtime/gpu/gpu_device.cc:986] 1:   N Y 
2017-10-02 16:57:08.466420: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1045] Creating TensorFlow device (/gpu:0) -> (device: 0, name: Tesla M60, pci bus id: 9fa3:00:00.0)
2017-10-02 16:57:08.466454: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1045] Creating TensorFlow device (/gpu:1) -> (device: 1, name: Tesla M60, pci bus id: c533:00:00.0)
WARNING:tensorflow:Standard services need a 'logdir' passed to the SessionManager
TensorFlow:  1.3
Model:       resnet20
Mode:        training
Batch size:  256 global
             128 per device
Devices:     ['/gpu:0', '/gpu:1']
Data format: NCHW
Optimizer:   sgd
Variables:   replicated
Use NCCL:    False
==========
Generating model
number of parameters: 271164.0
number of parameters: 542327.0
Running warm up
Done warm up
Step	Img/sec	loss
1	images/sec: 3557.7 +/- 0.0 (jitter = 0.0)	2.174
10	images/sec: 3813.8 +/- 218.6 (jitter = 447.1)	2.198
20	images/sec: 4525.2 +/- 228.2 (jitter = 1356.7)	2.057
30	images/sec: 4439.1 +/- 178.7 (jitter = 1180.3)	1.955
40	images/sec: 4593.2 +/- 140.1 (jitter = 950.4)	1.807
50	images/sec: 4733.7 +/- 119.3 (jitter = 698.8)	1.949
60	images/sec: 4837.5 +/- 106.1 (jitter = 723.4)	1.771
70	images/sec: 4892.7 +/- 100.3 (jitter = 778.1)	1.821
80	images/sec: 4814.3 +/- 100.6 (jitter = 769.9)	1.721
90	images/sec: 4908.8 +/- 93.7 (jitter = 753.7)	1.670
100	images/sec: 4979.4 +/- 87.0 (jitter = 730.1)	1.711
----------------------------------------------------------------
total images/sec: 5053.98
----------------------------------------------------------------
++ CUDA_VISIBLE_DEVICES=0,1
++ python tensorflow-benchmarks/scripts/tf_cnn_benchmarks/tf_cnn_benchmarks.py --model resnet20 --data_name cifar10 --data_dir /home/morgan/.keras/datasets/cifar-10-batches-py --num_gpus 2 --variable_update independent
2017-10-02 16:57:41.325229: W tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use SSE4.1 instructions, but these are available on your machine and could speed up CPU computations.
2017-10-02 16:57:41.325284: W tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use SSE4.2 instructions, but these are available on your machine and could speed up CPU computations.
2017-10-02 16:57:41.325290: W tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use AVX instructions, but these are available on your machine and could speed up CPU computations.
2017-10-02 16:57:41.325295: W tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use AVX2 instructions, but these are available on your machine and could speed up CPU computations.
2017-10-02 16:57:41.325299: W tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use FMA instructions, but these are available on your machine and could speed up CPU computations.
2017-10-02 16:57:48.042092: I tensorflow/core/common_runtime/gpu/gpu_device.cc:955] Found device 0 with properties: 
name: Tesla M60
major: 5 minor: 2 memoryClockRate (GHz) 1.1775
pciBusID 9fa3:00:00.0
Total memory: 7.93GiB
Free memory: 7.86GiB
2017-10-02 16:57:48.188132: W tensorflow/stream_executor/cuda/cuda_driver.cc:523] A non-primary context 0xab7f670 exists before initializing the StreamExecutor. We haven't verified StreamExecutor works with that.
2017-10-02 16:57:48.188885: I tensorflow/core/common_runtime/gpu/gpu_device.cc:955] Found device 1 with properties: 
name: Tesla M60
major: 5 minor: 2 memoryClockRate (GHz) 1.1775
pciBusID c533:00:00.0
Total memory: 7.93GiB
Free memory: 7.86GiB
2017-10-02 16:57:48.189038: I tensorflow/core/common_runtime/gpu/gpu_device.cc:847] Peer access not supported between device ordinals 0 and 1
2017-10-02 16:57:48.189122: I tensorflow/core/common_runtime/gpu/gpu_device.cc:847] Peer access not supported between device ordinals 1 and 0
2017-10-02 16:57:48.189198: I tensorflow/core/common_runtime/gpu/gpu_device.cc:976] DMA: 0 1 
2017-10-02 16:57:48.189249: I tensorflow/core/common_runtime/gpu/gpu_device.cc:986] 0:   Y N 
2017-10-02 16:57:48.189292: I tensorflow/core/common_runtime/gpu/gpu_device.cc:986] 1:   N Y 
2017-10-02 16:57:48.189353: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1045] Creating TensorFlow device (/gpu:0) -> (device: 0, name: Tesla M60, pci bus id: 9fa3:00:00.0)
2017-10-02 16:57:48.189412: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1045] Creating TensorFlow device (/gpu:1) -> (device: 1, name: Tesla M60, pci bus id: c533:00:00.0)
WARNING:tensorflow:Standard services need a 'logdir' passed to the SessionManager
TensorFlow:  1.3
Model:       resnet20
Mode:        training
Batch size:  256 global
             128 per device
Devices:     ['/gpu:0', '/gpu:1']
Data format: NCHW
Optimizer:   sgd
Variables:   independent
==========
Generating model
number of parameters: 271164.0
number of parameters: 542327.0
Running warm up
Done warm up
Step	Img/sec	loss
1	images/sec: 4811.1 +/- 0.0 (jitter = 0.0)	2.127
10	images/sec: 3467.5 +/- 381.8 (jitter = 639.3)	1.972
20	images/sec: 4441.3 +/- 321.6 (jitter = 1304.8)	2.076
30	images/sec: 4688.8 +/- 253.0 (jitter = 1244.0)	1.919
40	images/sec: 5061.2 +/- 213.1 (jitter = 583.7)	1.945
50	images/sec: 5290.6 +/- 178.7 (jitter = 250.6)	1.796
60	images/sec: 5450.5 +/- 153.2 (jitter = 237.0)	1.786
70	images/sec: 5562.9 +/- 133.9 (jitter = 215.4)	1.758
80	images/sec: 5577.4 +/- 121.1 (jitter = 264.6)	1.672
90	images/sec: 5629.1 +/- 109.0 (jitter = 330.6)	1.823
100	images/sec: 5687.9 +/- 99.6 (jitter = 296.4)	1.689
----------------------------------------------------------------
total images/sec: 5667.80
----------------------------------------------------------------
++ for MODEL in alexnet resnet20 resnet32 resnet44 resnet56 resnet110 densenet40_k12 densenet100_k12
++ RUN='python tensorflow-benchmarks/scripts/tf_cnn_benchmarks/tf_cnn_benchmarks.py --model resnet32 --data_name cifar10 --data_dir /home/morgan/.keras/datasets/cifar-10-batches-py'
++ CUDA_VISIBLE_DEVICES=0
++ python tensorflow-benchmarks/scripts/tf_cnn_benchmarks/tf_cnn_benchmarks.py --model resnet32 --data_name cifar10 --data_dir /home/morgan/.keras/datasets/cifar-10-batches-py --num_gpus 1
2017-10-02 16:58:13.929792: W tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use SSE4.1 instructions, but these are available on your machine and could speed up CPU computations.
2017-10-02 16:58:13.929845: W tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use SSE4.2 instructions, but these are available on your machine and could speed up CPU computations.
2017-10-02 16:58:13.929851: W tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use AVX instructions, but these are available on your machine and could speed up CPU computations.
2017-10-02 16:58:13.929854: W tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use AVX2 instructions, but these are available on your machine and could speed up CPU computations.
2017-10-02 16:58:13.929858: W tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use FMA instructions, but these are available on your machine and could speed up CPU computations.
2017-10-02 16:58:20.769687: I tensorflow/core/common_runtime/gpu/gpu_device.cc:955] Found device 0 with properties: 
name: Tesla M60
major: 5 minor: 2 memoryClockRate (GHz) 1.1775
pciBusID 9fa3:00:00.0
Total memory: 7.93GiB
Free memory: 7.86GiB
2017-10-02 16:58:20.769769: I tensorflow/core/common_runtime/gpu/gpu_device.cc:976] DMA: 0 
2017-10-02 16:58:20.769796: I tensorflow/core/common_runtime/gpu/gpu_device.cc:986] 0:   Y 
2017-10-02 16:58:20.769822: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1045] Creating TensorFlow device (/gpu:0) -> (device: 0, name: Tesla M60, pci bus id: 9fa3:00:00.0)
WARNING:tensorflow:Standard services need a 'logdir' passed to the SessionManager
TensorFlow:  1.3
Model:       resnet32
Mode:        training
Batch size:  128 global
             128 per device
Devices:     ['/gpu:0']
Data format: NCHW
Optimizer:   sgd
Variables:   parameter_server
==========
Generating model
number of parameters: 466492.0
Running warm up
Done warm up
Step	Img/sec	loss
1	images/sec: 1919.4 +/- 0.0 (jitter = 0.0)	2.305
10	images/sec: 1956.4 +/- 79.3 (jitter = 189.4)	2.173
20	images/sec: 1976.3 +/- 41.8 (jitter = 180.8)	2.166
30	images/sec: 2010.9 +/- 30.9 (jitter = 171.8)	2.409
40	images/sec: 2037.9 +/- 26.0 (jitter = 147.4)	2.074
50	images/sec: 2066.8 +/- 22.3 (jitter = 75.1)	2.154
60	images/sec: 2077.3 +/- 19.3 (jitter = 58.7)	1.905
70	images/sec: 2046.5 +/- 24.6 (jitter = 54.4)	1.980
80	images/sec: 2037.0 +/- 22.2 (jitter = 70.8)	2.192
90	images/sec: 2039.2 +/- 20.1 (jitter = 73.7)	1.878
100	images/sec: 2049.5 +/- 18.5 (jitter = 76.3)	1.586
----------------------------------------------------------------
total images/sec: 2055.00
----------------------------------------------------------------
++ CUDA_VISIBLE_DEVICES=0
++ python tensorflow-benchmarks/scripts/tf_cnn_benchmarks/tf_cnn_benchmarks.py --model resnet32 --data_name cifar10 --data_dir /home/morgan/.keras/datasets/cifar-10-batches-py --num_gpus 1 --data_format NHWC
2017-10-02 16:58:45.547412: W tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use SSE4.1 instructions, but these are available on your machine and could speed up CPU computations.
2017-10-02 16:58:45.547468: W tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use SSE4.2 instructions, but these are available on your machine and could speed up CPU computations.
2017-10-02 16:58:45.547474: W tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use AVX instructions, but these are available on your machine and could speed up CPU computations.
2017-10-02 16:58:45.547478: W tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use AVX2 instructions, but these are available on your machine and could speed up CPU computations.
2017-10-02 16:58:45.547482: W tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use FMA instructions, but these are available on your machine and could speed up CPU computations.
2017-10-02 16:58:52.486577: I tensorflow/core/common_runtime/gpu/gpu_device.cc:955] Found device 0 with properties: 
name: Tesla M60
major: 5 minor: 2 memoryClockRate (GHz) 1.1775
pciBusID 9fa3:00:00.0
Total memory: 7.93GiB
Free memory: 7.86GiB
2017-10-02 16:58:52.486615: I tensorflow/core/common_runtime/gpu/gpu_device.cc:976] DMA: 0 
2017-10-02 16:58:52.486622: I tensorflow/core/common_runtime/gpu/gpu_device.cc:986] 0:   Y 
2017-10-02 16:58:52.486631: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1045] Creating TensorFlow device (/gpu:0) -> (device: 0, name: Tesla M60, pci bus id: 9fa3:00:00.0)
WARNING:tensorflow:Standard services need a 'logdir' passed to the SessionManager
TensorFlow:  1.3
Model:       resnet32
Mode:        training
Batch size:  128 global
             128 per device
Devices:     ['/gpu:0']
Data format: NHWC
Optimizer:   sgd
Variables:   parameter_server
==========
Generating model
number of parameters: 466492.0
Running warm up
Done warm up
Step	Img/sec	loss
1	images/sec: 1347.2 +/- 0.0 (jitter = 0.0)	2.754
10	images/sec: 1396.4 +/- 16.7 (jitter = 27.4)	2.426
20	images/sec: 1386.0 +/- 10.1 (jitter = 28.0)	2.059
30	images/sec: 1359.1 +/- 24.8 (jitter = 58.5)	2.478
40	images/sec: 1383.4 +/- 19.5 (jitter = 75.9)	2.153
50	images/sec: 1381.0 +/- 16.2 (jitter = 64.8)	2.146
60	images/sec: 1392.5 +/- 14.4 (jitter = 86.1)	2.144
70	images/sec: 1402.0 +/- 12.7 (jitter = 84.3)	2.008
80	images/sec: 1409.6 +/- 11.3 (jitter = 64.8)	2.214
90	images/sec: 1392.1 +/- 13.1 (jitter = 82.7)	1.942
100	images/sec: 1397.3 +/- 11.9 (jitter = 77.0)	1.634
----------------------------------------------------------------
total images/sec: 1401.60
----------------------------------------------------------------
++ CUDA_VISIBLE_DEVICES=0,1
++ python tensorflow-benchmarks/scripts/tf_cnn_benchmarks/tf_cnn_benchmarks.py --model resnet32 --data_name cifar10 --data_dir /home/morgan/.keras/datasets/cifar-10-batches-py --num_gpus 2
2017-10-02 16:59:25.780605: W tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use SSE4.1 instructions, but these are available on your machine and could speed up CPU computations.
2017-10-02 16:59:25.780661: W tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use SSE4.2 instructions, but these are available on your machine and could speed up CPU computations.
2017-10-02 16:59:25.780667: W tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use AVX instructions, but these are available on your machine and could speed up CPU computations.
2017-10-02 16:59:25.780671: W tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use AVX2 instructions, but these are available on your machine and could speed up CPU computations.
2017-10-02 16:59:25.780675: W tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use FMA instructions, but these are available on your machine and could speed up CPU computations.
2017-10-02 16:59:32.474909: I tensorflow/core/common_runtime/gpu/gpu_device.cc:955] Found device 0 with properties: 
name: Tesla M60
major: 5 minor: 2 memoryClockRate (GHz) 1.1775
pciBusID 9fa3:00:00.0
Total memory: 7.93GiB
Free memory: 7.86GiB
2017-10-02 16:59:32.614746: W tensorflow/stream_executor/cuda/cuda_driver.cc:523] A non-primary context 0xe63b3a0 exists before initializing the StreamExecutor. We haven't verified StreamExecutor works with that.
2017-10-02 16:59:32.615355: I tensorflow/core/common_runtime/gpu/gpu_device.cc:955] Found device 1 with properties: 
name: Tesla M60
major: 5 minor: 2 memoryClockRate (GHz) 1.1775
pciBusID c533:00:00.0
Total memory: 7.93GiB
Free memory: 7.86GiB
2017-10-02 16:59:32.615415: I tensorflow/core/common_runtime/gpu/gpu_device.cc:847] Peer access not supported between device ordinals 0 and 1
2017-10-02 16:59:32.615435: I tensorflow/core/common_runtime/gpu/gpu_device.cc:847] Peer access not supported between device ordinals 1 and 0
2017-10-02 16:59:32.615451: I tensorflow/core/common_runtime/gpu/gpu_device.cc:976] DMA: 0 1 
2017-10-02 16:59:32.615456: I tensorflow/core/common_runtime/gpu/gpu_device.cc:986] 0:   Y N 
2017-10-02 16:59:32.615460: I tensorflow/core/common_runtime/gpu/gpu_device.cc:986] 1:   N Y 
2017-10-02 16:59:32.615468: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1045] Creating TensorFlow device (/gpu:0) -> (device: 0, name: Tesla M60, pci bus id: 9fa3:00:00.0)
2017-10-02 16:59:32.615480: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1045] Creating TensorFlow device (/gpu:1) -> (device: 1, name: Tesla M60, pci bus id: c533:00:00.0)
WARNING:tensorflow:Standard services need a 'logdir' passed to the SessionManager
TensorFlow:  1.3
Model:       resnet32
Mode:        training
Batch size:  256 global
             128 per device
Devices:     ['/gpu:0', '/gpu:1']
Data format: NCHW
Optimizer:   sgd
Variables:   parameter_server
==========
Generating model
number of parameters: 466492.0
number of parameters: 466492.0
Running warm up
Done warm up
Step	Img/sec	loss
1	images/sec: 3279.5 +/- 0.0 (jitter = 0.0)	2.415
10	images/sec: 3149.0 +/- 110.0 (jitter = 258.9)	2.290
20	images/sec: 3339.2 +/- 73.3 (jitter = 226.7)	2.315
30	images/sec: 3413.8 +/- 54.9 (jitter = 250.2)	2.239
40	images/sec: 3451.0 +/- 45.5 (jitter = 263.8)	1.801
50	images/sec: 3456.1 +/- 38.1 (jitter = 250.2)	1.889
60	images/sec: 3406.5 +/- 45.4 (jitter = 224.7)	1.863
70	images/sec: 3433.4 +/- 40.6 (jitter = 229.9)	1.988
80	images/sec: 3470.5 +/- 37.6 (jitter = 230.5)	1.904
90	images/sec: 3495.3 +/- 34.4 (jitter = 215.7)	1.732
100	images/sec: 3490.7 +/- 32.0 (jitter = 237.4)	1.714
----------------------------------------------------------------
total images/sec: 3491.95
----------------------------------------------------------------
++ CUDA_VISIBLE_DEVICES=0,1
++ python tensorflow-benchmarks/scripts/tf_cnn_benchmarks/tf_cnn_benchmarks.py --model resnet32 --data_name cifar10 --data_dir /home/morgan/.keras/datasets/cifar-10-batches-py --num_gpus 2 --local_parameter_device cpu
2017-10-02 17:00:08.776614: W tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use SSE4.1 instructions, but these are available on your machine and could speed up CPU computations.
2017-10-02 17:00:08.776660: W tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use SSE4.2 instructions, but these are available on your machine and could speed up CPU computations.
2017-10-02 17:00:08.776666: W tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use AVX instructions, but these are available on your machine and could speed up CPU computations.
2017-10-02 17:00:08.776670: W tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use AVX2 instructions, but these are available on your machine and could speed up CPU computations.
2017-10-02 17:00:08.776674: W tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use FMA instructions, but these are available on your machine and could speed up CPU computations.
2017-10-02 17:00:15.158097: I tensorflow/core/common_runtime/gpu/gpu_device.cc:955] Found device 0 with properties: 
name: Tesla M60
major: 5 minor: 2 memoryClockRate (GHz) 1.1775
pciBusID 9fa3:00:00.0
Total memory: 7.93GiB
Free memory: 7.86GiB
2017-10-02 17:00:15.295142: W tensorflow/stream_executor/cuda/cuda_driver.cc:523] A non-primary context 0x9ffe620 exists before initializing the StreamExecutor. We haven't verified StreamExecutor works with that.
2017-10-02 17:00:15.295724: I tensorflow/core/common_runtime/gpu/gpu_device.cc:955] Found device 1 with properties: 
name: Tesla M60
major: 5 minor: 2 memoryClockRate (GHz) 1.1775
pciBusID c533:00:00.0
Total memory: 7.93GiB
Free memory: 7.86GiB
2017-10-02 17:00:15.295784: I tensorflow/core/common_runtime/gpu/gpu_device.cc:847] Peer access not supported between device ordinals 0 and 1
2017-10-02 17:00:15.295804: I tensorflow/core/common_runtime/gpu/gpu_device.cc:847] Peer access not supported between device ordinals 1 and 0
2017-10-02 17:00:15.295821: I tensorflow/core/common_runtime/gpu/gpu_device.cc:976] DMA: 0 1 
2017-10-02 17:00:15.295826: I tensorflow/core/common_runtime/gpu/gpu_device.cc:986] 0:   Y N 
2017-10-02 17:00:15.295830: I tensorflow/core/common_runtime/gpu/gpu_device.cc:986] 1:   N Y 
2017-10-02 17:00:15.295839: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1045] Creating TensorFlow device (/gpu:0) -> (device: 0, name: Tesla M60, pci bus id: 9fa3:00:00.0)
2017-10-02 17:00:15.295850: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1045] Creating TensorFlow device (/gpu:1) -> (device: 1, name: Tesla M60, pci bus id: c533:00:00.0)
WARNING:tensorflow:Standard services need a 'logdir' passed to the SessionManager
TensorFlow:  1.3
Model:       resnet32
Mode:        training
Batch size:  256 global
             128 per device
Devices:     ['/gpu:0', '/gpu:1']
Data format: NCHW
Optimizer:   sgd
Variables:   parameter_server
==========
Generating model
number of parameters: 466492.0
number of parameters: 466492.0
Running warm up
Done warm up
Step	Img/sec	loss
1	images/sec: 2661.1 +/- 0.0 (jitter = 0.0)	2.383
10	images/sec: 3472.1 +/- 173.0 (jitter = 789.5)	2.570
20	images/sec: 3842.4 +/- 120.0 (jitter = 122.0)	2.354
30	images/sec: 3939.2 +/- 84.4 (jitter = 139.5)	2.258
40	images/sec: 3854.3 +/- 88.3 (jitter = 124.9)	1.912
50	images/sec: 3875.9 +/- 74.8 (jitter = 123.3)	1.866
60	images/sec: 3919.6 +/- 65.0 (jitter = 126.5)	1.943
70	images/sec: 3972.6 +/- 57.2 (jitter = 118.4)	1.808
80	images/sec: 4005.7 +/- 50.7 (jitter = 101.4)	1.776
90	images/sec: 4036.0 +/- 45.6 (jitter = 90.9)	1.786
100	images/sec: 4056.5 +/- 41.4 (jitter = 83.0)	1.677
----------------------------------------------------------------
total images/sec: 4107.16
----------------------------------------------------------------
++ for USE_NCCL in true false
++ CUDA_VISIBLE_DEVICES=0,1
++ python tensorflow-benchmarks/scripts/tf_cnn_benchmarks/tf_cnn_benchmarks.py --model resnet32 --data_name cifar10 --data_dir /home/morgan/.keras/datasets/cifar-10-batches-py --num_gpus 2 --variable_update replicated --use_nccl true
2017-10-02 17:00:50.743434: W tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use SSE4.1 instructions, but these are available on your machine and could speed up CPU computations.
2017-10-02 17:00:50.743489: W tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use SSE4.2 instructions, but these are available on your machine and could speed up CPU computations.
2017-10-02 17:00:50.743495: W tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use AVX instructions, but these are available on your machine and could speed up CPU computations.
2017-10-02 17:00:50.743499: W tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use AVX2 instructions, but these are available on your machine and could speed up CPU computations.
2017-10-02 17:00:50.743503: W tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use FMA instructions, but these are available on your machine and could speed up CPU computations.
2017-10-02 17:00:56.996067: I tensorflow/core/common_runtime/gpu/gpu_device.cc:955] Found device 0 with properties: 
name: Tesla M60
major: 5 minor: 2 memoryClockRate (GHz) 1.1775
pciBusID 9fa3:00:00.0
Total memory: 7.93GiB
Free memory: 7.86GiB
2017-10-02 17:00:57.133846: W tensorflow/stream_executor/cuda/cuda_driver.cc:523] A non-primary context 0xf1bf100 exists before initializing the StreamExecutor. We haven't verified StreamExecutor works with that.
2017-10-02 17:00:57.134485: I tensorflow/core/common_runtime/gpu/gpu_device.cc:955] Found device 1 with properties: 
name: Tesla M60
major: 5 minor: 2 memoryClockRate (GHz) 1.1775
pciBusID c533:00:00.0
Total memory: 7.93GiB
Free memory: 7.86GiB
2017-10-02 17:00:57.134568: I tensorflow/core/common_runtime/gpu/gpu_device.cc:847] Peer access not supported between device ordinals 0 and 1
2017-10-02 17:00:57.134610: I tensorflow/core/common_runtime/gpu/gpu_device.cc:847] Peer access not supported between device ordinals 1 and 0
2017-10-02 17:00:57.134651: I tensorflow/core/common_runtime/gpu/gpu_device.cc:976] DMA: 0 1 
2017-10-02 17:00:57.134678: I tensorflow/core/common_runtime/gpu/gpu_device.cc:986] 0:   Y N 
2017-10-02 17:00:57.134699: I tensorflow/core/common_runtime/gpu/gpu_device.cc:986] 1:   N Y 
2017-10-02 17:00:57.134725: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1045] Creating TensorFlow device (/gpu:0) -> (device: 0, name: Tesla M60, pci bus id: 9fa3:00:00.0)
2017-10-02 17:00:57.134750: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1045] Creating TensorFlow device (/gpu:1) -> (device: 1, name: Tesla M60, pci bus id: c533:00:00.0)
WARNING:tensorflow:Standard services need a 'logdir' passed to the SessionManager
TensorFlow:  1.3
Model:       resnet32
Mode:        training
Batch size:  256 global
             128 per device
Devices:     ['/gpu:0', '/gpu:1']
Data format: NCHW
Optimizer:   sgd
Variables:   replicated
Use NCCL:    True
==========
Generating model
number of parameters: 466492.0
number of parameters: 932983.0
Running warm up
Done warm up
Step	Img/sec	loss
1	images/sec: 2447.7 +/- 0.0 (jitter = 0.0)	2.584
10	images/sec: 3448.6 +/- 125.5 (jitter = 293.0)	2.200
20	images/sec: 3621.9 +/- 75.6 (jitter = 183.9)	2.241
30	images/sec: 3686.9 +/- 52.8 (jitter = 126.7)	2.132
40	images/sec: 3715.4 +/- 41.0 (jitter = 105.8)	1.854
50	images/sec: 3678.9 +/- 37.2 (jitter = 150.5)	1.986
60	images/sec: 3671.5 +/- 32.7 (jitter = 153.1)	1.782
70	images/sec: 3593.3 +/- 41.6 (jitter = 163.6)	2.045
80	images/sec: 3583.8 +/- 37.3 (jitter = 206.4)	1.783
90	images/sec: 3600.4 +/- 34.4 (jitter = 176.4)	1.939
100	images/sec: 3618.3 +/- 31.7 (jitter = 174.5)	1.839
----------------------------------------------------------------
total images/sec: 3619.93
----------------------------------------------------------------
++ for USE_NCCL in true false
++ CUDA_VISIBLE_DEVICES=0,1
++ python tensorflow-benchmarks/scripts/tf_cnn_benchmarks/tf_cnn_benchmarks.py --model resnet32 --data_name cifar10 --data_dir /home/morgan/.keras/datasets/cifar-10-batches-py --num_gpus 2 --variable_update replicated --use_nccl false
2017-10-02 17:01:34.959893: W tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use SSE4.1 instructions, but these are available on your machine and could speed up CPU computations.
2017-10-02 17:01:34.959936: W tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use SSE4.2 instructions, but these are available on your machine and could speed up CPU computations.
2017-10-02 17:01:34.959943: W tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use AVX instructions, but these are available on your machine and could speed up CPU computations.
2017-10-02 17:01:34.959947: W tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use AVX2 instructions, but these are available on your machine and could speed up CPU computations.
2017-10-02 17:01:34.959951: W tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use FMA instructions, but these are available on your machine and could speed up CPU computations.
2017-10-02 17:01:41.602410: I tensorflow/core/common_runtime/gpu/gpu_device.cc:955] Found device 0 with properties: 
name: Tesla M60
major: 5 minor: 2 memoryClockRate (GHz) 1.1775
pciBusID 9fa3:00:00.0
Total memory: 7.93GiB
Free memory: 7.86GiB
2017-10-02 17:01:41.747241: W tensorflow/stream_executor/cuda/cuda_driver.cc:523] A non-primary context 0xf6b51c0 exists before initializing the StreamExecutor. We haven't verified StreamExecutor works with that.
2017-10-02 17:01:41.747844: I tensorflow/core/common_runtime/gpu/gpu_device.cc:955] Found device 1 with properties: 
name: Tesla M60
major: 5 minor: 2 memoryClockRate (GHz) 1.1775
pciBusID c533:00:00.0
Total memory: 7.93GiB
Free memory: 7.86GiB
2017-10-02 17:01:41.747905: I tensorflow/core/common_runtime/gpu/gpu_device.cc:847] Peer access not supported between device ordinals 0 and 1
2017-10-02 17:01:41.747926: I tensorflow/core/common_runtime/gpu/gpu_device.cc:847] Peer access not supported between device ordinals 1 and 0
2017-10-02 17:01:41.747944: I tensorflow/core/common_runtime/gpu/gpu_device.cc:976] DMA: 0 1 
2017-10-02 17:01:41.747956: I tensorflow/core/common_runtime/gpu/gpu_device.cc:986] 0:   Y N 
2017-10-02 17:01:41.747960: I tensorflow/core/common_runtime/gpu/gpu_device.cc:986] 1:   N Y 
2017-10-02 17:01:41.747969: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1045] Creating TensorFlow device (/gpu:0) -> (device: 0, name: Tesla M60, pci bus id: 9fa3:00:00.0)
2017-10-02 17:01:41.747976: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1045] Creating TensorFlow device (/gpu:1) -> (device: 1, name: Tesla M60, pci bus id: c533:00:00.0)
WARNING:tensorflow:Standard services need a 'logdir' passed to the SessionManager
TensorFlow:  1.3
Model:       resnet32
Mode:        training
Batch size:  256 global
             128 per device
Devices:     ['/gpu:0', '/gpu:1']
Data format: NCHW
Optimizer:   sgd
Variables:   replicated
Use NCCL:    False
==========
Generating model
number of parameters: 466492.0
number of parameters: 932983.0
Running warm up
Done warm up
Step	Img/sec	loss
1	images/sec: 1408.9 +/- 0.0 (jitter = 0.0)	2.577
10	images/sec: 3368.9 +/- 246.7 (jitter = 141.1)	2.090
20	images/sec: 3604.5 +/- 132.8 (jitter = 134.7)	2.229
30	images/sec: 3676.9 +/- 95.6 (jitter = 123.9)	2.055
40	images/sec: 3694.8 +/- 76.5 (jitter = 171.2)	1.836
50	images/sec: 3706.0 +/- 63.0 (jitter = 191.2)	1.896
60	images/sec: 3743.6 +/- 54.0 (jitter = 191.2)	1.751
70	images/sec: 3760.4 +/- 47.5 (jitter = 208.8)	1.984
80	images/sec: 3718.0 +/- 50.6 (jitter = 200.2)	1.841
90	images/sec: 3755.0 +/- 45.9 (jitter = 176.5)	1.801
100	images/sec: 3781.8 +/- 41.8 (jitter = 166.2)	1.833
----------------------------------------------------------------
total images/sec: 3833.91
----------------------------------------------------------------
++ CUDA_VISIBLE_DEVICES=0,1
++ python tensorflow-benchmarks/scripts/tf_cnn_benchmarks/tf_cnn_benchmarks.py --model resnet32 --data_name cifar10 --data_dir /home/morgan/.keras/datasets/cifar-10-batches-py --num_gpus 2 --variable_update independent
2017-10-02 17:02:18.859174: W tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use SSE4.1 instructions, but these are available on your machine and could speed up CPU computations.
2017-10-02 17:02:18.859231: W tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use SSE4.2 instructions, but these are available on your machine and could speed up CPU computations.
2017-10-02 17:02:18.859238: W tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use AVX instructions, but these are available on your machine and could speed up CPU computations.
2017-10-02 17:02:18.859242: W tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use AVX2 instructions, but these are available on your machine and could speed up CPU computations.
2017-10-02 17:02:18.859246: W tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use FMA instructions, but these are available on your machine and could speed up CPU computations.
2017-10-02 17:02:25.892465: I tensorflow/core/common_runtime/gpu/gpu_device.cc:955] Found device 0 with properties: 
name: Tesla M60
major: 5 minor: 2 memoryClockRate (GHz) 1.1775
pciBusID 9fa3:00:00.0
Total memory: 7.93GiB
Free memory: 7.86GiB
2017-10-02 17:02:26.028015: W tensorflow/stream_executor/cuda/cuda_driver.cc:523] A non-primary context 0xd4b0210 exists before initializing the StreamExecutor. We haven't verified StreamExecutor works with that.
2017-10-02 17:02:26.028649: I tensorflow/core/common_runtime/gpu/gpu_device.cc:955] Found device 1 with properties: 
name: Tesla M60
major: 5 minor: 2 memoryClockRate (GHz) 1.1775
pciBusID c533:00:00.0
Total memory: 7.93GiB
Free memory: 7.86GiB
2017-10-02 17:02:26.028732: I tensorflow/core/common_runtime/gpu/gpu_device.cc:847] Peer access not supported between device ordinals 0 and 1
2017-10-02 17:02:26.028774: I tensorflow/core/common_runtime/gpu/gpu_device.cc:847] Peer access not supported between device ordinals 1 and 0
2017-10-02 17:02:26.028817: I tensorflow/core/common_runtime/gpu/gpu_device.cc:976] DMA: 0 1 
2017-10-02 17:02:26.028844: I tensorflow/core/common_runtime/gpu/gpu_device.cc:986] 0:   Y N 
2017-10-02 17:02:26.028865: I tensorflow/core/common_runtime/gpu/gpu_device.cc:986] 1:   N Y 
2017-10-02 17:02:26.028893: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1045] Creating TensorFlow device (/gpu:0) -> (device: 0, name: Tesla M60, pci bus id: 9fa3:00:00.0)
2017-10-02 17:02:26.028913: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1045] Creating TensorFlow device (/gpu:1) -> (device: 1, name: Tesla M60, pci bus id: c533:00:00.0)
WARNING:tensorflow:Standard services need a 'logdir' passed to the SessionManager
TensorFlow:  1.3
Model:       resnet32
Mode:        training
Batch size:  256 global
             128 per device
Devices:     ['/gpu:0', '/gpu:1']
Data format: NCHW
Optimizer:   sgd
Variables:   independent
==========
Generating model
number of parameters: 466492.0
number of parameters: 932983.0
Running warm up
Done warm up
Step	Img/sec	loss
1	images/sec: 3473.8 +/- 0.0 (jitter = 0.0)	2.618
10	images/sec: 3176.8 +/- 136.2 (jitter = 352.6)	2.240
20	images/sec: 3242.0 +/- 142.5 (jitter = 700.9)	2.148
30	images/sec: 3496.8 +/- 118.4 (jitter = 687.2)	2.085
40	images/sec: 3614.7 +/- 95.0 (jitter = 528.0)	2.187
50	images/sec: 3664.7 +/- 78.7 (jitter = 472.0)	1.899
60	images/sec: 3728.2 +/- 68.2 (jitter = 430.7)	1.853
70	images/sec: 3780.4 +/- 60.8 (jitter = 364.3)	1.999
80	images/sec: 3822.1 +/- 54.6 (jitter = 283.7)	1.839
90	images/sec: 3852.3 +/- 49.4 (jitter = 268.2)	1.792
100	images/sec: 3822.8 +/- 50.8 (jitter = 247.6)	1.930
----------------------------------------------------------------
total images/sec: 3852.93
----------------------------------------------------------------
++ for MODEL in alexnet resnet20 resnet32 resnet44 resnet56 resnet110 densenet40_k12 densenet100_k12
++ RUN='python tensorflow-benchmarks/scripts/tf_cnn_benchmarks/tf_cnn_benchmarks.py --model resnet44 --data_name cifar10 --data_dir /home/morgan/.keras/datasets/cifar-10-batches-py'
++ CUDA_VISIBLE_DEVICES=0
++ python tensorflow-benchmarks/scripts/tf_cnn_benchmarks/tf_cnn_benchmarks.py --model resnet44 --data_name cifar10 --data_dir /home/morgan/.keras/datasets/cifar-10-batches-py --num_gpus 1
2017-10-02 17:02:56.502477: W tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use SSE4.1 instructions, but these are available on your machine and could speed up CPU computations.
2017-10-02 17:02:56.502525: W tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use SSE4.2 instructions, but these are available on your machine and could speed up CPU computations.
2017-10-02 17:02:56.502531: W tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use AVX instructions, but these are available on your machine and could speed up CPU computations.
2017-10-02 17:02:56.502535: W tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use AVX2 instructions, but these are available on your machine and could speed up CPU computations.
2017-10-02 17:02:56.502539: W tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use FMA instructions, but these are available on your machine and could speed up CPU computations.
2017-10-02 17:03:03.247740: I tensorflow/core/common_runtime/gpu/gpu_device.cc:955] Found device 0 with properties: 
name: Tesla M60
major: 5 minor: 2 memoryClockRate (GHz) 1.1775
pciBusID 9fa3:00:00.0
Total memory: 7.93GiB
Free memory: 7.86GiB
2017-10-02 17:03:03.247779: I tensorflow/core/common_runtime/gpu/gpu_device.cc:976] DMA: 0 
2017-10-02 17:03:03.247785: I tensorflow/core/common_runtime/gpu/gpu_device.cc:986] 0:   Y 
2017-10-02 17:03:03.247793: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1045] Creating TensorFlow device (/gpu:0) -> (device: 0, name: Tesla M60, pci bus id: 9fa3:00:00.0)
WARNING:tensorflow:Standard services need a 'logdir' passed to the SessionManager
TensorFlow:  1.3
Model:       resnet44
Mode:        training
Batch size:  128 global
             128 per device
Devices:     ['/gpu:0']
Data format: NCHW
Optimizer:   sgd
Variables:   parameter_server
==========
Generating model
number of parameters: 661820.0
Running warm up
Done warm up
Step	Img/sec	loss
1	images/sec: 1519.0 +/- 0.0 (jitter = 0.0)	3.175
10	images/sec: 1479.5 +/- 31.4 (jitter = 120.1)	2.361
20	images/sec: 1452.6 +/- 18.3 (jitter = 54.7)	2.152
30	images/sec: 1399.7 +/- 28.7 (jitter = 54.7)	2.424
40	images/sec: 1423.3 +/- 23.0 (jitter = 60.3)	2.112
50	images/sec: 1439.0 +/- 19.0 (jitter = 69.6)	2.158
60	images/sec: 1444.2 +/- 16.1 (jitter = 65.6)	1.903
70	images/sec: 1448.3 +/- 13.9 (jitter = 51.9)	1.986
80	images/sec: 1437.8 +/- 15.8 (jitter = 63.1)	2.162
90	images/sec: 1449.0 +/- 14.5 (jitter = 67.0)	1.808
100	images/sec: 1457.1 +/- 13.4 (jitter = 76.0)	1.688
----------------------------------------------------------------
total images/sec: 1454.70
----------------------------------------------------------------
++ CUDA_VISIBLE_DEVICES=0
++ python tensorflow-benchmarks/scripts/tf_cnn_benchmarks/tf_cnn_benchmarks.py --model resnet44 --data_name cifar10 --data_dir /home/morgan/.keras/datasets/cifar-10-batches-py --num_gpus 1 --data_format NHWC
2017-10-02 17:03:31.450875: W tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use SSE4.1 instructions, but these are available on your machine and could speed up CPU computations.
2017-10-02 17:03:31.450927: W tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use SSE4.2 instructions, but these are available on your machine and could speed up CPU computations.
2017-10-02 17:03:31.450933: W tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use AVX instructions, but these are available on your machine and could speed up CPU computations.
2017-10-02 17:03:31.450937: W tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use AVX2 instructions, but these are available on your machine and could speed up CPU computations.
2017-10-02 17:03:31.450941: W tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use FMA instructions, but these are available on your machine and could speed up CPU computations.
2017-10-02 17:03:38.192172: I tensorflow/core/common_runtime/gpu/gpu_device.cc:955] Found device 0 with properties: 
name: Tesla M60
major: 5 minor: 2 memoryClockRate (GHz) 1.1775
pciBusID 9fa3:00:00.0
Total memory: 7.93GiB
Free memory: 7.86GiB
2017-10-02 17:03:38.192292: I tensorflow/core/common_runtime/gpu/gpu_device.cc:976] DMA: 0 
2017-10-02 17:03:38.192330: I tensorflow/core/common_runtime/gpu/gpu_device.cc:986] 0:   Y 
2017-10-02 17:03:38.192378: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1045] Creating TensorFlow device (/gpu:0) -> (device: 0, name: Tesla M60, pci bus id: 9fa3:00:00.0)
WARNING:tensorflow:Standard services need a 'logdir' passed to the SessionManager
TensorFlow:  1.3
Model:       resnet44
Mode:        training
Batch size:  128 global
             128 per device
Devices:     ['/gpu:0']
Data format: NHWC
Optimizer:   sgd
Variables:   parameter_server
==========
Generating model
number of parameters: 661820.0
Running warm up
Done warm up
Step	Img/sec	loss
1	images/sec: 1020.5 +/- 0.0 (jitter = 0.0)	2.891
10	images/sec: 1033.9 +/- 13.2 (jitter = 38.7)	2.335
20	images/sec: 990.7 +/- 24.2 (jitter = 17.7)	2.201
30	images/sec: 1006.9 +/- 16.8 (jitter = 16.8)	2.338
40	images/sec: 1014.6 +/- 12.9 (jitter = 19.3)	2.145
50	images/sec: 1028.8 +/- 10.9 (jitter = 40.5)	2.062
60	images/sec: 1024.4 +/- 12.0 (jitter = 51.2)	1.899
70	images/sec: 1034.5 +/- 10.6 (jitter = 38.3)	2.091
80	images/sec: 1035.6 +/- 9.3 (jitter = 49.8)	2.084
90	images/sec: 1037.9 +/- 8.4 (jitter = 47.0)	1.873
100	images/sec: 1030.6 +/- 9.0 (jitter = 50.4)	1.673
----------------------------------------------------------------
total images/sec: 1028.72
----------------------------------------------------------------
++ CUDA_VISIBLE_DEVICES=0,1
++ python tensorflow-benchmarks/scripts/tf_cnn_benchmarks/tf_cnn_benchmarks.py --model resnet44 --data_name cifar10 --data_dir /home/morgan/.keras/datasets/cifar-10-batches-py --num_gpus 2
2017-10-02 17:04:16.427332: W tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use SSE4.1 instructions, but these are available on your machine and could speed up CPU computations.
2017-10-02 17:04:16.427386: W tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use SSE4.2 instructions, but these are available on your machine and could speed up CPU computations.
2017-10-02 17:04:16.427393: W tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use AVX instructions, but these are available on your machine and could speed up CPU computations.
2017-10-02 17:04:16.427397: W tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use AVX2 instructions, but these are available on your machine and could speed up CPU computations.
2017-10-02 17:04:16.427400: W tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use FMA instructions, but these are available on your machine and could speed up CPU computations.
2017-10-02 17:04:23.127000: I tensorflow/core/common_runtime/gpu/gpu_device.cc:955] Found device 0 with properties: 
name: Tesla M60
major: 5 minor: 2 memoryClockRate (GHz) 1.1775
pciBusID 9fa3:00:00.0
Total memory: 7.93GiB
Free memory: 7.86GiB
2017-10-02 17:04:23.276836: W tensorflow/stream_executor/cuda/cuda_driver.cc:523] A non-primary context 0xa77e040 exists before initializing the StreamExecutor. We haven't verified StreamExecutor works with that.
2017-10-02 17:04:23.277820: I tensorflow/core/common_runtime/gpu/gpu_device.cc:955] Found device 1 with properties: 
name: Tesla M60
major: 5 minor: 2 memoryClockRate (GHz) 1.1775
pciBusID c533:00:00.0
Total memory: 7.93GiB
Free memory: 7.86GiB
2017-10-02 17:04:23.277882: I tensorflow/core/common_runtime/gpu/gpu_device.cc:847] Peer access not supported between device ordinals 0 and 1
2017-10-02 17:04:23.277903: I tensorflow/core/common_runtime/gpu/gpu_device.cc:847] Peer access not supported between device ordinals 1 and 0
2017-10-02 17:04:23.277926: I tensorflow/core/common_runtime/gpu/gpu_device.cc:976] DMA: 0 1 
2017-10-02 17:04:23.277933: I tensorflow/core/common_runtime/gpu/gpu_device.cc:986] 0:   Y N 
2017-10-02 17:04:23.277937: I tensorflow/core/common_runtime/gpu/gpu_device.cc:986] 1:   N Y 
2017-10-02 17:04:23.277945: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1045] Creating TensorFlow device (/gpu:0) -> (device: 0, name: Tesla M60, pci bus id: 9fa3:00:00.0)
2017-10-02 17:04:23.277956: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1045] Creating TensorFlow device (/gpu:1) -> (device: 1, name: Tesla M60, pci bus id: c533:00:00.0)
WARNING:tensorflow:Standard services need a 'logdir' passed to the SessionManager
TensorFlow:  1.3
Model:       resnet44
Mode:        training
Batch size:  256 global
             128 per device
Devices:     ['/gpu:0', '/gpu:1']
Data format: NCHW
Optimizer:   sgd
Variables:   parameter_server
==========
Generating model
number of parameters: 661820.0
number of parameters: 661820.0
Running warm up
Done warm up
Step	Img/sec	loss
1	images/sec: 2353.7 +/- 0.0 (jitter = 0.0)	2.528
10	images/sec: 2615.0 +/- 48.1 (jitter = 206.4)	2.116
20	images/sec: 2655.2 +/- 30.8 (jitter = 142.3)	2.154
30	images/sec: 2666.0 +/- 22.8 (jitter = 116.4)	2.065
40	images/sec: 2608.7 +/- 35.3 (jitter = 128.3)	1.869
50	images/sec: 2600.8 +/- 29.9 (jitter = 145.5)	1.912
60	images/sec: 2595.6 +/- 28.3 (jitter = 142.4)	1.769
70	images/sec: 2614.9 +/- 25.2 (jitter = 146.1)	2.016
80	images/sec: 2616.0 +/- 22.9 (jitter = 147.6)	1.752
90	images/sec: 2599.4 +/- 25.1 (jitter = 152.6)	1.748
100	images/sec: 2603.0 +/- 22.8 (jitter = 151.3)	1.836
----------------------------------------------------------------
total images/sec: 2615.83
----------------------------------------------------------------
++ CUDA_VISIBLE_DEVICES=0,1
++ python tensorflow-benchmarks/scripts/tf_cnn_benchmarks/tf_cnn_benchmarks.py --model resnet44 --data_name cifar10 --data_dir /home/morgan/.keras/datasets/cifar-10-batches-py --num_gpus 2 --local_parameter_device cpu
2017-10-02 17:05:03.726819: W tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use SSE4.1 instructions, but these are available on your machine and could speed up CPU computations.
2017-10-02 17:05:03.726870: W tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use SSE4.2 instructions, but these are available on your machine and could speed up CPU computations.
2017-10-02 17:05:03.726876: W tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use AVX instructions, but these are available on your machine and could speed up CPU computations.
2017-10-02 17:05:03.726880: W tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use AVX2 instructions, but these are available on your machine and could speed up CPU computations.
2017-10-02 17:05:03.726884: W tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use FMA instructions, but these are available on your machine and could speed up CPU computations.
2017-10-02 17:05:10.457455: I tensorflow/core/common_runtime/gpu/gpu_device.cc:955] Found device 0 with properties: 
name: Tesla M60
major: 5 minor: 2 memoryClockRate (GHz) 1.1775
pciBusID 9fa3:00:00.0
Total memory: 7.93GiB
Free memory: 7.86GiB
2017-10-02 17:05:10.594696: W tensorflow/stream_executor/cuda/cuda_driver.cc:523] A non-primary context 0xead7e10 exists before initializing the StreamExecutor. We haven't verified StreamExecutor works with that.
2017-10-02 17:05:10.595316: I tensorflow/core/common_runtime/gpu/gpu_device.cc:955] Found device 1 with properties: 
name: Tesla M60
major: 5 minor: 2 memoryClockRate (GHz) 1.1775
pciBusID c533:00:00.0
Total memory: 7.93GiB
Free memory: 7.86GiB
2017-10-02 17:05:10.595376: I tensorflow/core/common_runtime/gpu/gpu_device.cc:847] Peer access not supported between device ordinals 0 and 1
2017-10-02 17:05:10.595395: I tensorflow/core/common_runtime/gpu/gpu_device.cc:847] Peer access not supported between device ordinals 1 and 0
2017-10-02 17:05:10.595411: I tensorflow/core/common_runtime/gpu/gpu_device.cc:976] DMA: 0 1 
2017-10-02 17:05:10.595422: I tensorflow/core/common_runtime/gpu/gpu_device.cc:986] 0:   Y N 
2017-10-02 17:05:10.595426: I tensorflow/core/common_runtime/gpu/gpu_device.cc:986] 1:   N Y 
2017-10-02 17:05:10.595434: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1045] Creating TensorFlow device (/gpu:0) -> (device: 0, name: Tesla M60, pci bus id: 9fa3:00:00.0)
2017-10-02 17:05:10.595444: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1045] Creating TensorFlow device (/gpu:1) -> (device: 1, name: Tesla M60, pci bus id: c533:00:00.0)
WARNING:tensorflow:Standard services need a 'logdir' passed to the SessionManager
TensorFlow:  1.3
Model:       resnet44
Mode:        training
Batch size:  256 global
             128 per device
Devices:     ['/gpu:0', '/gpu:1']
Data format: NCHW
Optimizer:   sgd
Variables:   parameter_server
==========
Generating model
number of parameters: 661820.0
number of parameters: 661820.0
Running warm up
Done warm up
Step	Img/sec	loss
1	images/sec: 2337.8 +/- 0.0 (jitter = 0.0)	2.637
10	images/sec: 2601.5 +/- 146.5 (jitter = 440.8)	2.179
20	images/sec: 2820.1 +/- 88.1 (jitter = 65.0)	2.047
30	images/sec: 2806.6 +/- 77.6 (jitter = 70.1)	2.023
40	images/sec: 2852.8 +/- 59.7 (jitter = 97.8)	1.837
50	images/sec: 2908.1 +/- 49.5 (jitter = 75.9)	1.914
60	images/sec: 2947.5 +/- 42.3 (jitter = 62.2)	1.814
70	images/sec: 2968.2 +/- 36.6 (jitter = 62.0)	2.088
80	images/sec: 2987.0 +/- 32.4 (jitter = 50.2)	1.806
90	images/sec: 2970.4 +/- 33.5 (jitter = 48.3)	1.735
100	images/sec: 2982.2 +/- 30.3 (jitter = 55.1)	1.799
----------------------------------------------------------------
total images/sec: 3004.75
----------------------------------------------------------------
++ for USE_NCCL in true false
++ CUDA_VISIBLE_DEVICES=0,1
++ python tensorflow-benchmarks/scripts/tf_cnn_benchmarks/tf_cnn_benchmarks.py --model resnet44 --data_name cifar10 --data_dir /home/morgan/.keras/datasets/cifar-10-batches-py --num_gpus 2 --variable_update replicated --use_nccl true
2017-10-02 17:05:50.176373: W tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use SSE4.1 instructions, but these are available on your machine and could speed up CPU computations.
2017-10-02 17:05:50.176419: W tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use SSE4.2 instructions, but these are available on your machine and could speed up CPU computations.
2017-10-02 17:05:50.176425: W tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use AVX instructions, but these are available on your machine and could speed up CPU computations.
2017-10-02 17:05:50.176429: W tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use AVX2 instructions, but these are available on your machine and could speed up CPU computations.
2017-10-02 17:05:50.176433: W tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use FMA instructions, but these are available on your machine and could speed up CPU computations.
2017-10-02 17:05:56.609691: I tensorflow/core/common_runtime/gpu/gpu_device.cc:955] Found device 0 with properties: 
name: Tesla M60
major: 5 minor: 2 memoryClockRate (GHz) 1.1775
pciBusID 9fa3:00:00.0
Total memory: 7.93GiB
Free memory: 7.86GiB
2017-10-02 17:05:56.748922: W tensorflow/stream_executor/cuda/cuda_driver.cc:523] A non-primary context 0xfb97160 exists before initializing the StreamExecutor. We haven't verified StreamExecutor works with that.
2017-10-02 17:05:56.749515: I tensorflow/core/common_runtime/gpu/gpu_device.cc:955] Found device 1 with properties: 
name: Tesla M60
major: 5 minor: 2 memoryClockRate (GHz) 1.1775
pciBusID c533:00:00.0
Total memory: 7.93GiB
Free memory: 7.86GiB
2017-10-02 17:05:56.749566: I tensorflow/core/common_runtime/gpu/gpu_device.cc:847] Peer access not supported between device ordinals 0 and 1
2017-10-02 17:05:56.749584: I tensorflow/core/common_runtime/gpu/gpu_device.cc:847] Peer access not supported between device ordinals 1 and 0
2017-10-02 17:05:56.749599: I tensorflow/core/common_runtime/gpu/gpu_device.cc:976] DMA: 0 1 
2017-10-02 17:05:56.749605: I tensorflow/core/common_runtime/gpu/gpu_device.cc:986] 0:   Y N 
2017-10-02 17:05:56.749608: I tensorflow/core/common_runtime/gpu/gpu_device.cc:986] 1:   N Y 
2017-10-02 17:05:56.749616: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1045] Creating TensorFlow device (/gpu:0) -> (device: 0, name: Tesla M60, pci bus id: 9fa3:00:00.0)
2017-10-02 17:05:56.749621: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1045] Creating TensorFlow device (/gpu:1) -> (device: 1, name: Tesla M60, pci bus id: c533:00:00.0)
WARNING:tensorflow:Standard services need a 'logdir' passed to the SessionManager
TensorFlow:  1.3
Model:       resnet44
Mode:        training
Batch size:  256 global
             128 per device
Devices:     ['/gpu:0', '/gpu:1']
Data format: NCHW
Optimizer:   sgd
Variables:   replicated
Use NCCL:    True
==========
Generating model
number of parameters: 661820.0
number of parameters: 1323639.0
Running warm up
Done warm up
Step	Img/sec	loss
1	images/sec: 2401.3 +/- 0.0 (jitter = 0.0)	2.480
10	images/sec: 2660.9 +/- 48.1 (jitter = 199.0)	2.309
20	images/sec: 2654.9 +/- 32.6 (jitter = 199.7)	2.153
30	images/sec: 2687.7 +/- 26.9 (jitter = 200.7)	2.134
40	images/sec: 2713.1 +/- 22.4 (jitter = 139.9)	1.982
50	images/sec: 2664.9 +/- 33.0 (jitter = 148.4)	1.881
60	images/sec: 2654.8 +/- 28.6 (jitter = 167.0)	1.811
70	images/sec: 2663.7 +/- 25.2 (jitter = 164.7)	2.045
80	images/sec: 2675.3 +/- 22.7 (jitter = 167.4)	2.094
90	images/sec: 2685.2 +/- 20.9 (jitter = 161.4)	1.751
100	images/sec: 2701.1 +/- 19.3 (jitter = 163.5)	1.741
----------------------------------------------------------------
total images/sec: 2706.70
----------------------------------------------------------------
++ for USE_NCCL in true false
++ CUDA_VISIBLE_DEVICES=0,1
++ python tensorflow-benchmarks/scripts/tf_cnn_benchmarks/tf_cnn_benchmarks.py --model resnet44 --data_name cifar10 --data_dir /home/morgan/.keras/datasets/cifar-10-batches-py --num_gpus 2 --variable_update replicated --use_nccl false
2017-10-02 17:06:39.061276: W tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use SSE4.1 instructions, but these are available on your machine and could speed up CPU computations.
2017-10-02 17:06:39.061328: W tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use SSE4.2 instructions, but these are available on your machine and could speed up CPU computations.
2017-10-02 17:06:39.061334: W tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use AVX instructions, but these are available on your machine and could speed up CPU computations.
2017-10-02 17:06:39.061338: W tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use AVX2 instructions, but these are available on your machine and could speed up CPU computations.
2017-10-02 17:06:39.061342: W tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use FMA instructions, but these are available on your machine and could speed up CPU computations.
2017-10-02 17:06:45.404407: I tensorflow/core/common_runtime/gpu/gpu_device.cc:955] Found device 0 with properties: 
name: Tesla M60
major: 5 minor: 2 memoryClockRate (GHz) 1.1775
pciBusID 9fa3:00:00.0
Total memory: 7.93GiB
Free memory: 7.86GiB
2017-10-02 17:06:45.557031: W tensorflow/stream_executor/cuda/cuda_driver.cc:523] A non-primary context 0xeb1f310 exists before initializing the StreamExecutor. We haven't verified StreamExecutor works with that.
2017-10-02 17:06:45.557688: I tensorflow/core/common_runtime/gpu/gpu_device.cc:955] Found device 1 with properties: 
name: Tesla M60
major: 5 minor: 2 memoryClockRate (GHz) 1.1775
pciBusID c533:00:00.0
Total memory: 7.93GiB
Free memory: 7.86GiB
2017-10-02 17:06:45.557780: I tensorflow/core/common_runtime/gpu/gpu_device.cc:847] Peer access not supported between device ordinals 0 and 1
2017-10-02 17:06:45.557831: I tensorflow/core/common_runtime/gpu/gpu_device.cc:847] Peer access not supported between device ordinals 1 and 0
2017-10-02 17:06:45.557883: I tensorflow/core/common_runtime/gpu/gpu_device.cc:976] DMA: 0 1 
2017-10-02 17:06:45.557920: I tensorflow/core/common_runtime/gpu/gpu_device.cc:986] 0:   Y N 
2017-10-02 17:06:45.557950: I tensorflow/core/common_runtime/gpu/gpu_device.cc:986] 1:   N Y 
2017-10-02 17:06:45.557984: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1045] Creating TensorFlow device (/gpu:0) -> (device: 0, name: Tesla M60, pci bus id: 9fa3:00:00.0)
2017-10-02 17:06:45.558017: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1045] Creating TensorFlow device (/gpu:1) -> (device: 1, name: Tesla M60, pci bus id: c533:00:00.0)
WARNING:tensorflow:Standard services need a 'logdir' passed to the SessionManager
TensorFlow:  1.3
Model:       resnet44
Mode:        training
Batch size:  256 global
             128 per device
Devices:     ['/gpu:0', '/gpu:1']
Data format: NCHW
Optimizer:   sgd
Variables:   replicated
Use NCCL:    False
==========
Generating model
number of parameters: 661820.0
number of parameters: 1323639.0
Running warm up
Done warm up
Step	Img/sec	loss
1	images/sec: 2629.0 +/- 0.0 (jitter = 0.0)	2.448
10	images/sec: 2678.6 +/- 97.8 (jitter = 237.0)	2.252
20	images/sec: 2638.8 +/- 86.5 (jitter = 157.1)	2.193
30	images/sec: 2692.6 +/- 62.6 (jitter = 268.5)	2.105
40	images/sec: 2721.0 +/- 53.1 (jitter = 225.9)	1.937
50	images/sec: 2756.2 +/- 44.2 (jitter = 184.2)	1.948
60	images/sec: 2750.3 +/- 39.7 (jitter = 215.6)	1.787
70	images/sec: 2731.2 +/- 40.1 (jitter = 201.2)	2.264
80	images/sec: 2750.1 +/- 35.8 (jitter = 184.2)	1.872
90	images/sec: 2770.7 +/- 32.7 (jitter = 183.5)	1.793
100	images/sec: 2784.5 +/- 30.0 (jitter = 185.2)	1.798
----------------------------------------------------------------
total images/sec: 2784.99
----------------------------------------------------------------
++ CUDA_VISIBLE_DEVICES=0,1
++ python tensorflow-benchmarks/scripts/tf_cnn_benchmarks/tf_cnn_benchmarks.py --model resnet44 --data_name cifar10 --data_dir /home/morgan/.keras/datasets/cifar-10-batches-py --num_gpus 2 --variable_update independent
2017-10-02 17:07:26.893200: W tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use SSE4.1 instructions, but these are available on your machine and could speed up CPU computations.
2017-10-02 17:07:26.893250: W tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use SSE4.2 instructions, but these are available on your machine and could speed up CPU computations.
2017-10-02 17:07:26.893257: W tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use AVX instructions, but these are available on your machine and could speed up CPU computations.
2017-10-02 17:07:26.893261: W tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use AVX2 instructions, but these are available on your machine and could speed up CPU computations.
2017-10-02 17:07:26.893265: W tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use FMA instructions, but these are available on your machine and could speed up CPU computations.
2017-10-02 17:07:33.872583: I tensorflow/core/common_runtime/gpu/gpu_device.cc:955] Found device 0 with properties: 
name: Tesla M60
major: 5 minor: 2 memoryClockRate (GHz) 1.1775
pciBusID 9fa3:00:00.0
Total memory: 7.93GiB
Free memory: 7.86GiB
2017-10-02 17:07:34.013319: W tensorflow/stream_executor/cuda/cuda_driver.cc:523] A non-primary context 0x112d40d0 exists before initializing the StreamExecutor. We haven't verified StreamExecutor works with that.
2017-10-02 17:07:34.014087: I tensorflow/core/common_runtime/gpu/gpu_device.cc:955] Found device 1 with properties: 
name: Tesla M60
major: 5 minor: 2 memoryClockRate (GHz) 1.1775
pciBusID c533:00:00.0
Total memory: 7.93GiB
Free memory: 7.86GiB
2017-10-02 17:07:34.014195: I tensorflow/core/common_runtime/gpu/gpu_device.cc:847] Peer access not supported between device ordinals 0 and 1
2017-10-02 17:07:34.014280: I tensorflow/core/common_runtime/gpu/gpu_device.cc:847] Peer access not supported between device ordinals 1 and 0
2017-10-02 17:07:34.014358: I tensorflow/core/common_runtime/gpu/gpu_device.cc:976] DMA: 0 1 
2017-10-02 17:07:34.014416: I tensorflow/core/common_runtime/gpu/gpu_device.cc:986] 0:   Y N 
2017-10-02 17:07:34.014453: I tensorflow/core/common_runtime/gpu/gpu_device.cc:986] 1:   N Y 
2017-10-02 17:07:34.014487: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1045] Creating TensorFlow device (/gpu:0) -> (device: 0, name: Tesla M60, pci bus id: 9fa3:00:00.0)
2017-10-02 17:07:34.014525: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1045] Creating TensorFlow device (/gpu:1) -> (device: 1, name: Tesla M60, pci bus id: c533:00:00.0)
WARNING:tensorflow:Standard services need a 'logdir' passed to the SessionManager
TensorFlow:  1.3
Model:       resnet44
Mode:        training
Batch size:  256 global
             128 per device
Devices:     ['/gpu:0', '/gpu:1']
Data format: NCHW
Optimizer:   sgd
Variables:   independent
==========
Generating model
number of parameters: 661820.0
number of parameters: 1323639.0
Running warm up
Done warm up
Step	Img/sec	loss
1	images/sec: 3051.6 +/- 0.0 (jitter = 0.0)	2.885
10	images/sec: 2768.4 +/- 57.6 (jitter = 189.1)	2.361
20	images/sec: 2849.2 +/- 45.6 (jitter = 259.4)	2.273
30	images/sec: 2880.8 +/- 37.6 (jitter = 303.0)	2.127
40	images/sec: 2827.7 +/- 49.8 (jitter = 236.5)	2.045
50	images/sec: 2826.9 +/- 42.9 (jitter = 295.0)	1.945
60	images/sec: 2852.8 +/- 37.4 (jitter = 257.7)	1.858
70	images/sec: 2868.3 +/- 33.0 (jitter = 254.9)	1.976
80	images/sec: 2873.7 +/- 29.5 (jitter = 265.7)	1.814
90	images/sec: 2889.7 +/- 27.3 (jitter = 241.1)	1.835
100	images/sec: 2867.1 +/- 29.0 (jitter = 251.4)	1.955
----------------------------------------------------------------
total images/sec: 2891.25
----------------------------------------------------------------
++ for MODEL in alexnet resnet20 resnet32 resnet44 resnet56 resnet110 densenet40_k12 densenet100_k12
++ RUN='python tensorflow-benchmarks/scripts/tf_cnn_benchmarks/tf_cnn_benchmarks.py --model resnet56 --data_name cifar10 --data_dir /home/morgan/.keras/datasets/cifar-10-batches-py'
++ CUDA_VISIBLE_DEVICES=0
++ python tensorflow-benchmarks/scripts/tf_cnn_benchmarks/tf_cnn_benchmarks.py --model resnet56 --data_name cifar10 --data_dir /home/morgan/.keras/datasets/cifar-10-batches-py --num_gpus 1
2017-10-02 17:08:08.339496: W tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use SSE4.1 instructions, but these are available on your machine and could speed up CPU computations.
2017-10-02 17:08:08.339555: W tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use SSE4.2 instructions, but these are available on your machine and could speed up CPU computations.
2017-10-02 17:08:08.339561: W tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use AVX instructions, but these are available on your machine and could speed up CPU computations.
2017-10-02 17:08:08.339565: W tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use AVX2 instructions, but these are available on your machine and could speed up CPU computations.
2017-10-02 17:08:08.339570: W tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use FMA instructions, but these are available on your machine and could speed up CPU computations.
2017-10-02 17:08:15.148621: I tensorflow/core/common_runtime/gpu/gpu_device.cc:955] Found device 0 with properties: 
name: Tesla M60
major: 5 minor: 2 memoryClockRate (GHz) 1.1775
pciBusID 9fa3:00:00.0
Total memory: 7.93GiB
Free memory: 7.86GiB
2017-10-02 17:08:15.148659: I tensorflow/core/common_runtime/gpu/gpu_device.cc:976] DMA: 0 
2017-10-02 17:08:15.148668: I tensorflow/core/common_runtime/gpu/gpu_device.cc:986] 0:   Y 
2017-10-02 17:08:15.148676: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1045] Creating TensorFlow device (/gpu:0) -> (device: 0, name: Tesla M60, pci bus id: 9fa3:00:00.0)
WARNING:tensorflow:Standard services need a 'logdir' passed to the SessionManager
TensorFlow:  1.3
Model:       resnet56
Mode:        training
Batch size:  128 global
             128 per device
Devices:     ['/gpu:0']
Data format: NCHW
Optimizer:   sgd
Variables:   parameter_server
==========
Generating model
number of parameters: 857148.0
Running warm up
Done warm up
Step	Img/sec	loss
1	images/sec: 1248.5 +/- 0.0 (jitter = 0.0)	3.031
10	images/sec: 1257.1 +/- 5.0 (jitter = 5.5)	2.344
20	images/sec: 1248.4 +/- 12.0 (jitter = 28.6)	2.313
30	images/sec: 1239.4 +/- 10.3 (jitter = 39.9)	2.310
40	images/sec: 1238.4 +/- 8.4 (jitter = 38.1)	2.167
50	images/sec: 1205.4 +/- 13.9 (jitter = 52.5)	2.091
60	images/sec: 1206.2 +/- 11.6 (jitter = 56.8)	1.977
70	images/sec: 1206.2 +/- 10.1 (jitter = 59.1)	2.036
80	images/sec: 1209.8 +/- 8.9 (jitter = 59.0)	2.186
90	images/sec: 1209.0 +/- 8.1 (jitter = 52.8)	1.794
100	images/sec: 1196.9 +/- 9.3 (jitter = 55.9)	1.668
----------------------------------------------------------------
total images/sec: 1196.54
----------------------------------------------------------------
++ CUDA_VISIBLE_DEVICES=0
++ python tensorflow-benchmarks/scripts/tf_cnn_benchmarks/tf_cnn_benchmarks.py --model resnet56 --data_name cifar10 --data_dir /home/morgan/.keras/datasets/cifar-10-batches-py --num_gpus 1 --data_format NHWC
2017-10-02 17:08:46.700723: W tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use SSE4.1 instructions, but these are available on your machine and could speed up CPU computations.
2017-10-02 17:08:46.700778: W tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use SSE4.2 instructions, but these are available on your machine and could speed up CPU computations.
2017-10-02 17:08:46.700785: W tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use AVX instructions, but these are available on your machine and could speed up CPU computations.
2017-10-02 17:08:46.700789: W tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use AVX2 instructions, but these are available on your machine and could speed up CPU computations.
2017-10-02 17:08:46.700793: W tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use FMA instructions, but these are available on your machine and could speed up CPU computations.
2017-10-02 17:08:53.558423: I tensorflow/core/common_runtime/gpu/gpu_device.cc:955] Found device 0 with properties: 
name: Tesla M60
major: 5 minor: 2 memoryClockRate (GHz) 1.1775
pciBusID 9fa3:00:00.0
Total memory: 7.93GiB
Free memory: 7.86GiB
2017-10-02 17:08:53.558462: I tensorflow/core/common_runtime/gpu/gpu_device.cc:976] DMA: 0 
2017-10-02 17:08:53.558469: I tensorflow/core/common_runtime/gpu/gpu_device.cc:986] 0:   Y 
2017-10-02 17:08:53.558477: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1045] Creating TensorFlow device (/gpu:0) -> (device: 0, name: Tesla M60, pci bus id: 9fa3:00:00.0)
WARNING:tensorflow:Standard services need a 'logdir' passed to the SessionManager
TensorFlow:  1.3
Model:       resnet56
Mode:        training
Batch size:  128 global
             128 per device
Devices:     ['/gpu:0']
Data format: NHWC
Optimizer:   sgd
Variables:   parameter_server
==========
Generating model
number of parameters: 857148.0
Running warm up
Done warm up
Step	Img/sec	loss
1	images/sec: 816.3 +/- 0.0 (jitter = 0.0)	2.510
10	images/sec: 762.5 +/- 27.8 (jitter = 12.8)	2.316
20	images/sec: 796.3 +/- 16.0 (jitter = 19.9)	2.282
30	images/sec: 811.9 +/- 11.5 (jitter = 31.9)	2.304
40	images/sec: 818.8 +/- 9.0 (jitter = 38.3)	2.126
50	images/sec: 813.1 +/- 9.3 (jitter = 33.4)	2.041
60	images/sec: 815.9 +/- 7.9 (jitter = 33.4)	1.915
70	images/sec: 820.0 +/- 6.9 (jitter = 36.9)	2.066
80	images/sec: 813.3 +/- 7.2 (jitter = 34.9)	2.101
90	images/sec: 815.0 +/- 6.4 (jitter = 31.1)	1.832
100	images/sec: 816.0 +/- 5.8 (jitter = 30.5)	1.767
----------------------------------------------------------------
total images/sec: 815.10
----------------------------------------------------------------
++ CUDA_VISIBLE_DEVICES=0,1
++ python tensorflow-benchmarks/scripts/tf_cnn_benchmarks/tf_cnn_benchmarks.py --model resnet56 --data_name cifar10 --data_dir /home/morgan/.keras/datasets/cifar-10-batches-py --num_gpus 2
2017-10-02 17:09:36.981238: W tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use SSE4.1 instructions, but these are available on your machine and could speed up CPU computations.
2017-10-02 17:09:36.981292: W tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use SSE4.2 instructions, but these are available on your machine and could speed up CPU computations.
2017-10-02 17:09:36.981299: W tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use AVX instructions, but these are available on your machine and could speed up CPU computations.
2017-10-02 17:09:36.981303: W tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use AVX2 instructions, but these are available on your machine and could speed up CPU computations.
2017-10-02 17:09:36.981307: W tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use FMA instructions, but these are available on your machine and could speed up CPU computations.
2017-10-02 17:09:43.462379: I tensorflow/core/common_runtime/gpu/gpu_device.cc:955] Found device 0 with properties: 
name: Tesla M60
major: 5 minor: 2 memoryClockRate (GHz) 1.1775
pciBusID 9fa3:00:00.0
Total memory: 7.93GiB
Free memory: 7.86GiB
2017-10-02 17:09:43.602550: W tensorflow/stream_executor/cuda/cuda_driver.cc:523] A non-primary context 0x11a86730 exists before initializing the StreamExecutor. We haven't verified StreamExecutor works with that.
2017-10-02 17:09:43.603163: I tensorflow/core/common_runtime/gpu/gpu_device.cc:955] Found device 1 with properties: 
name: Tesla M60
major: 5 minor: 2 memoryClockRate (GHz) 1.1775
pciBusID c533:00:00.0
Total memory: 7.93GiB
Free memory: 7.86GiB
2017-10-02 17:09:43.603226: I tensorflow/core/common_runtime/gpu/gpu_device.cc:847] Peer access not supported between device ordinals 0 and 1
2017-10-02 17:09:43.603246: I tensorflow/core/common_runtime/gpu/gpu_device.cc:847] Peer access not supported between device ordinals 1 and 0
2017-10-02 17:09:43.603263: I tensorflow/core/common_runtime/gpu/gpu_device.cc:976] DMA: 0 1 
2017-10-02 17:09:43.603269: I tensorflow/core/common_runtime/gpu/gpu_device.cc:986] 0:   Y N 
2017-10-02 17:09:43.603273: I tensorflow/core/common_runtime/gpu/gpu_device.cc:986] 1:   N Y 
2017-10-02 17:09:43.603281: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1045] Creating TensorFlow device (/gpu:0) -> (device: 0, name: Tesla M60, pci bus id: 9fa3:00:00.0)
2017-10-02 17:09:43.603293: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1045] Creating TensorFlow device (/gpu:1) -> (device: 1, name: Tesla M60, pci bus id: c533:00:00.0)
WARNING:tensorflow:Standard services need a 'logdir' passed to the SessionManager
TensorFlow:  1.3
Model:       resnet56
Mode:        training
Batch size:  256 global
             128 per device
Devices:     ['/gpu:0', '/gpu:1']
Data format: NCHW
Optimizer:   sgd
Variables:   parameter_server
==========
Generating model
number of parameters: 857148.0
number of parameters: 857148.0
Running warm up
Done warm up
Step	Img/sec	loss
1	images/sec: 1812.3 +/- 0.0 (jitter = 0.0)	2.428
10	images/sec: 2129.5 +/- 37.0 (jitter = 41.0)	2.286
20	images/sec: 2124.0 +/- 23.9 (jitter = 53.5)	2.201
30	images/sec: 2126.8 +/- 17.7 (jitter = 70.5)	2.178
40	images/sec: 2058.6 +/- 29.4 (jitter = 111.2)	1.943
50	images/sec: 2084.2 +/- 24.8 (jitter = 104.1)	1.988
60	images/sec: 2093.2 +/- 21.1 (jitter = 104.0)	1.815
70	images/sec: 2100.3 +/- 18.7 (jitter = 99.1)	2.090
80	images/sec: 2085.9 +/- 19.9 (jitter = 99.4)	1.839
90	images/sec: 2093.6 +/- 18.0 (jitter = 102.4)	1.869
100	images/sec: 2099.2 +/- 16.5 (jitter = 102.4)	1.809
----------------------------------------------------------------
total images/sec: 2096.19
----------------------------------------------------------------
++ CUDA_VISIBLE_DEVICES=0,1
++ python tensorflow-benchmarks/scripts/tf_cnn_benchmarks/tf_cnn_benchmarks.py --model resnet56 --data_name cifar10 --data_dir /home/morgan/.keras/datasets/cifar-10-batches-py --num_gpus 2 --local_parameter_device cpu
2017-10-02 17:10:27.211587: W tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use SSE4.1 instructions, but these are available on your machine and could speed up CPU computations.
2017-10-02 17:10:27.211624: W tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use SSE4.2 instructions, but these are available on your machine and could speed up CPU computations.
2017-10-02 17:10:27.211630: W tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use AVX instructions, but these are available on your machine and could speed up CPU computations.
2017-10-02 17:10:27.211635: W tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use AVX2 instructions, but these are available on your machine and could speed up CPU computations.
2017-10-02 17:10:27.211639: W tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use FMA instructions, but these are available on your machine and could speed up CPU computations.
2017-10-02 17:10:33.539667: I tensorflow/core/common_runtime/gpu/gpu_device.cc:955] Found device 0 with properties: 
name: Tesla M60
major: 5 minor: 2 memoryClockRate (GHz) 1.1775
pciBusID 9fa3:00:00.0
Total memory: 7.93GiB
Free memory: 7.86GiB
2017-10-02 17:10:33.688615: W tensorflow/stream_executor/cuda/cuda_driver.cc:523] A non-primary context 0xfc6ace0 exists before initializing the StreamExecutor. We haven't verified StreamExecutor works with that.
2017-10-02 17:10:33.689387: I tensorflow/core/common_runtime/gpu/gpu_device.cc:955] Found device 1 with properties: 
name: Tesla M60
major: 5 minor: 2 memoryClockRate (GHz) 1.1775
pciBusID c533:00:00.0
Total memory: 7.93GiB
Free memory: 7.86GiB
2017-10-02 17:10:33.689560: I tensorflow/core/common_runtime/gpu/gpu_device.cc:847] Peer access not supported between device ordinals 0 and 1
2017-10-02 17:10:33.689648: I tensorflow/core/common_runtime/gpu/gpu_device.cc:847] Peer access not supported between device ordinals 1 and 0
2017-10-02 17:10:33.689739: I tensorflow/core/common_runtime/gpu/gpu_device.cc:976] DMA: 0 1 
2017-10-02 17:10:33.689805: I tensorflow/core/common_runtime/gpu/gpu_device.cc:986] 0:   Y N 
2017-10-02 17:10:33.689864: I tensorflow/core/common_runtime/gpu/gpu_device.cc:986] 1:   N Y 
2017-10-02 17:10:33.689928: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1045] Creating TensorFlow device (/gpu:0) -> (device: 0, name: Tesla M60, pci bus id: 9fa3:00:00.0)
2017-10-02 17:10:33.690001: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1045] Creating TensorFlow device (/gpu:1) -> (device: 1, name: Tesla M60, pci bus id: c533:00:00.0)
WARNING:tensorflow:Standard services need a 'logdir' passed to the SessionManager
TensorFlow:  1.3
Model:       resnet56
Mode:        training
Batch size:  256 global
             128 per device
Devices:     ['/gpu:0', '/gpu:1']
Data format: NCHW
Optimizer:   sgd
Variables:   parameter_server
==========
Generating model
number of parameters: 857148.0
number of parameters: 857148.0
Running warm up
Done warm up
Step	Img/sec	loss
1	images/sec: 2266.5 +/- 0.0 (jitter = 0.0)	2.472
10	images/sec: 2288.4 +/- 78.4 (jitter = 109.6)	2.214
20	images/sec: 2375.9 +/- 43.3 (jitter = 45.1)	2.225
30	images/sec: 2379.5 +/- 33.4 (jitter = 34.3)	2.131
40	images/sec: 2382.2 +/- 26.0 (jitter = 41.3)	1.956
50	images/sec: 2349.8 +/- 31.1 (jitter = 53.5)	1.957
60	images/sec: 2360.6 +/- 26.3 (jitter = 60.2)	1.874
70	images/sec: 2375.6 +/- 22.9 (jitter = 47.9)	2.085
80	images/sec: 2386.5 +/- 20.3 (jitter = 42.9)	2.011
90	images/sec: 2364.5 +/- 22.0 (jitter = 46.5)	1.926
100	images/sec: 2371.9 +/- 20.0 (jitter = 47.9)	1.953
----------------------------------------------------------------
total images/sec: 2388.91
----------------------------------------------------------------
++ for USE_NCCL in true false
++ CUDA_VISIBLE_DEVICES=0,1
++ python tensorflow-benchmarks/scripts/tf_cnn_benchmarks/tf_cnn_benchmarks.py --model resnet56 --data_name cifar10 --data_dir /home/morgan/.keras/datasets/cifar-10-batches-py --num_gpus 2 --variable_update replicated --use_nccl true
2017-10-02 17:11:16.816206: W tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use SSE4.1 instructions, but these are available on your machine and could speed up CPU computations.
2017-10-02 17:11:16.816260: W tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use SSE4.2 instructions, but these are available on your machine and could speed up CPU computations.
2017-10-02 17:11:16.816266: W tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use AVX instructions, but these are available on your machine and could speed up CPU computations.
2017-10-02 17:11:16.816271: W tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use AVX2 instructions, but these are available on your machine and could speed up CPU computations.
2017-10-02 17:11:16.816275: W tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use FMA instructions, but these are available on your machine and could speed up CPU computations.
2017-10-02 17:11:23.439097: I tensorflow/core/common_runtime/gpu/gpu_device.cc:955] Found device 0 with properties: 
name: Tesla M60
major: 5 minor: 2 memoryClockRate (GHz) 1.1775
pciBusID 9fa3:00:00.0
Total memory: 7.93GiB
Free memory: 7.86GiB
2017-10-02 17:11:23.595549: W tensorflow/stream_executor/cuda/cuda_driver.cc:523] A non-primary context 0xfff7300 exists before initializing the StreamExecutor. We haven't verified StreamExecutor works with that.
2017-10-02 17:11:23.596267: I tensorflow/core/common_runtime/gpu/gpu_device.cc:955] Found device 1 with properties: 
name: Tesla M60
major: 5 minor: 2 memoryClockRate (GHz) 1.1775
pciBusID c533:00:00.0
Total memory: 7.93GiB
Free memory: 7.86GiB
2017-10-02 17:11:23.596399: I tensorflow/core/common_runtime/gpu/gpu_device.cc:847] Peer access not supported between device ordinals 0 and 1
2017-10-02 17:11:23.596427: I tensorflow/core/common_runtime/gpu/gpu_device.cc:847] Peer access not supported between device ordinals 1 and 0
2017-10-02 17:11:23.596558: I tensorflow/core/common_runtime/gpu/gpu_device.cc:976] DMA: 0 1 
2017-10-02 17:11:23.596575: I tensorflow/core/common_runtime/gpu/gpu_device.cc:986] 0:   Y N 
2017-10-02 17:11:23.596580: I tensorflow/core/common_runtime/gpu/gpu_device.cc:986] 1:   N Y 
2017-10-02 17:11:23.596660: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1045] Creating TensorFlow device (/gpu:0) -> (device: 0, name: Tesla M60, pci bus id: 9fa3:00:00.0)
2017-10-02 17:11:23.596677: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1045] Creating TensorFlow device (/gpu:1) -> (device: 1, name: Tesla M60, pci bus id: c533:00:00.0)
WARNING:tensorflow:Standard services need a 'logdir' passed to the SessionManager
TensorFlow:  1.3
Model:       resnet56
Mode:        training
Batch size:  256 global
             128 per device
Devices:     ['/gpu:0', '/gpu:1']
Data format: NCHW
Optimizer:   sgd
Variables:   replicated
Use NCCL:    True
==========
Generating model
number of parameters: 857148.0
number of parameters: 1714295.0
Running warm up
Done warm up
Step	Img/sec	loss
1	images/sec: 2296.2 +/- 0.0 (jitter = 0.0)	2.782
10	images/sec: 2169.9 +/- 39.7 (jitter = 103.4)	2.436
20	images/sec: 2176.2 +/- 24.2 (jitter = 76.5)	2.500
30	images/sec: 2114.3 +/- 38.5 (jitter = 109.9)	2.389
40	images/sec: 2127.0 +/- 30.2 (jitter = 109.9)	2.169
50	images/sec: 2135.9 +/- 25.5 (jitter = 126.7)	2.142
60	images/sec: 2149.7 +/- 21.8 (jitter = 113.8)	2.095
70	images/sec: 2163.8 +/- 19.4 (jitter = 94.0)	2.293
80	images/sec: 2146.7 +/- 20.9 (jitter = 107.6)	2.025
90	images/sec: 2154.4 +/- 19.0 (jitter = 111.0)	2.023
100	images/sec: 2159.6 +/- 17.4 (jitter = 111.0)	2.013
----------------------------------------------------------------
total images/sec: 2142.48
----------------------------------------------------------------
++ for USE_NCCL in true false
++ CUDA_VISIBLE_DEVICES=0,1
++ python tensorflow-benchmarks/scripts/tf_cnn_benchmarks/tf_cnn_benchmarks.py --model resnet56 --data_name cifar10 --data_dir /home/morgan/.keras/datasets/cifar-10-batches-py --num_gpus 2 --variable_update replicated --use_nccl false
2017-10-02 17:12:09.246307: W tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use SSE4.1 instructions, but these are available on your machine and could speed up CPU computations.
2017-10-02 17:12:09.246362: W tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use SSE4.2 instructions, but these are available on your machine and could speed up CPU computations.
2017-10-02 17:12:09.246368: W tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use AVX instructions, but these are available on your machine and could speed up CPU computations.
2017-10-02 17:12:09.246372: W tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use AVX2 instructions, but these are available on your machine and could speed up CPU computations.
2017-10-02 17:12:09.246376: W tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use FMA instructions, but these are available on your machine and could speed up CPU computations.
2017-10-02 17:12:15.976796: I tensorflow/core/common_runtime/gpu/gpu_device.cc:955] Found device 0 with properties: 
name: Tesla M60
major: 5 minor: 2 memoryClockRate (GHz) 1.1775
pciBusID 9fa3:00:00.0
Total memory: 7.93GiB
Free memory: 7.86GiB
2017-10-02 17:12:16.112880: W tensorflow/stream_executor/cuda/cuda_driver.cc:523] A non-primary context 0x114767b0 exists before initializing the StreamExecutor. We haven't verified StreamExecutor works with that.
2017-10-02 17:12:16.113616: I tensorflow/core/common_runtime/gpu/gpu_device.cc:955] Found device 1 with properties: 
name: Tesla M60
major: 5 minor: 2 memoryClockRate (GHz) 1.1775
pciBusID c533:00:00.0
Total memory: 7.93GiB
Free memory: 7.86GiB
2017-10-02 17:12:16.113743: I tensorflow/core/common_runtime/gpu/gpu_device.cc:847] Peer access not supported between device ordinals 0 and 1
2017-10-02 17:12:16.113770: I tensorflow/core/common_runtime/gpu/gpu_device.cc:847] Peer access not supported between device ordinals 1 and 0
2017-10-02 17:12:16.113884: I tensorflow/core/common_runtime/gpu/gpu_device.cc:976] DMA: 0 1 
2017-10-02 17:12:16.113901: I tensorflow/core/common_runtime/gpu/gpu_device.cc:986] 0:   Y N 
2017-10-02 17:12:16.113905: I tensorflow/core/common_runtime/gpu/gpu_device.cc:986] 1:   N Y 
2017-10-02 17:12:16.113971: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1045] Creating TensorFlow device (/gpu:0) -> (device: 0, name: Tesla M60, pci bus id: 9fa3:00:00.0)
2017-10-02 17:12:16.113988: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1045] Creating TensorFlow device (/gpu:1) -> (device: 1, name: Tesla M60, pci bus id: c533:00:00.0)
WARNING:tensorflow:Standard services need a 'logdir' passed to the SessionManager
TensorFlow:  1.3
Model:       resnet56
Mode:        training
Batch size:  256 global
             128 per device
Devices:     ['/gpu:0', '/gpu:1']
Data format: NCHW
Optimizer:   sgd
Variables:   replicated
Use NCCL:    False
==========
Generating model
number of parameters: 857148.0
number of parameters: 1714295.0
Running warm up
Done warm up
Step	Img/sec	loss
1	images/sec: 2106.0 +/- 0.0 (jitter = 0.0)	2.786
10	images/sec: 2167.9 +/- 62.4 (jitter = 276.8)	2.468
20	images/sec: 2112.1 +/- 61.3 (jitter = 186.4)	2.513
30	images/sec: 2153.3 +/- 43.9 (jitter = 175.8)	2.439
40	images/sec: 2163.1 +/- 34.6 (jitter = 150.0)	2.258
50	images/sec: 2185.7 +/- 28.7 (jitter = 128.9)	2.180
60	images/sec: 2173.1 +/- 29.4 (jitter = 140.7)	2.059
70	images/sec: 2197.7 +/- 26.3 (jitter = 156.5)	2.290
80	images/sec: 2205.5 +/- 23.6 (jitter = 157.3)	2.198
90	images/sec: 2214.2 +/- 21.4 (jitter = 152.9)	1.981
100	images/sec: 2205.8 +/- 22.0 (jitter = 158.2)	2.025
----------------------------------------------------------------
total images/sec: 2215.45
----------------------------------------------------------------
++ CUDA_VISIBLE_DEVICES=0,1
++ python tensorflow-benchmarks/scripts/tf_cnn_benchmarks/tf_cnn_benchmarks.py --model resnet56 --data_name cifar10 --data_dir /home/morgan/.keras/datasets/cifar-10-batches-py --num_gpus 2 --variable_update independent
2017-10-02 17:13:00.906519: W tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use SSE4.1 instructions, but these are available on your machine and could speed up CPU computations.
2017-10-02 17:13:00.906577: W tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use SSE4.2 instructions, but these are available on your machine and could speed up CPU computations.
2017-10-02 17:13:00.906583: W tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use AVX instructions, but these are available on your machine and could speed up CPU computations.
2017-10-02 17:13:00.906588: W tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use AVX2 instructions, but these are available on your machine and could speed up CPU computations.
2017-10-02 17:13:00.906592: W tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use FMA instructions, but these are available on your machine and could speed up CPU computations.
2017-10-02 17:13:07.227570: I tensorflow/core/common_runtime/gpu/gpu_device.cc:955] Found device 0 with properties: 
name: Tesla M60
major: 5 minor: 2 memoryClockRate (GHz) 1.1775
pciBusID 9fa3:00:00.0
Total memory: 7.93GiB
Free memory: 7.86GiB
2017-10-02 17:13:07.364219: W tensorflow/stream_executor/cuda/cuda_driver.cc:523] A non-primary context 0x17452fc0 exists before initializing the StreamExecutor. We haven't verified StreamExecutor works with that.
2017-10-02 17:13:07.364808: I tensorflow/core/common_runtime/gpu/gpu_device.cc:955] Found device 1 with properties: 
name: Tesla M60
major: 5 minor: 2 memoryClockRate (GHz) 1.1775
pciBusID c533:00:00.0
Total memory: 7.93GiB
Free memory: 7.86GiB
2017-10-02 17:13:07.364869: I tensorflow/core/common_runtime/gpu/gpu_device.cc:847] Peer access not supported between device ordinals 0 and 1
2017-10-02 17:13:07.364888: I tensorflow/core/common_runtime/gpu/gpu_device.cc:847] Peer access not supported between device ordinals 1 and 0
2017-10-02 17:13:07.364903: I tensorflow/core/common_runtime/gpu/gpu_device.cc:976] DMA: 0 1 
2017-10-02 17:13:07.364915: I tensorflow/core/common_runtime/gpu/gpu_device.cc:986] 0:   Y N 
2017-10-02 17:13:07.364919: I tensorflow/core/common_runtime/gpu/gpu_device.cc:986] 1:   N Y 
2017-10-02 17:13:07.364927: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1045] Creating TensorFlow device (/gpu:0) -> (device: 0, name: Tesla M60, pci bus id: 9fa3:00:00.0)
2017-10-02 17:13:07.364932: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1045] Creating TensorFlow device (/gpu:1) -> (device: 1, name: Tesla M60, pci bus id: c533:00:00.0)
WARNING:tensorflow:Standard services need a 'logdir' passed to the SessionManager
TensorFlow:  1.3
Model:       resnet56
Mode:        training
Batch size:  256 global
             128 per device
Devices:     ['/gpu:0', '/gpu:1']
Data format: NCHW
Optimizer:   sgd
Variables:   independent
==========
Generating model
number of parameters: 857148.0
number of parameters: 1714295.0
Running warm up
Done warm up
Step	Img/sec	loss
1	images/sec: 2160.5 +/- 0.0 (jitter = 0.0)	2.837
10	images/sec: 2019.0 +/- 107.6 (jitter = 235.2)	2.351
20	images/sec: 2120.7 +/- 58.9 (jitter = 97.2)	2.329
30	images/sec: 2123.0 +/- 42.6 (jitter = 118.2)	2.159
40	images/sec: 2146.1 +/- 33.9 (jitter = 130.3)	2.054
50	images/sec: 2136.0 +/- 34.8 (jitter = 147.7)	2.080
60	images/sec: 2162.1 +/- 30.0 (jitter = 159.2)	1.950
70	images/sec: 2167.1 +/- 25.8 (jitter = 131.6)	2.004
80	images/sec: 2175.5 +/- 23.0 (jitter = 121.6)	1.918
90	images/sec: 2184.3 +/- 21.2 (jitter = 124.0)	1.872
100	images/sec: 2182.8 +/- 22.3 (jitter = 148.5)	1.965
----------------------------------------------------------------
total images/sec: 2189.03
----------------------------------------------------------------
++ for MODEL in alexnet resnet20 resnet32 resnet44 resnet56 resnet110 densenet40_k12 densenet100_k12
++ RUN='python tensorflow-benchmarks/scripts/tf_cnn_benchmarks/tf_cnn_benchmarks.py --model resnet110 --data_name cifar10 --data_dir /home/morgan/.keras/datasets/cifar-10-batches-py'
++ CUDA_VISIBLE_DEVICES=0
++ python tensorflow-benchmarks/scripts/tf_cnn_benchmarks/tf_cnn_benchmarks.py --model resnet110 --data_name cifar10 --data_dir /home/morgan/.keras/datasets/cifar-10-batches-py --num_gpus 1
2017-10-02 17:13:47.133567: W tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use SSE4.1 instructions, but these are available on your machine and could speed up CPU computations.
2017-10-02 17:13:47.133627: W tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use SSE4.2 instructions, but these are available on your machine and could speed up CPU computations.
2017-10-02 17:13:47.133634: W tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use AVX instructions, but these are available on your machine and could speed up CPU computations.
2017-10-02 17:13:47.133638: W tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use AVX2 instructions, but these are available on your machine and could speed up CPU computations.
2017-10-02 17:13:47.133642: W tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use FMA instructions, but these are available on your machine and could speed up CPU computations.
2017-10-02 17:13:54.216483: I tensorflow/core/common_runtime/gpu/gpu_device.cc:955] Found device 0 with properties: 
name: Tesla M60
major: 5 minor: 2 memoryClockRate (GHz) 1.1775
pciBusID 9fa3:00:00.0
Total memory: 7.93GiB
Free memory: 7.86GiB
2017-10-02 17:13:54.216521: I tensorflow/core/common_runtime/gpu/gpu_device.cc:976] DMA: 0 
2017-10-02 17:13:54.216529: I tensorflow/core/common_runtime/gpu/gpu_device.cc:986] 0:   Y 
2017-10-02 17:13:54.216537: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1045] Creating TensorFlow device (/gpu:0) -> (device: 0, name: Tesla M60, pci bus id: 9fa3:00:00.0)
WARNING:tensorflow:Standard services need a 'logdir' passed to the SessionManager
TensorFlow:  1.3
Model:       resnet110
Mode:        training
Batch size:  128 global
             128 per device
Devices:     ['/gpu:0']
Data format: NCHW
Optimizer:   sgd
Variables:   parameter_server
==========
Generating model
number of parameters: 1736124.0
Running warm up
Done warm up
Step	Img/sec	loss
1	images/sec: 433.2 +/- 0.0 (jitter = 0.0)	4.788
10	images/sec: 614.1 +/- 20.3 (jitter = 14.4)	2.782
20	images/sec: 634.2 +/- 10.8 (jitter = 4.8)	2.448
30	images/sec: 630.1 +/- 9.9 (jitter = 5.4)	2.435
40	images/sec: 635.7 +/- 7.6 (jitter = 5.7)	2.326
50	images/sec: 639.3 +/- 6.1 (jitter = 5.4)	2.221
60	images/sec: 636.4 +/- 6.2 (jitter = 5.0)	2.135
70	images/sec: 638.9 +/- 5.3 (jitter = 4.7)	2.230
80	images/sec: 635.9 +/- 5.4 (jitter = 5.1)	2.178
90	images/sec: 638.7 +/- 4.8 (jitter = 5.5)	2.108
100	images/sec: 640.0 +/- 4.4 (jitter = 5.3)	1.937
----------------------------------------------------------------
total images/sec: 647.37
----------------------------------------------------------------
++ CUDA_VISIBLE_DEVICES=0
++ python tensorflow-benchmarks/scripts/tf_cnn_benchmarks/tf_cnn_benchmarks.py --model resnet110 --data_name cifar10 --data_dir /home/morgan/.keras/datasets/cifar-10-batches-py --num_gpus 1 --data_format NHWC
2017-10-02 17:14:40.206647: W tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use SSE4.1 instructions, but these are available on your machine and could speed up CPU computations.
2017-10-02 17:14:40.206701: W tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use SSE4.2 instructions, but these are available on your machine and could speed up CPU computations.
2017-10-02 17:14:40.206707: W tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use AVX instructions, but these are available on your machine and could speed up CPU computations.
2017-10-02 17:14:40.206711: W tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use AVX2 instructions, but these are available on your machine and could speed up CPU computations.
2017-10-02 17:14:40.206715: W tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use FMA instructions, but these are available on your machine and could speed up CPU computations.
2017-10-02 17:14:47.338465: I tensorflow/core/common_runtime/gpu/gpu_device.cc:955] Found device 0 with properties: 
name: Tesla M60
major: 5 minor: 2 memoryClockRate (GHz) 1.1775
pciBusID 9fa3:00:00.0
Total memory: 7.93GiB
Free memory: 7.86GiB
2017-10-02 17:14:47.338504: I tensorflow/core/common_runtime/gpu/gpu_device.cc:976] DMA: 0 
2017-10-02 17:14:47.338511: I tensorflow/core/common_runtime/gpu/gpu_device.cc:986] 0:   Y 
2017-10-02 17:14:47.338520: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1045] Creating TensorFlow device (/gpu:0) -> (device: 0, name: Tesla M60, pci bus id: 9fa3:00:00.0)
WARNING:tensorflow:Standard services need a 'logdir' passed to the SessionManager
TensorFlow:  1.3
Model:       resnet110
Mode:        training
Batch size:  128 global
             128 per device
Devices:     ['/gpu:0']
Data format: NHWC
Optimizer:   sgd
Variables:   parameter_server
==========
Generating model
number of parameters: 1736124.0
Running warm up
Done warm up
Step	Img/sec	loss
1	images/sec: 444.0 +/- 0.0 (jitter = 0.0)	2.936
10	images/sec: 425.4 +/- 10.6 (jitter = 9.5)	2.809
20	images/sec: 421.5 +/- 7.5 (jitter = 7.1)	2.363
30	images/sec: 428.0 +/- 5.2 (jitter = 10.3)	2.668
40	images/sec: 426.7 +/- 4.8 (jitter = 10.3)	2.327
50	images/sec: 430.1 +/- 3.9 (jitter = 9.9)	2.260
60	images/sec: 430.1 +/- 3.7 (jitter = 7.9)	2.238
70	images/sec: 430.0 +/- 3.5 (jitter = 5.9)	2.260
80	images/sec: 430.7 +/- 3.1 (jitter = 6.4)	2.209
90	images/sec: 429.7 +/- 3.0 (jitter = 7.2)	2.080
100	images/sec: 430.2 +/- 2.7 (jitter = 8.1)	2.034
----------------------------------------------------------------
total images/sec: 427.63
----------------------------------------------------------------
++ CUDA_VISIBLE_DEVICES=0,1
++ python tensorflow-benchmarks/scripts/tf_cnn_benchmarks/tf_cnn_benchmarks.py --model resnet110 --data_name cifar10 --data_dir /home/morgan/.keras/datasets/cifar-10-batches-py --num_gpus 2
2017-10-02 17:15:52.285423: W tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use SSE4.1 instructions, but these are available on your machine and could speed up CPU computations.
2017-10-02 17:15:52.285486: W tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use SSE4.2 instructions, but these are available on your machine and could speed up CPU computations.
2017-10-02 17:15:52.285492: W tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use AVX instructions, but these are available on your machine and could speed up CPU computations.
2017-10-02 17:15:52.285496: W tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use AVX2 instructions, but these are available on your machine and could speed up CPU computations.
2017-10-02 17:15:52.285500: W tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use FMA instructions, but these are available on your machine and could speed up CPU computations.
2017-10-02 17:15:58.843104: I tensorflow/core/common_runtime/gpu/gpu_device.cc:955] Found device 0 with properties: 
name: Tesla M60
major: 5 minor: 2 memoryClockRate (GHz) 1.1775
pciBusID 9fa3:00:00.0
Total memory: 7.93GiB
Free memory: 7.86GiB
2017-10-02 17:15:58.980974: W tensorflow/stream_executor/cuda/cuda_driver.cc:523] A non-primary context 0x1940ef80 exists before initializing the StreamExecutor. We haven't verified StreamExecutor works with that.
2017-10-02 17:15:58.981574: I tensorflow/core/common_runtime/gpu/gpu_device.cc:955] Found device 1 with properties: 
name: Tesla M60
major: 5 minor: 2 memoryClockRate (GHz) 1.1775
pciBusID c533:00:00.0
Total memory: 7.93GiB
Free memory: 7.86GiB
2017-10-02 17:15:58.981635: I tensorflow/core/common_runtime/gpu/gpu_device.cc:847] Peer access not supported between device ordinals 0 and 1
2017-10-02 17:15:58.981654: I tensorflow/core/common_runtime/gpu/gpu_device.cc:847] Peer access not supported between device ordinals 1 and 0
2017-10-02 17:15:58.981670: I tensorflow/core/common_runtime/gpu/gpu_device.cc:976] DMA: 0 1 
2017-10-02 17:15:58.981676: I tensorflow/core/common_runtime/gpu/gpu_device.cc:986] 0:   Y N 
2017-10-02 17:15:58.981680: I tensorflow/core/common_runtime/gpu/gpu_device.cc:986] 1:   N Y 
2017-10-02 17:15:58.981688: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1045] Creating TensorFlow device (/gpu:0) -> (device: 0, name: Tesla M60, pci bus id: 9fa3:00:00.0)
2017-10-02 17:15:58.981693: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1045] Creating TensorFlow device (/gpu:1) -> (device: 1, name: Tesla M60, pci bus id: c533:00:00.0)
WARNING:tensorflow:Standard services need a 'logdir' passed to the SessionManager
TensorFlow:  1.3
Model:       resnet110
Mode:        training
Batch size:  256 global
             128 per device
Devices:     ['/gpu:0', '/gpu:1']
Data format: NCHW
Optimizer:   sgd
Variables:   parameter_server
==========
Generating model
number of parameters: 1736124.0
number of parameters: 1736124.0
Running warm up
Done warm up
Step	Img/sec	loss
1	images/sec: 1106.1 +/- 0.0 (jitter = 0.0)	2.840
10	images/sec: 1065.6 +/- 34.6 (jitter = 28.1)	2.840
20	images/sec: 1091.5 +/- 18.1 (jitter = 25.3)	2.387
30	images/sec: 1081.9 +/- 15.6 (jitter = 24.7)	2.301
40	images/sec: 1084.4 +/- 11.8 (jitter = 24.7)	2.148
50	images/sec: 1077.8 +/- 11.4 (jitter = 33.2)	2.171
60	images/sec: 1081.4 +/- 9.8 (jitter = 33.3)	2.003
70	images/sec: 1078.1 +/- 9.5 (jitter = 35.7)	2.334
80	images/sec: 1079.5 +/- 8.4 (jitter = 35.7)	2.114
90	images/sec: 1078.5 +/- 8.4 (jitter = 34.8)	2.097
100	images/sec: 1079.6 +/- 7.6 (jitter = 34.5)	2.093
----------------------------------------------------------------
total images/sec: 1077.98
----------------------------------------------------------------
++ CUDA_VISIBLE_DEVICES=0,1
++ python tensorflow-benchmarks/scripts/tf_cnn_benchmarks/tf_cnn_benchmarks.py --model resnet110 --data_name cifar10 --data_dir /home/morgan/.keras/datasets/cifar-10-batches-py --num_gpus 2 --local_parameter_device cpu
2017-10-02 17:17:02.827977: W tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use SSE4.1 instructions, but these are available on your machine and could speed up CPU computations.
2017-10-02 17:17:02.828032: W tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use SSE4.2 instructions, but these are available on your machine and could speed up CPU computations.
2017-10-02 17:17:02.828039: W tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use AVX instructions, but these are available on your machine and could speed up CPU computations.
2017-10-02 17:17:02.828043: W tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use AVX2 instructions, but these are available on your machine and could speed up CPU computations.
2017-10-02 17:17:02.828047: W tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use FMA instructions, but these are available on your machine and could speed up CPU computations.
2017-10-02 17:17:09.805709: I tensorflow/core/common_runtime/gpu/gpu_device.cc:955] Found device 0 with properties: 
name: Tesla M60
major: 5 minor: 2 memoryClockRate (GHz) 1.1775
pciBusID 9fa3:00:00.0
Total memory: 7.93GiB
Free memory: 7.86GiB
2017-10-02 17:17:09.948062: W tensorflow/stream_executor/cuda/cuda_driver.cc:523] A non-primary context 0x14ccbff0 exists before initializing the StreamExecutor. We haven't verified StreamExecutor works with that.
2017-10-02 17:17:09.948669: I tensorflow/core/common_runtime/gpu/gpu_device.cc:955] Found device 1 with properties: 
name: Tesla M60
major: 5 minor: 2 memoryClockRate (GHz) 1.1775
pciBusID c533:00:00.0
Total memory: 7.93GiB
Free memory: 7.86GiB
2017-10-02 17:17:09.948729: I tensorflow/core/common_runtime/gpu/gpu_device.cc:847] Peer access not supported between device ordinals 0 and 1
2017-10-02 17:17:09.948749: I tensorflow/core/common_runtime/gpu/gpu_device.cc:847] Peer access not supported between device ordinals 1 and 0
2017-10-02 17:17:09.948764: I tensorflow/core/common_runtime/gpu/gpu_device.cc:976] DMA: 0 1 
2017-10-02 17:17:09.948770: I tensorflow/core/common_runtime/gpu/gpu_device.cc:986] 0:   Y N 
2017-10-02 17:17:09.948774: I tensorflow/core/common_runtime/gpu/gpu_device.cc:986] 1:   N Y 
2017-10-02 17:17:09.948782: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1045] Creating TensorFlow device (/gpu:0) -> (device: 0, name: Tesla M60, pci bus id: 9fa3:00:00.0)
2017-10-02 17:17:09.948787: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1045] Creating TensorFlow device (/gpu:1) -> (device: 1, name: Tesla M60, pci bus id: c533:00:00.0)
WARNING:tensorflow:Standard services need a 'logdir' passed to the SessionManager
TensorFlow:  1.3
Model:       resnet110
Mode:        training
Batch size:  256 global
             128 per device
Devices:     ['/gpu:0', '/gpu:1']
Data format: NCHW
Optimizer:   sgd
Variables:   parameter_server
==========
Generating model
number of parameters: 1736124.0
number of parameters: 1736124.0
Running warm up
Done warm up
Step	Img/sec	loss
1	images/sec: 1270.5 +/- 0.0 (jitter = 0.0)	3.223
10	images/sec: 1190.1 +/- 34.6 (jitter = 41.0)	2.727
20	images/sec: 1223.4 +/- 19.0 (jitter = 40.6)	2.355
30	images/sec: 1216.2 +/- 17.7 (jitter = 30.5)	2.192
40	images/sec: 1224.3 +/- 13.5 (jitter = 30.5)	2.060
50	images/sec: 1231.5 +/- 11.0 (jitter = 26.8)	2.127
60	images/sec: 1226.6 +/- 11.1 (jitter = 26.2)	1.971
70	images/sec: 1233.2 +/- 9.7 (jitter = 27.6)	2.215
80	images/sec: 1231.4 +/- 9.6 (jitter = 27.7)	2.000
90	images/sec: 1233.9 +/- 8.6 (jitter = 28.0)	2.032
100	images/sec: 1235.4 +/- 7.9 (jitter = 27.6)	2.033
----------------------------------------------------------------
total images/sec: 1243.41
----------------------------------------------------------------
++ for USE_NCCL in true false
++ CUDA_VISIBLE_DEVICES=0,1
++ python tensorflow-benchmarks/scripts/tf_cnn_benchmarks/tf_cnn_benchmarks.py --model resnet110 --data_name cifar10 --data_dir /home/morgan/.keras/datasets/cifar-10-batches-py --num_gpus 2 --variable_update replicated --use_nccl true
2017-10-02 17:18:13.190540: W tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use SSE4.1 instructions, but these are available on your machine and could speed up CPU computations.
2017-10-02 17:18:13.190595: W tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use SSE4.2 instructions, but these are available on your machine and could speed up CPU computations.
2017-10-02 17:18:13.190601: W tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use AVX instructions, but these are available on your machine and could speed up CPU computations.
2017-10-02 17:18:13.190605: W tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use AVX2 instructions, but these are available on your machine and could speed up CPU computations.
2017-10-02 17:18:13.190609: W tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use FMA instructions, but these are available on your machine and could speed up CPU computations.
2017-10-02 17:18:19.994553: I tensorflow/core/common_runtime/gpu/gpu_device.cc:955] Found device 0 with properties: 
name: Tesla M60
major: 5 minor: 2 memoryClockRate (GHz) 1.1775
pciBusID 9fa3:00:00.0
Total memory: 7.93GiB
Free memory: 7.86GiB
2017-10-02 17:18:20.155373: W tensorflow/stream_executor/cuda/cuda_driver.cc:523] A non-primary context 0x14db5ff0 exists before initializing the StreamExecutor. We haven't verified StreamExecutor works with that.
2017-10-02 17:18:20.155964: I tensorflow/core/common_runtime/gpu/gpu_device.cc:955] Found device 1 with properties: 
name: Tesla M60
major: 5 minor: 2 memoryClockRate (GHz) 1.1775
pciBusID c533:00:00.0
Total memory: 7.93GiB
Free memory: 7.86GiB
2017-10-02 17:18:20.156025: I tensorflow/core/common_runtime/gpu/gpu_device.cc:847] Peer access not supported between device ordinals 0 and 1
2017-10-02 17:18:20.156045: I tensorflow/core/common_runtime/gpu/gpu_device.cc:847] Peer access not supported between device ordinals 1 and 0
2017-10-02 17:18:20.156070: I tensorflow/core/common_runtime/gpu/gpu_device.cc:976] DMA: 0 1 
2017-10-02 17:18:20.156083: I tensorflow/core/common_runtime/gpu/gpu_device.cc:986] 0:   Y N 
2017-10-02 17:18:20.156088: I tensorflow/core/common_runtime/gpu/gpu_device.cc:986] 1:   N Y 
2017-10-02 17:18:20.156096: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1045] Creating TensorFlow device (/gpu:0) -> (device: 0, name: Tesla M60, pci bus id: 9fa3:00:00.0)
2017-10-02 17:18:20.156101: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1045] Creating TensorFlow device (/gpu:1) -> (device: 1, name: Tesla M60, pci bus id: c533:00:00.0)
WARNING:tensorflow:Standard services need a 'logdir' passed to the SessionManager
TensorFlow:  1.3
Model:       resnet110
Mode:        training
Batch size:  256 global
             128 per device
Devices:     ['/gpu:0', '/gpu:1']
Data format: NCHW
Optimizer:   sgd
Variables:   replicated
Use NCCL:    True
==========
Generating model
number of parameters: 1736124.0
number of parameters: 3472247.0
Running warm up
Done warm up
Step	Img/sec	loss
1	images/sec: 1128.8 +/- 0.0 (jitter = 0.0)	3.265
10	images/sec: 1139.7 +/- 21.2 (jitter = 70.0)	2.942
20	images/sec: 1138.6 +/- 11.9 (jitter = 68.5)	2.580
30	images/sec: 1117.6 +/- 13.9 (jitter = 53.2)	2.608
40	images/sec: 1125.2 +/- 10.8 (jitter = 50.8)	2.548
50	images/sec: 1119.7 +/- 10.6 (jitter = 43.0)	2.564
60	images/sec: 1126.6 +/- 9.1 (jitter = 46.5)	2.519
70	images/sec: 1125.3 +/- 9.0 (jitter = 42.6)	2.620
80	images/sec: 1129.1 +/- 8.0 (jitter = 41.8)	2.476
90	images/sec: 1124.9 +/- 8.1 (jitter = 44.5)	2.545
100	images/sec: 1128.0 +/- 7.4 (jitter = 42.4)	2.451
----------------------------------------------------------------
total images/sec: 1120.39
----------------------------------------------------------------
++ for USE_NCCL in true false
++ CUDA_VISIBLE_DEVICES=0,1
++ python tensorflow-benchmarks/scripts/tf_cnn_benchmarks/tf_cnn_benchmarks.py --model resnet110 --data_name cifar10 --data_dir /home/morgan/.keras/datasets/cifar-10-batches-py --num_gpus 2 --variable_update replicated --use_nccl false
2017-10-02 17:19:26.962676: W tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use SSE4.1 instructions, but these are available on your machine and could speed up CPU computations.
2017-10-02 17:19:26.962729: W tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use SSE4.2 instructions, but these are available on your machine and could speed up CPU computations.
2017-10-02 17:19:26.962735: W tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use AVX instructions, but these are available on your machine and could speed up CPU computations.
2017-10-02 17:19:26.962739: W tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use AVX2 instructions, but these are available on your machine and could speed up CPU computations.
2017-10-02 17:19:26.962743: W tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use FMA instructions, but these are available on your machine and could speed up CPU computations.
2017-10-02 17:19:33.719611: I tensorflow/core/common_runtime/gpu/gpu_device.cc:955] Found device 0 with properties: 
name: Tesla M60
major: 5 minor: 2 memoryClockRate (GHz) 1.1775
pciBusID 9fa3:00:00.0
Total memory: 7.93GiB
Free memory: 7.86GiB
2017-10-02 17:19:33.865519: W tensorflow/stream_executor/cuda/cuda_driver.cc:523] A non-primary context 0x1db36d80 exists before initializing the StreamExecutor. We haven't verified StreamExecutor works with that.
2017-10-02 17:19:33.866123: I tensorflow/core/common_runtime/gpu/gpu_device.cc:955] Found device 1 with properties: 
name: Tesla M60
major: 5 minor: 2 memoryClockRate (GHz) 1.1775
pciBusID c533:00:00.0
Total memory: 7.93GiB
Free memory: 7.86GiB
2017-10-02 17:19:33.866185: I tensorflow/core/common_runtime/gpu/gpu_device.cc:847] Peer access not supported between device ordinals 0 and 1
2017-10-02 17:19:33.866206: I tensorflow/core/common_runtime/gpu/gpu_device.cc:847] Peer access not supported between device ordinals 1 and 0
2017-10-02 17:19:33.866222: I tensorflow/core/common_runtime/gpu/gpu_device.cc:976] DMA: 0 1 
2017-10-02 17:19:33.866227: I tensorflow/core/common_runtime/gpu/gpu_device.cc:986] 0:   Y N 
2017-10-02 17:19:33.866232: I tensorflow/core/common_runtime/gpu/gpu_device.cc:986] 1:   N Y 
2017-10-02 17:19:33.866241: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1045] Creating TensorFlow device (/gpu:0) -> (device: 0, name: Tesla M60, pci bus id: 9fa3:00:00.0)
2017-10-02 17:19:33.866246: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1045] Creating TensorFlow device (/gpu:1) -> (device: 1, name: Tesla M60, pci bus id: c533:00:00.0)
WARNING:tensorflow:Standard services need a 'logdir' passed to the SessionManager
TensorFlow:  1.3
Model:       resnet110
Mode:        training
Batch size:  256 global
             128 per device
Devices:     ['/gpu:0', '/gpu:1']
Data format: NCHW
Optimizer:   sgd
Variables:   replicated
Use NCCL:    False
==========
Generating model
number of parameters: 1736124.0
number of parameters: 3472247.0
Running warm up
Done warm up
Step	Img/sec	loss
1	images/sec: 1233.5 +/- 0.0 (jitter = 0.0)	3.389
10	images/sec: 1131.8 +/- 37.8 (jitter = 54.6)	2.800
20	images/sec: 1155.1 +/- 23.4 (jitter = 50.3)	2.561
30	images/sec: 1176.0 +/- 16.9 (jitter = 39.8)	2.573
40	images/sec: 1172.7 +/- 15.8 (jitter = 44.0)	2.463
50	images/sec: 1183.1 +/- 13.0 (jitter = 39.1)	2.477
60	images/sec: 1179.2 +/- 12.4 (jitter = 39.3)	2.351
70	images/sec: 1180.4 +/- 10.8 (jitter = 39.3)	2.457
80	images/sec: 1177.0 +/- 10.7 (jitter = 41.1)	2.334
90	images/sec: 1178.7 +/- 9.6 (jitter = 43.0)	2.327
100	images/sec: 1180.1 +/- 8.8 (jitter = 44.0)	2.408
----------------------------------------------------------------
total images/sec: 1182.67
----------------------------------------------------------------
++ CUDA_VISIBLE_DEVICES=0,1
++ python tensorflow-benchmarks/scripts/tf_cnn_benchmarks/tf_cnn_benchmarks.py --model resnet110 --data_name cifar10 --data_dir /home/morgan/.keras/datasets/cifar-10-batches-py --num_gpus 2 --variable_update independent
2017-10-02 17:20:39.193394: W tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use SSE4.1 instructions, but these are available on your machine and could speed up CPU computations.
2017-10-02 17:20:39.193478: W tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use SSE4.2 instructions, but these are available on your machine and could speed up CPU computations.
2017-10-02 17:20:39.193505: W tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use AVX instructions, but these are available on your machine and could speed up CPU computations.
2017-10-02 17:20:39.193521: W tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use AVX2 instructions, but these are available on your machine and could speed up CPU computations.
2017-10-02 17:20:39.193534: W tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use FMA instructions, but these are available on your machine and could speed up CPU computations.
2017-10-02 17:20:45.908868: I tensorflow/core/common_runtime/gpu/gpu_device.cc:955] Found device 0 with properties: 
name: Tesla M60
major: 5 minor: 2 memoryClockRate (GHz) 1.1775
pciBusID 9fa3:00:00.0
Total memory: 7.93GiB
Free memory: 7.86GiB
2017-10-02 17:20:46.044034: W tensorflow/stream_executor/cuda/cuda_driver.cc:523] A non-primary context 0x133ce240 exists before initializing the StreamExecutor. We haven't verified StreamExecutor works with that.
2017-10-02 17:20:46.044618: I tensorflow/core/common_runtime/gpu/gpu_device.cc:955] Found device 1 with properties: 
name: Tesla M60
major: 5 minor: 2 memoryClockRate (GHz) 1.1775
pciBusID c533:00:00.0
Total memory: 7.93GiB
Free memory: 7.86GiB
2017-10-02 17:20:46.044678: I tensorflow/core/common_runtime/gpu/gpu_device.cc:847] Peer access not supported between device ordinals 0 and 1
2017-10-02 17:20:46.044699: I tensorflow/core/common_runtime/gpu/gpu_device.cc:847] Peer access not supported between device ordinals 1 and 0
2017-10-02 17:20:46.044715: I tensorflow/core/common_runtime/gpu/gpu_device.cc:976] DMA: 0 1 
2017-10-02 17:20:46.044722: I tensorflow/core/common_runtime/gpu/gpu_device.cc:986] 0:   Y N 
2017-10-02 17:20:46.044726: I tensorflow/core/common_runtime/gpu/gpu_device.cc:986] 1:   N Y 
2017-10-02 17:20:46.044734: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1045] Creating TensorFlow device (/gpu:0) -> (device: 0, name: Tesla M60, pci bus id: 9fa3:00:00.0)
2017-10-02 17:20:46.044745: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1045] Creating TensorFlow device (/gpu:1) -> (device: 1, name: Tesla M60, pci bus id: c533:00:00.0)
WARNING:tensorflow:Standard services need a 'logdir' passed to the SessionManager
TensorFlow:  1.3
Model:       resnet110
Mode:        training
Batch size:  256 global
             128 per device
Devices:     ['/gpu:0', '/gpu:1']
Data format: NCHW
Optimizer:   sgd
Variables:   independent
==========
Generating model
number of parameters: 1736124.0
number of parameters: 3472247.0
Running warm up
Done warm up
Step	Img/sec	loss
1	images/sec: 1022.3 +/- 0.0 (jitter = 0.0)	3.397
10	images/sec: 1162.7 +/- 15.6 (jitter = 14.2)	2.649
20	images/sec: 1174.0 +/- 8.5 (jitter = 14.7)	2.426
30	images/sec: 1172.1 +/- 12.5 (jitter = 17.3)	2.388
40	images/sec: 1172.8 +/- 9.5 (jitter = 13.9)	2.199
50	images/sec: 1167.7 +/- 10.7 (jitter = 15.5)	2.289
60	images/sec: 1170.0 +/- 9.0 (jitter = 13.3)	2.045
70	images/sec: 1164.2 +/- 9.0 (jitter = 14.0)	2.224
80	images/sec: 1166.5 +/- 7.9 (jitter = 14.2)	2.193
90	images/sec: 1172.7 +/- 7.4 (jitter = 14.9)	2.145
100	images/sec: 1171.7 +/- 7.4 (jitter = 17.0)	2.118
----------------------------------------------------------------
total images/sec: 1170.63
----------------------------------------------------------------
++ for MODEL in alexnet resnet20 resnet32 resnet44 resnet56 resnet110 densenet40_k12 densenet100_k12
++ RUN='python tensorflow-benchmarks/scripts/tf_cnn_benchmarks/tf_cnn_benchmarks.py --model densenet40_k12 --data_name cifar10 --data_dir /home/morgan/.keras/datasets/cifar-10-batches-py'
++ CUDA_VISIBLE_DEVICES=0
++ python tensorflow-benchmarks/scripts/tf_cnn_benchmarks/tf_cnn_benchmarks.py --model densenet40_k12 --data_name cifar10 --data_dir /home/morgan/.keras/datasets/cifar-10-batches-py --num_gpus 1
2017-10-02 17:21:32.992829: W tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use SSE4.1 instructions, but these are available on your machine and could speed up CPU computations.
2017-10-02 17:21:32.992883: W tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use SSE4.2 instructions, but these are available on your machine and could speed up CPU computations.
2017-10-02 17:21:32.992889: W tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use AVX instructions, but these are available on your machine and could speed up CPU computations.
2017-10-02 17:21:32.992893: W tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use AVX2 instructions, but these are available on your machine and could speed up CPU computations.
2017-10-02 17:21:32.992897: W tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use FMA instructions, but these are available on your machine and could speed up CPU computations.
2017-10-02 17:21:40.146994: I tensorflow/core/common_runtime/gpu/gpu_device.cc:955] Found device 0 with properties: 
name: Tesla M60
major: 5 minor: 2 memoryClockRate (GHz) 1.1775
pciBusID 9fa3:00:00.0
Total memory: 7.93GiB
Free memory: 7.86GiB
2017-10-02 17:21:40.147033: I tensorflow/core/common_runtime/gpu/gpu_device.cc:976] DMA: 0 
2017-10-02 17:21:40.147039: I tensorflow/core/common_runtime/gpu/gpu_device.cc:986] 0:   Y 
2017-10-02 17:21:40.147046: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1045] Creating TensorFlow device (/gpu:0) -> (device: 0, name: Tesla M60, pci bus id: 9fa3:00:00.0)
WARNING:tensorflow:Standard services need a 'logdir' passed to the SessionManager
TensorFlow:  1.3
Model:       densenet40_k12
Mode:        training
Batch size:  64 global
             64 per device
Devices:     ['/gpu:0']
Data format: NCHW
Optimizer:   sgd
Variables:   parameter_server
==========
Generating model
number of parameters: 364772.0
Running warm up
Done warm up
Step	Img/sec	loss
1	images/sec: 564.5 +/- 0.0 (jitter = 0.0)	2.454
10	images/sec: 546.9 +/- 3.6 (jitter = 10.8)	2.291
20	images/sec: 523.7 +/- 11.5 (jitter = 12.6)	2.204
30	images/sec: 533.0 +/- 8.0 (jitter = 11.8)	2.237
40	images/sec: 535.7 +/- 6.2 (jitter = 12.1)	2.097
50	images/sec: 536.0 +/- 5.0 (jitter = 13.3)	2.083
60	images/sec: 531.6 +/- 5.7 (jitter = 13.8)	2.088
70	images/sec: 536.7 +/- 5.1 (jitter = 17.0)	2.044
80	images/sec: 539.8 +/- 4.5 (jitter = 19.5)	2.009
90	images/sec: 542.5 +/- 4.1 (jitter = 20.8)	2.022
100	images/sec: 539.3 +/- 4.4 (jitter = 19.9)	2.092
----------------------------------------------------------------
total images/sec: 537.41
----------------------------------------------------------------
++ CUDA_VISIBLE_DEVICES=0
++ python tensorflow-benchmarks/scripts/tf_cnn_benchmarks/tf_cnn_benchmarks.py --model densenet40_k12 --data_name cifar10 --data_dir /home/morgan/.keras/datasets/cifar-10-batches-py --num_gpus 1 --data_format NHWC
2017-10-02 17:22:09.673853: W tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use SSE4.1 instructions, but these are available on your machine and could speed up CPU computations.
2017-10-02 17:22:09.673908: W tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use SSE4.2 instructions, but these are available on your machine and could speed up CPU computations.
2017-10-02 17:22:09.673915: W tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use AVX instructions, but these are available on your machine and could speed up CPU computations.
2017-10-02 17:22:09.673919: W tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use AVX2 instructions, but these are available on your machine and could speed up CPU computations.
2017-10-02 17:22:09.673923: W tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use FMA instructions, but these are available on your machine and could speed up CPU computations.
2017-10-02 17:22:16.407385: I tensorflow/core/common_runtime/gpu/gpu_device.cc:955] Found device 0 with properties: 
name: Tesla M60
major: 5 minor: 2 memoryClockRate (GHz) 1.1775
pciBusID 9fa3:00:00.0
Total memory: 7.93GiB
Free memory: 7.86GiB
2017-10-02 17:22:16.407423: I tensorflow/core/common_runtime/gpu/gpu_device.cc:976] DMA: 0 
2017-10-02 17:22:16.407429: I tensorflow/core/common_runtime/gpu/gpu_device.cc:986] 0:   Y 
2017-10-02 17:22:16.407437: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1045] Creating TensorFlow device (/gpu:0) -> (device: 0, name: Tesla M60, pci bus id: 9fa3:00:00.0)
WARNING:tensorflow:Standard services need a 'logdir' passed to the SessionManager
TensorFlow:  1.3
Model:       densenet40_k12
Mode:        training
Batch size:  64 global
             64 per device
Devices:     ['/gpu:0']
Data format: NHWC
Optimizer:   sgd
Variables:   parameter_server
==========
Generating model
number of parameters: 364772.0
Running warm up
Done warm up
Step	Img/sec	loss
1	images/sec: 380.7 +/- 0.0 (jitter = 0.0)	2.415
10	images/sec: 377.7 +/- 2.3 (jitter = 8.8)	2.356
20	images/sec: 375.2 +/- 1.7 (jitter = 10.7)	2.256
30	images/sec: 368.1 +/- 4.6 (jitter = 11.1)	2.229
40	images/sec: 370.9 +/- 3.5 (jitter = 8.8)	2.165
50	images/sec: 373.0 +/- 2.8 (jitter = 8.5)	2.130
60	images/sec: 370.1 +/- 3.3 (jitter = 8.6)	2.124
70	images/sec: 371.9 +/- 2.8 (jitter = 6.8)	2.057
80	images/sec: 372.9 +/- 2.5 (jitter = 6.1)	2.087
90	images/sec: 371.5 +/- 2.7 (jitter = 6.0)	2.098
100	images/sec: 372.0 +/- 2.4 (jitter = 6.4)	2.088
----------------------------------------------------------------
total images/sec: 371.66
----------------------------------------------------------------
++ CUDA_VISIBLE_DEVICES=0,1
++ python tensorflow-benchmarks/scripts/tf_cnn_benchmarks/tf_cnn_benchmarks.py --model densenet40_k12 --data_name cifar10 --data_dir /home/morgan/.keras/datasets/cifar-10-batches-py --num_gpus 2
2017-10-02 17:22:56.286919: W tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use SSE4.1 instructions, but these are available on your machine and could speed up CPU computations.
2017-10-02 17:22:56.286992: W tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use SSE4.2 instructions, but these are available on your machine and could speed up CPU computations.
2017-10-02 17:22:56.286998: W tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use AVX instructions, but these are available on your machine and could speed up CPU computations.
2017-10-02 17:22:56.287002: W tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use AVX2 instructions, but these are available on your machine and could speed up CPU computations.
2017-10-02 17:22:56.287006: W tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use FMA instructions, but these are available on your machine and could speed up CPU computations.
2017-10-02 17:23:02.869731: I tensorflow/core/common_runtime/gpu/gpu_device.cc:955] Found device 0 with properties: 
name: Tesla M60
major: 5 minor: 2 memoryClockRate (GHz) 1.1775
pciBusID 9fa3:00:00.0
Total memory: 7.93GiB
Free memory: 7.86GiB
2017-10-02 17:23:03.014982: W tensorflow/stream_executor/cuda/cuda_driver.cc:523] A non-primary context 0x8e5e640 exists before initializing the StreamExecutor. We haven't verified StreamExecutor works with that.
2017-10-02 17:23:03.015599: I tensorflow/core/common_runtime/gpu/gpu_device.cc:955] Found device 1 with properties: 
name: Tesla M60
major: 5 minor: 2 memoryClockRate (GHz) 1.1775
pciBusID c533:00:00.0
Total memory: 7.93GiB
Free memory: 7.86GiB
2017-10-02 17:23:03.015661: I tensorflow/core/common_runtime/gpu/gpu_device.cc:847] Peer access not supported between device ordinals 0 and 1
2017-10-02 17:23:03.015680: I tensorflow/core/common_runtime/gpu/gpu_device.cc:847] Peer access not supported between device ordinals 1 and 0
2017-10-02 17:23:03.015696: I tensorflow/core/common_runtime/gpu/gpu_device.cc:976] DMA: 0 1 
2017-10-02 17:23:03.015707: I tensorflow/core/common_runtime/gpu/gpu_device.cc:986] 0:   Y N 
2017-10-02 17:23:03.015711: I tensorflow/core/common_runtime/gpu/gpu_device.cc:986] 1:   N Y 
2017-10-02 17:23:03.015719: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1045] Creating TensorFlow device (/gpu:0) -> (device: 0, name: Tesla M60, pci bus id: 9fa3:00:00.0)
2017-10-02 17:23:03.015724: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1045] Creating TensorFlow device (/gpu:1) -> (device: 1, name: Tesla M60, pci bus id: c533:00:00.0)
WARNING:tensorflow:Standard services need a 'logdir' passed to the SessionManager
TensorFlow:  1.3
Model:       densenet40_k12
Mode:        training
Batch size:  128 global
             64 per device
Devices:     ['/gpu:0', '/gpu:1']
Data format: NCHW
Optimizer:   sgd
Variables:   parameter_server
==========
Generating model
number of parameters: 364772.0
number of parameters: 364772.0
Running warm up
Done warm up
Step	Img/sec	loss
1	images/sec: 968.7 +/- 0.0 (jitter = 0.0)	2.448
10	images/sec: 947.4 +/- 11.3 (jitter = 32.1)	2.320
20	images/sec: 919.7 +/- 20.0 (jitter = 48.2)	2.352
30	images/sec: 940.7 +/- 14.6 (jitter = 53.2)	2.270
40	images/sec: 946.1 +/- 11.2 (jitter = 49.0)	2.187
50	images/sec: 938.4 +/- 12.1 (jitter = 41.2)	2.134
60	images/sec: 942.5 +/- 10.2 (jitter = 36.0)	2.110
70	images/sec: 946.1 +/- 8.9 (jitter = 39.5)	2.077
80	images/sec: 943.8 +/- 8.6 (jitter = 41.0)	2.077
90	images/sec: 939.8 +/- 8.8 (jitter = 41.0)	1.942
100	images/sec: 944.1 +/- 8.2 (jitter = 45.2)	1.939
----------------------------------------------------------------
total images/sec: 943.03
----------------------------------------------------------------
++ CUDA_VISIBLE_DEVICES=0,1
++ python tensorflow-benchmarks/scripts/tf_cnn_benchmarks/tf_cnn_benchmarks.py --model densenet40_k12 --data_name cifar10 --data_dir /home/morgan/.keras/datasets/cifar-10-batches-py --num_gpus 2 --local_parameter_device cpu
2017-10-02 17:23:41.397698: W tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use SSE4.1 instructions, but these are available on your machine and could speed up CPU computations.
2017-10-02 17:23:41.397771: W tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use SSE4.2 instructions, but these are available on your machine and could speed up CPU computations.
2017-10-02 17:23:41.398025: W tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use AVX instructions, but these are available on your machine and could speed up CPU computations.
2017-10-02 17:23:41.398043: W tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use AVX2 instructions, but these are available on your machine and could speed up CPU computations.
2017-10-02 17:23:41.398048: W tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use FMA instructions, but these are available on your machine and could speed up CPU computations.
2017-10-02 17:23:48.324500: I tensorflow/core/common_runtime/gpu/gpu_device.cc:955] Found device 0 with properties: 
name: Tesla M60
major: 5 minor: 2 memoryClockRate (GHz) 1.1775
pciBusID 9fa3:00:00.0
Total memory: 7.93GiB
Free memory: 7.86GiB
2017-10-02 17:23:48.463409: W tensorflow/stream_executor/cuda/cuda_driver.cc:523] A non-primary context 0xa6cc8a0 exists before initializing the StreamExecutor. We haven't verified StreamExecutor works with that.
2017-10-02 17:23:48.464023: I tensorflow/core/common_runtime/gpu/gpu_device.cc:955] Found device 1 with properties: 
name: Tesla M60
major: 5 minor: 2 memoryClockRate (GHz) 1.1775
pciBusID c533:00:00.0
Total memory: 7.93GiB
Free memory: 7.86GiB
2017-10-02 17:23:48.464086: I tensorflow/core/common_runtime/gpu/gpu_device.cc:847] Peer access not supported between device ordinals 0 and 1
2017-10-02 17:23:48.464109: I tensorflow/core/common_runtime/gpu/gpu_device.cc:847] Peer access not supported between device ordinals 1 and 0
2017-10-02 17:23:48.464126: I tensorflow/core/common_runtime/gpu/gpu_device.cc:976] DMA: 0 1 
2017-10-02 17:23:48.464132: I tensorflow/core/common_runtime/gpu/gpu_device.cc:986] 0:   Y N 
2017-10-02 17:23:48.464136: I tensorflow/core/common_runtime/gpu/gpu_device.cc:986] 1:   N Y 
2017-10-02 17:23:48.464151: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1045] Creating TensorFlow device (/gpu:0) -> (device: 0, name: Tesla M60, pci bus id: 9fa3:00:00.0)
2017-10-02 17:23:48.464163: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1045] Creating TensorFlow device (/gpu:1) -> (device: 1, name: Tesla M60, pci bus id: c533:00:00.0)
WARNING:tensorflow:Standard services need a 'logdir' passed to the SessionManager
TensorFlow:  1.3
Model:       densenet40_k12
Mode:        training
Batch size:  128 global
             64 per device
Devices:     ['/gpu:0', '/gpu:1']
Data format: NCHW
Optimizer:   sgd
Variables:   parameter_server
==========
Generating model
number of parameters: 364772.0
number of parameters: 364772.0
Running warm up
Done warm up
Step	Img/sec	loss
1	images/sec: 1120.4 +/- 0.0 (jitter = 0.0)	2.454
10	images/sec: 1091.7 +/- 9.9 (jitter = 21.7)	2.322
20	images/sec: 1045.5 +/- 24.2 (jitter = 32.6)	2.366
30	images/sec: 1059.8 +/- 17.3 (jitter = 28.8)	2.279
40	images/sec: 1072.6 +/- 13.4 (jitter = 25.9)	2.191
50	images/sec: 1075.3 +/- 10.9 (jitter = 28.5)	2.117
60	images/sec: 1064.6 +/- 11.9 (jitter = 34.5)	2.086
70	images/sec: 1068.6 +/- 10.4 (jitter = 35.6)	2.050
80	images/sec: 1069.6 +/- 9.5 (jitter = 33.6)	2.098
90	images/sec: 1073.1 +/- 8.5 (jitter = 30.5)	1.995
100	images/sec: 1067.3 +/- 9.0 (jitter = 31.5)	1.956
----------------------------------------------------------------
total images/sec: 1074.18
----------------------------------------------------------------
++ for USE_NCCL in true false
++ CUDA_VISIBLE_DEVICES=0,1
++ python tensorflow-benchmarks/scripts/tf_cnn_benchmarks/tf_cnn_benchmarks.py --model densenet40_k12 --data_name cifar10 --data_dir /home/morgan/.keras/datasets/cifar-10-batches-py --num_gpus 2 --variable_update replicated --use_nccl true
2017-10-02 17:24:26.910981: W tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use SSE4.1 instructions, but these are available on your machine and could speed up CPU computations.
2017-10-02 17:24:26.911034: W tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use SSE4.2 instructions, but these are available on your machine and could speed up CPU computations.
2017-10-02 17:24:26.911040: W tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use AVX instructions, but these are available on your machine and could speed up CPU computations.
2017-10-02 17:24:26.911045: W tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use AVX2 instructions, but these are available on your machine and could speed up CPU computations.
2017-10-02 17:24:26.911049: W tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use FMA instructions, but these are available on your machine and could speed up CPU computations.
2017-10-02 17:24:33.279927: I tensorflow/core/common_runtime/gpu/gpu_device.cc:955] Found device 0 with properties: 
name: Tesla M60
major: 5 minor: 2 memoryClockRate (GHz) 1.1775
pciBusID 9fa3:00:00.0
Total memory: 7.93GiB
Free memory: 7.86GiB
2017-10-02 17:24:33.448524: W tensorflow/stream_executor/cuda/cuda_driver.cc:523] A non-primary context 0xbdb3790 exists before initializing the StreamExecutor. We haven't verified StreamExecutor works with that.
2017-10-02 17:24:33.449135: I tensorflow/core/common_runtime/gpu/gpu_device.cc:955] Found device 1 with properties: 
name: Tesla M60
major: 5 minor: 2 memoryClockRate (GHz) 1.1775
pciBusID c533:00:00.0
Total memory: 7.93GiB
Free memory: 7.86GiB
2017-10-02 17:24:33.449196: I tensorflow/core/common_runtime/gpu/gpu_device.cc:847] Peer access not supported between device ordinals 0 and 1
2017-10-02 17:24:33.449216: I tensorflow/core/common_runtime/gpu/gpu_device.cc:847] Peer access not supported between device ordinals 1 and 0
2017-10-02 17:24:33.449232: I tensorflow/core/common_runtime/gpu/gpu_device.cc:976] DMA: 0 1 
2017-10-02 17:24:33.449237: I tensorflow/core/common_runtime/gpu/gpu_device.cc:986] 0:   Y N 
2017-10-02 17:24:33.449241: I tensorflow/core/common_runtime/gpu/gpu_device.cc:986] 1:   N Y 
2017-10-02 17:24:33.449249: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1045] Creating TensorFlow device (/gpu:0) -> (device: 0, name: Tesla M60, pci bus id: 9fa3:00:00.0)
2017-10-02 17:24:33.449254: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1045] Creating TensorFlow device (/gpu:1) -> (device: 1, name: Tesla M60, pci bus id: c533:00:00.0)
WARNING:tensorflow:Standard services need a 'logdir' passed to the SessionManager
TensorFlow:  1.3
Model:       densenet40_k12
Mode:        training
Batch size:  128 global
             64 per device
Devices:     ['/gpu:0', '/gpu:1']
Data format: NCHW
Optimizer:   sgd
Variables:   replicated
Use NCCL:    True
==========
Generating model
number of parameters: 364772.0
number of parameters: 729543.0
Running warm up
Done warm up
Step	Img/sec	loss
1	images/sec: 917.9 +/- 0.0 (jitter = 0.0)	2.419
10	images/sec: 986.3 +/- 13.6 (jitter = 47.4)	2.238
20	images/sec: 972.6 +/- 10.1 (jitter = 50.3)	2.305
30	images/sec: 970.9 +/- 7.7 (jitter = 54.1)	2.142
40	images/sec: 947.2 +/- 12.3 (jitter = 53.8)	2.118
50	images/sec: 951.5 +/- 10.2 (jitter = 53.8)	2.022
60	images/sec: 955.6 +/- 8.7 (jitter = 50.8)	2.019
70	images/sec: 960.4 +/- 7.7 (jitter = 46.4)	2.079
80	images/sec: 952.8 +/- 8.3 (jitter = 48.9)	2.118
90	images/sec: 954.7 +/- 7.5 (jitter = 50.2)	1.914
100	images/sec: 956.5 +/- 6.9 (jitter = 50.1)	1.821
----------------------------------------------------------------
total images/sec: 950.50
----------------------------------------------------------------
++ for USE_NCCL in true false
++ CUDA_VISIBLE_DEVICES=0,1
++ python tensorflow-benchmarks/scripts/tf_cnn_benchmarks/tf_cnn_benchmarks.py --model densenet40_k12 --data_name cifar10 --data_dir /home/morgan/.keras/datasets/cifar-10-batches-py --num_gpus 2 --variable_update replicated --use_nccl false
2017-10-02 17:25:14.568377: W tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use SSE4.1 instructions, but these are available on your machine and could speed up CPU computations.
2017-10-02 17:25:14.568433: W tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use SSE4.2 instructions, but these are available on your machine and could speed up CPU computations.
2017-10-02 17:25:14.568439: W tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use AVX instructions, but these are available on your machine and could speed up CPU computations.
2017-10-02 17:25:14.568443: W tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use AVX2 instructions, but these are available on your machine and could speed up CPU computations.
2017-10-02 17:25:14.568447: W tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use FMA instructions, but these are available on your machine and could speed up CPU computations.
2017-10-02 17:25:21.263530: I tensorflow/core/common_runtime/gpu/gpu_device.cc:955] Found device 0 with properties: 
name: Tesla M60
major: 5 minor: 2 memoryClockRate (GHz) 1.1775
pciBusID 9fa3:00:00.0
Total memory: 7.93GiB
Free memory: 7.86GiB
2017-10-02 17:25:21.401082: W tensorflow/stream_executor/cuda/cuda_driver.cc:523] A non-primary context 0xbc71fe0 exists before initializing the StreamExecutor. We haven't verified StreamExecutor works with that.
2017-10-02 17:25:21.401662: I tensorflow/core/common_runtime/gpu/gpu_device.cc:955] Found device 1 with properties: 
name: Tesla M60
major: 5 minor: 2 memoryClockRate (GHz) 1.1775
pciBusID c533:00:00.0
Total memory: 7.93GiB
Free memory: 7.86GiB
2017-10-02 17:25:21.401722: I tensorflow/core/common_runtime/gpu/gpu_device.cc:847] Peer access not supported between device ordinals 0 and 1
2017-10-02 17:25:21.401742: I tensorflow/core/common_runtime/gpu/gpu_device.cc:847] Peer access not supported between device ordinals 1 and 0
2017-10-02 17:25:21.401759: I tensorflow/core/common_runtime/gpu/gpu_device.cc:976] DMA: 0 1 
2017-10-02 17:25:21.401764: I tensorflow/core/common_runtime/gpu/gpu_device.cc:986] 0:   Y N 
2017-10-02 17:25:21.401767: I tensorflow/core/common_runtime/gpu/gpu_device.cc:986] 1:   N Y 
2017-10-02 17:25:21.401776: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1045] Creating TensorFlow device (/gpu:0) -> (device: 0, name: Tesla M60, pci bus id: 9fa3:00:00.0)
2017-10-02 17:25:21.401781: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1045] Creating TensorFlow device (/gpu:1) -> (device: 1, name: Tesla M60, pci bus id: c533:00:00.0)
WARNING:tensorflow:Standard services need a 'logdir' passed to the SessionManager
TensorFlow:  1.3
Model:       densenet40_k12
Mode:        training
Batch size:  128 global
             64 per device
Devices:     ['/gpu:0', '/gpu:1']
Data format: NCHW
Optimizer:   sgd
Variables:   replicated
Use NCCL:    False
==========
Generating model
number of parameters: 364772.0
number of parameters: 729543.0
Running warm up
Done warm up
Step	Img/sec	loss
1	images/sec: 996.8 +/- 0.0 (jitter = 0.0)	2.430
10	images/sec: 1004.7 +/- 15.0 (jitter = 54.7)	2.244
20	images/sec: 1000.1 +/- 11.4 (jitter = 60.3)	2.279
30	images/sec: 981.7 +/- 16.3 (jitter = 65.8)	2.145
40	images/sec: 994.2 +/- 12.8 (jitter = 56.1)	2.194
50	images/sec: 1003.3 +/- 10.6 (jitter = 56.4)	2.005
60	images/sec: 1005.6 +/- 9.2 (jitter = 54.1)	2.001
70	images/sec: 995.9 +/- 9.9 (jitter = 54.0)	2.052
80	images/sec: 999.0 +/- 8.8 (jitter = 52.6)	2.097
90	images/sec: 999.1 +/- 8.0 (jitter = 52.9)	1.924
100	images/sec: 1001.0 +/- 7.3 (jitter = 51.6)	1.806
----------------------------------------------------------------
total images/sec: 1007.18
----------------------------------------------------------------
++ CUDA_VISIBLE_DEVICES=0,1
++ python tensorflow-benchmarks/scripts/tf_cnn_benchmarks/tf_cnn_benchmarks.py --model densenet40_k12 --data_name cifar10 --data_dir /home/morgan/.keras/datasets/cifar-10-batches-py --num_gpus 2 --variable_update independent
2017-10-02 17:26:01.313549: W tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use SSE4.1 instructions, but these are available on your machine and could speed up CPU computations.
2017-10-02 17:26:01.313602: W tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use SSE4.2 instructions, but these are available on your machine and could speed up CPU computations.
2017-10-02 17:26:01.313609: W tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use AVX instructions, but these are available on your machine and could speed up CPU computations.
2017-10-02 17:26:01.313613: W tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use AVX2 instructions, but these are available on your machine and could speed up CPU computations.
2017-10-02 17:26:01.313617: W tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use FMA instructions, but these are available on your machine and could speed up CPU computations.
2017-10-02 17:26:07.974706: I tensorflow/core/common_runtime/gpu/gpu_device.cc:955] Found device 0 with properties: 
name: Tesla M60
major: 5 minor: 2 memoryClockRate (GHz) 1.1775
pciBusID 9fa3:00:00.0
Total memory: 7.93GiB
Free memory: 7.86GiB
2017-10-02 17:26:08.221393: W tensorflow/stream_executor/cuda/cuda_driver.cc:523] A non-primary context 0x90b0660 exists before initializing the StreamExecutor. We haven't verified StreamExecutor works with that.
2017-10-02 17:26:08.222010: I tensorflow/core/common_runtime/gpu/gpu_device.cc:955] Found device 1 with properties: 
name: Tesla M60
major: 5 minor: 2 memoryClockRate (GHz) 1.1775
pciBusID c533:00:00.0
Total memory: 7.93GiB
Free memory: 7.86GiB
2017-10-02 17:26:08.222072: I tensorflow/core/common_runtime/gpu/gpu_device.cc:847] Peer access not supported between device ordinals 0 and 1
2017-10-02 17:26:08.222093: I tensorflow/core/common_runtime/gpu/gpu_device.cc:847] Peer access not supported between device ordinals 1 and 0
2017-10-02 17:26:08.222109: I tensorflow/core/common_runtime/gpu/gpu_device.cc:976] DMA: 0 1 
2017-10-02 17:26:08.222115: I tensorflow/core/common_runtime/gpu/gpu_device.cc:986] 0:   Y N 
2017-10-02 17:26:08.222124: I tensorflow/core/common_runtime/gpu/gpu_device.cc:986] 1:   N Y 
2017-10-02 17:26:08.222135: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1045] Creating TensorFlow device (/gpu:0) -> (device: 0, name: Tesla M60, pci bus id: 9fa3:00:00.0)
2017-10-02 17:26:08.222140: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1045] Creating TensorFlow device (/gpu:1) -> (device: 1, name: Tesla M60, pci bus id: c533:00:00.0)
WARNING:tensorflow:Standard services need a 'logdir' passed to the SessionManager
TensorFlow:  1.3
Model:       densenet40_k12
Mode:        training
Batch size:  128 global
             64 per device
Devices:     ['/gpu:0', '/gpu:1']
Data format: NCHW
Optimizer:   sgd
Variables:   independent
==========
Generating model
number of parameters: 364772.0
number of parameters: 729543.0
Running warm up
Done warm up
Step	Img/sec	loss
1	images/sec: 1019.2 +/- 0.0 (jitter = 0.0)	2.483
10	images/sec: 949.2 +/- 46.5 (jitter = 57.6)	2.348
20	images/sec: 991.2 +/- 24.3 (jitter = 29.6)	2.356
30	images/sec: 999.6 +/- 18.5 (jitter = 34.0)	2.330
40	images/sec: 1007.0 +/- 14.4 (jitter = 38.4)	2.182
50	images/sec: 997.6 +/- 14.8 (jitter = 45.8)	2.190
60	images/sec: 1004.9 +/- 12.7 (jitter = 45.8)	2.111
70	images/sec: 1012.7 +/- 11.1 (jitter = 38.8)	2.133
80	images/sec: 1015.5 +/- 9.8 (jitter = 34.0)	2.114
90	images/sec: 1014.7 +/- 10.3 (jitter = 55.5)	2.055
100	images/sec: 1020.7 +/- 9.5 (jitter = 51.1)	1.958
----------------------------------------------------------------
total images/sec: 1019.77
----------------------------------------------------------------
++ for MODEL in alexnet resnet20 resnet32 resnet44 resnet56 resnet110 densenet40_k12 densenet100_k12
++ RUN='python tensorflow-benchmarks/scripts/tf_cnn_benchmarks/tf_cnn_benchmarks.py --model densenet100_k12 --data_name cifar10 --data_dir /home/morgan/.keras/datasets/cifar-10-batches-py'
++ CUDA_VISIBLE_DEVICES=0
++ python tensorflow-benchmarks/scripts/tf_cnn_benchmarks/tf_cnn_benchmarks.py --model densenet100_k12 --data_name cifar10 --data_dir /home/morgan/.keras/datasets/cifar-10-batches-py --num_gpus 1
2017-10-02 17:26:47.292224: W tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use SSE4.1 instructions, but these are available on your machine and could speed up CPU computations.
2017-10-02 17:26:47.292279: W tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use SSE4.2 instructions, but these are available on your machine and could speed up CPU computations.
2017-10-02 17:26:47.292285: W tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use AVX instructions, but these are available on your machine and could speed up CPU computations.
2017-10-02 17:26:47.292289: W tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use AVX2 instructions, but these are available on your machine and could speed up CPU computations.
2017-10-02 17:26:47.292292: W tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use FMA instructions, but these are available on your machine and could speed up CPU computations.
2017-10-02 17:26:54.067309: I tensorflow/core/common_runtime/gpu/gpu_device.cc:955] Found device 0 with properties: 
name: Tesla M60
major: 5 minor: 2 memoryClockRate (GHz) 1.1775
pciBusID 9fa3:00:00.0
Total memory: 7.93GiB
Free memory: 7.86GiB
2017-10-02 17:26:54.067349: I tensorflow/core/common_runtime/gpu/gpu_device.cc:976] DMA: 0 
2017-10-02 17:26:54.067355: I tensorflow/core/common_runtime/gpu/gpu_device.cc:986] 0:   Y 
2017-10-02 17:26:54.067364: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1045] Creating TensorFlow device (/gpu:0) -> (device: 0, name: Tesla M60, pci bus id: 9fa3:00:00.0)
WARNING:tensorflow:Standard services need a 'logdir' passed to the SessionManager
TensorFlow:  1.3
Model:       densenet100_k12
Mode:        training
Batch size:  64 global
             64 per device
Devices:     ['/gpu:0']
Data format: NCHW
Optimizer:   sgd
Variables:   parameter_server
==========
Generating model
number of parameters: 2259652.0
Running warm up
Done warm up
Step	Img/sec	loss
1	images/sec: 104.7 +/- 0.0 (jitter = 0.0)	3.317
10	images/sec: 102.9 +/- 1.4 (jitter = 0.2)	3.179
20	images/sec: 102.4 +/- 1.0 (jitter = 0.9)	3.069
30	images/sec: 101.8 +/- 0.9 (jitter = 0.8)	3.143
40	images/sec: 101.9 +/- 0.8 (jitter = 0.9)	2.914
50	images/sec: 102.0 +/- 0.7 (jitter = 0.8)	2.986
60	images/sec: 102.1 +/- 0.6 (jitter = 0.8)	2.887
70	images/sec: 101.9 +/- 0.6 (jitter = 0.8)	2.931
80	images/sec: 102.0 +/- 0.5 (jitter = 0.8)	2.841
90	images/sec: 102.0 +/- 0.5 (jitter = 0.8)	2.929
100	images/sec: 102.0 +/- 0.5 (jitter = 0.8)	2.936
----------------------------------------------------------------
total images/sec: 101.79
----------------------------------------------------------------
++ CUDA_VISIBLE_DEVICES=0
++ python tensorflow-benchmarks/scripts/tf_cnn_benchmarks/tf_cnn_benchmarks.py --model densenet100_k12 --data_name cifar10 --data_dir /home/morgan/.keras/datasets/cifar-10-batches-py --num_gpus 1 --data_format NHWC
2017-10-02 17:28:28.849053: W tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use SSE4.1 instructions, but these are available on your machine and could speed up CPU computations.
2017-10-02 17:28:28.849107: W tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use SSE4.2 instructions, but these are available on your machine and could speed up CPU computations.
2017-10-02 17:28:28.849114: W tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use AVX instructions, but these are available on your machine and could speed up CPU computations.
2017-10-02 17:28:28.849118: W tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use AVX2 instructions, but these are available on your machine and could speed up CPU computations.
2017-10-02 17:28:28.849122: W tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use FMA instructions, but these are available on your machine and could speed up CPU computations.
2017-10-02 17:28:35.762908: I tensorflow/core/common_runtime/gpu/gpu_device.cc:955] Found device 0 with properties: 
name: Tesla M60
major: 5 minor: 2 memoryClockRate (GHz) 1.1775
pciBusID 9fa3:00:00.0
Total memory: 7.93GiB
Free memory: 7.86GiB
2017-10-02 17:28:35.762947: I tensorflow/core/common_runtime/gpu/gpu_device.cc:976] DMA: 0 
2017-10-02 17:28:35.762954: I tensorflow/core/common_runtime/gpu/gpu_device.cc:986] 0:   Y 
2017-10-02 17:28:35.762962: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1045] Creating TensorFlow device (/gpu:0) -> (device: 0, name: Tesla M60, pci bus id: 9fa3:00:00.0)
WARNING:tensorflow:Standard services need a 'logdir' passed to the SessionManager
TensorFlow:  1.3
Model:       densenet100_k12
Mode:        training
Batch size:  64 global
             64 per device
Devices:     ['/gpu:0']
Data format: NHWC
Optimizer:   sgd
Variables:   parameter_server
==========
Generating model
number of parameters: 2259652.0
Running warm up
Done warm up
Step	Img/sec	loss
1	images/sec: 70.2 +/- 0.0 (jitter = 0.0)	3.321
10	images/sec: 68.2 +/- 0.9 (jitter = 0.6)	3.222
20	images/sec: 68.7 +/- 0.5 (jitter = 0.5)	3.200
30	images/sec: 68.6 +/- 0.4 (jitter = 0.7)	3.114
40	images/sec: 68.5 +/- 0.4 (jitter = 0.7)	2.971
50	images/sec: 68.4 +/- 0.3 (jitter = 0.6)	2.982
60	images/sec: 68.5 +/- 0.3 (jitter = 0.6)	2.984
70	images/sec: 68.4 +/- 0.3 (jitter = 0.6)	2.938
80	images/sec: 68.4 +/- 0.3 (jitter = 0.6)	2.945
90	images/sec: 68.4 +/- 0.3 (jitter = 0.6)	2.980
100	images/sec: 68.5 +/- 0.2 (jitter = 0.6)	2.949
----------------------------------------------------------------
total images/sec: 68.57
----------------------------------------------------------------
++ CUDA_VISIBLE_DEVICES=0,1
++ python tensorflow-benchmarks/scripts/tf_cnn_benchmarks/tf_cnn_benchmarks.py --model densenet100_k12 --data_name cifar10 --data_dir /home/morgan/.keras/datasets/cifar-10-batches-py --num_gpus 2
2017-10-02 17:30:51.294312: W tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use SSE4.1 instructions, but these are available on your machine and could speed up CPU computations.
2017-10-02 17:30:51.294356: W tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use SSE4.2 instructions, but these are available on your machine and could speed up CPU computations.
2017-10-02 17:30:51.294362: W tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use AVX instructions, but these are available on your machine and could speed up CPU computations.
2017-10-02 17:30:51.294366: W tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use AVX2 instructions, but these are available on your machine and could speed up CPU computations.
2017-10-02 17:30:51.294370: W tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use FMA instructions, but these are available on your machine and could speed up CPU computations.
2017-10-02 17:30:57.953989: I tensorflow/core/common_runtime/gpu/gpu_device.cc:955] Found device 0 with properties: 
name: Tesla M60
major: 5 minor: 2 memoryClockRate (GHz) 1.1775
pciBusID 9fa3:00:00.0
Total memory: 7.93GiB
Free memory: 7.86GiB
2017-10-02 17:30:58.096200: W tensorflow/stream_executor/cuda/cuda_driver.cc:523] A non-primary context 0x16aa2a80 exists before initializing the StreamExecutor. We haven't verified StreamExecutor works with that.
2017-10-02 17:30:58.096791: I tensorflow/core/common_runtime/gpu/gpu_device.cc:955] Found device 1 with properties: 
name: Tesla M60
major: 5 minor: 2 memoryClockRate (GHz) 1.1775
pciBusID c533:00:00.0
Total memory: 7.93GiB
Free memory: 7.86GiB
2017-10-02 17:30:58.096851: I tensorflow/core/common_runtime/gpu/gpu_device.cc:847] Peer access not supported between device ordinals 0 and 1
2017-10-02 17:30:58.096871: I tensorflow/core/common_runtime/gpu/gpu_device.cc:847] Peer access not supported between device ordinals 1 and 0
2017-10-02 17:30:58.096887: I tensorflow/core/common_runtime/gpu/gpu_device.cc:976] DMA: 0 1 
2017-10-02 17:30:58.096899: I tensorflow/core/common_runtime/gpu/gpu_device.cc:986] 0:   Y N 
2017-10-02 17:30:58.096903: I tensorflow/core/common_runtime/gpu/gpu_device.cc:986] 1:   N Y 
2017-10-02 17:30:58.096912: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1045] Creating TensorFlow device (/gpu:0) -> (device: 0, name: Tesla M60, pci bus id: 9fa3:00:00.0)
2017-10-02 17:30:58.096923: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1045] Creating TensorFlow device (/gpu:1) -> (device: 1, name: Tesla M60, pci bus id: c533:00:00.0)
WARNING:tensorflow:Standard services need a 'logdir' passed to the SessionManager
TensorFlow:  1.3
Model:       densenet100_k12
Mode:        training
Batch size:  128 global
             64 per device
Devices:     ['/gpu:0', '/gpu:1']
Data format: NCHW
Optimizer:   sgd
Variables:   parameter_server
==========
Generating model
number of parameters: 2259652.0
number of parameters: 2259652.0
Running warm up
Done warm up
Step	Img/sec	loss
1	images/sec: 193.8 +/- 0.0 (jitter = 0.0)	3.346
10	images/sec: 186.9 +/- 3.4 (jitter = 5.0)	3.246
20	images/sec: 188.6 +/- 2.4 (jitter = 3.8)	3.299
30	images/sec: 188.9 +/- 2.0 (jitter = 4.3)	3.223
40	images/sec: 187.8 +/- 1.9 (jitter = 4.5)	3.041
50	images/sec: 188.9 +/- 1.6 (jitter = 4.2)	3.017
60	images/sec: 189.1 +/- 1.5 (jitter = 3.7)	2.985
70	images/sec: 189.5 +/- 1.4 (jitter = 3.9)	2.908
80	images/sec: 189.8 +/- 1.2 (jitter = 4.0)	3.036
90	images/sec: 190.1 +/- 1.1 (jitter = 3.9)	2.847
100	images/sec: 190.1 +/- 1.1 (jitter = 3.9)	2.782
----------------------------------------------------------------
total images/sec: 190.29
----------------------------------------------------------------
++ CUDA_VISIBLE_DEVICES=0,1
++ python tensorflow-benchmarks/scripts/tf_cnn_benchmarks/tf_cnn_benchmarks.py --model densenet100_k12 --data_name cifar10 --data_dir /home/morgan/.keras/datasets/cifar-10-batches-py --num_gpus 2 --local_parameter_device cpu
2017-10-02 17:32:49.356934: W tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use SSE4.1 instructions, but these are available on your machine and could speed up CPU computations.
2017-10-02 17:32:49.356990: W tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use SSE4.2 instructions, but these are available on your machine and could speed up CPU computations.
2017-10-02 17:32:49.356996: W tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use AVX instructions, but these are available on your machine and could speed up CPU computations.
2017-10-02 17:32:49.357000: W tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use AVX2 instructions, but these are available on your machine and could speed up CPU computations.
2017-10-02 17:32:49.357004: W tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use FMA instructions, but these are available on your machine and could speed up CPU computations.
2017-10-02 17:32:56.087704: I tensorflow/core/common_runtime/gpu/gpu_device.cc:955] Found device 0 with properties: 
name: Tesla M60
major: 5 minor: 2 memoryClockRate (GHz) 1.1775
pciBusID 9fa3:00:00.0
Total memory: 7.93GiB
Free memory: 7.86GiB
2017-10-02 17:32:56.226295: W tensorflow/stream_executor/cuda/cuda_driver.cc:523] A non-primary context 0x176f2f30 exists before initializing the StreamExecutor. We haven't verified StreamExecutor works with that.
2017-10-02 17:32:56.226895: I tensorflow/core/common_runtime/gpu/gpu_device.cc:955] Found device 1 with properties: 
name: Tesla M60
major: 5 minor: 2 memoryClockRate (GHz) 1.1775
pciBusID c533:00:00.0
Total memory: 7.93GiB
Free memory: 7.86GiB
2017-10-02 17:32:56.226955: I tensorflow/core/common_runtime/gpu/gpu_device.cc:847] Peer access not supported between device ordinals 0 and 1
2017-10-02 17:32:56.226975: I tensorflow/core/common_runtime/gpu/gpu_device.cc:847] Peer access not supported between device ordinals 1 and 0
2017-10-02 17:32:56.226990: I tensorflow/core/common_runtime/gpu/gpu_device.cc:976] DMA: 0 1 
2017-10-02 17:32:56.227003: I tensorflow/core/common_runtime/gpu/gpu_device.cc:986] 0:   Y N 
2017-10-02 17:32:56.227007: I tensorflow/core/common_runtime/gpu/gpu_device.cc:986] 1:   N Y 
2017-10-02 17:32:56.227016: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1045] Creating TensorFlow device (/gpu:0) -> (device: 0, name: Tesla M60, pci bus id: 9fa3:00:00.0)
2017-10-02 17:32:56.227027: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1045] Creating TensorFlow device (/gpu:1) -> (device: 1, name: Tesla M60, pci bus id: c533:00:00.0)
WARNING:tensorflow:Standard services need a 'logdir' passed to the SessionManager
TensorFlow:  1.3
Model:       densenet100_k12
Mode:        training
Batch size:  128 global
             64 per device
Devices:     ['/gpu:0', '/gpu:1']
Data format: NCHW
Optimizer:   sgd
Variables:   parameter_server
==========
Generating model
number of parameters: 2259652.0
number of parameters: 2259652.0
Running warm up
Done warm up
Step	Img/sec	loss
1	images/sec: 207.2 +/- 0.0 (jitter = 0.0)	3.338
10	images/sec: 201.7 +/- 2.6 (jitter = 2.8)	3.256
20	images/sec: 202.0 +/- 1.9 (jitter = 1.3)	3.274
30	images/sec: 201.2 +/- 1.7 (jitter = 2.4)	3.217
40	images/sec: 201.5 +/- 1.4 (jitter = 2.6)	3.073
50	images/sec: 201.6 +/- 1.3 (jitter = 2.6)	3.036
60	images/sec: 201.8 +/- 1.1 (jitter = 2.6)	2.958
70	images/sec: 201.5 +/- 1.1 (jitter = 2.6)	2.944
80	images/sec: 201.5 +/- 1.0 (jitter = 2.7)	2.984
90	images/sec: 201.6 +/- 0.9 (jitter = 2.5)	2.826
100	images/sec: 201.6 +/- 0.9 (jitter = 2.5)	2.756
----------------------------------------------------------------
total images/sec: 201.33
----------------------------------------------------------------
++ for USE_NCCL in true false
++ CUDA_VISIBLE_DEVICES=0,1
++ python tensorflow-benchmarks/scripts/tf_cnn_benchmarks/tf_cnn_benchmarks.py --model densenet100_k12 --data_name cifar10 --data_dir /home/morgan/.keras/datasets/cifar-10-batches-py --num_gpus 2 --variable_update replicated --use_nccl true
2017-10-02 17:34:46.548954: W tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use SSE4.1 instructions, but these are available on your machine and could speed up CPU computations.
2017-10-02 17:34:46.549005: W tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use SSE4.2 instructions, but these are available on your machine and could speed up CPU computations.
2017-10-02 17:34:46.549010: W tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use AVX instructions, but these are available on your machine and could speed up CPU computations.
2017-10-02 17:34:46.549014: W tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use AVX2 instructions, but these are available on your machine and could speed up CPU computations.
2017-10-02 17:34:46.549018: W tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use FMA instructions, but these are available on your machine and could speed up CPU computations.
2017-10-02 17:34:54.042350: I tensorflow/core/common_runtime/gpu/gpu_device.cc:955] Found device 0 with properties: 
name: Tesla M60
major: 5 minor: 2 memoryClockRate (GHz) 1.1775
pciBusID 9fa3:00:00.0
Total memory: 7.93GiB
Free memory: 7.86GiB
2017-10-02 17:34:54.199255: W tensorflow/stream_executor/cuda/cuda_driver.cc:523] A non-primary context 0x1afec330 exists before initializing the StreamExecutor. We haven't verified StreamExecutor works with that.
2017-10-02 17:34:54.199851: I tensorflow/core/common_runtime/gpu/gpu_device.cc:955] Found device 1 with properties: 
name: Tesla M60
major: 5 minor: 2 memoryClockRate (GHz) 1.1775
pciBusID c533:00:00.0
Total memory: 7.93GiB
Free memory: 7.86GiB
2017-10-02 17:34:54.199910: I tensorflow/core/common_runtime/gpu/gpu_device.cc:847] Peer access not supported between device ordinals 0 and 1
2017-10-02 17:34:54.199930: I tensorflow/core/common_runtime/gpu/gpu_device.cc:847] Peer access not supported between device ordinals 1 and 0
2017-10-02 17:34:54.199946: I tensorflow/core/common_runtime/gpu/gpu_device.cc:976] DMA: 0 1 
2017-10-02 17:34:54.199952: I tensorflow/core/common_runtime/gpu/gpu_device.cc:986] 0:   Y N 
2017-10-02 17:34:54.199956: I tensorflow/core/common_runtime/gpu/gpu_device.cc:986] 1:   N Y 
2017-10-02 17:34:54.199965: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1045] Creating TensorFlow device (/gpu:0) -> (device: 0, name: Tesla M60, pci bus id: 9fa3:00:00.0)
2017-10-02 17:34:54.199976: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1045] Creating TensorFlow device (/gpu:1) -> (device: 1, name: Tesla M60, pci bus id: c533:00:00.0)
WARNING:tensorflow:Standard services need a 'logdir' passed to the SessionManager
TensorFlow:  1.3
Model:       densenet100_k12
Mode:        training
Batch size:  128 global
             64 per device
Devices:     ['/gpu:0', '/gpu:1']
Data format: NCHW
Optimizer:   sgd
Variables:   replicated
Use NCCL:    True
==========
Generating model
number of parameters: 2259652.0
number of parameters: 4519303.0
Running warm up
Done warm up
Step	Img/sec	loss
1	images/sec: 197.8 +/- 0.0 (jitter = 0.0)	3.289
10	images/sec: 190.7 +/- 2.6 (jitter = 3.4)	3.217
20	images/sec: 191.1 +/- 1.9 (jitter = 2.9)	3.138
30	images/sec: 190.2 +/- 1.6 (jitter = 3.3)	3.155
40	images/sec: 190.5 +/- 1.4 (jitter = 3.3)	2.987
50	images/sec: 190.9 +/- 1.2 (jitter = 3.1)	3.071
60	images/sec: 190.4 +/- 1.1 (jitter = 3.4)	2.954
70	images/sec: 190.8 +/- 1.0 (jitter = 3.1)	3.058
80	images/sec: 190.8 +/- 1.0 (jitter = 3.3)	3.044
90	images/sec: 190.5 +/- 0.9 (jitter = 3.4)	2.858
100	images/sec: 190.6 +/- 0.9 (jitter = 3.4)	2.704
----------------------------------------------------------------
total images/sec: 191.18
----------------------------------------------------------------
++ for USE_NCCL in true false
++ CUDA_VISIBLE_DEVICES=0,1
++ python tensorflow-benchmarks/scripts/tf_cnn_benchmarks/tf_cnn_benchmarks.py --model densenet100_k12 --data_name cifar10 --data_dir /home/morgan/.keras/datasets/cifar-10-batches-py --num_gpus 2 --variable_update replicated --use_nccl false
2017-10-02 17:36:50.059407: W tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use SSE4.1 instructions, but these are available on your machine and could speed up CPU computations.
2017-10-02 17:36:50.059462: W tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use SSE4.2 instructions, but these are available on your machine and could speed up CPU computations.
2017-10-02 17:36:50.059469: W tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use AVX instructions, but these are available on your machine and could speed up CPU computations.
2017-10-02 17:36:50.059473: W tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use AVX2 instructions, but these are available on your machine and could speed up CPU computations.
2017-10-02 17:36:50.059477: W tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use FMA instructions, but these are available on your machine and could speed up CPU computations.
2017-10-02 17:36:56.668858: I tensorflow/core/common_runtime/gpu/gpu_device.cc:955] Found device 0 with properties: 
name: Tesla M60
major: 5 minor: 2 memoryClockRate (GHz) 1.1775
pciBusID 9fa3:00:00.0
Total memory: 7.93GiB
Free memory: 7.86GiB
2017-10-02 17:36:56.808222: W tensorflow/stream_executor/cuda/cuda_driver.cc:523] A non-primary context 0x197a2ce0 exists before initializing the StreamExecutor. We haven't verified StreamExecutor works with that.
2017-10-02 17:36:56.808818: I tensorflow/core/common_runtime/gpu/gpu_device.cc:955] Found device 1 with properties: 
name: Tesla M60
major: 5 minor: 2 memoryClockRate (GHz) 1.1775
pciBusID c533:00:00.0
Total memory: 7.93GiB
Free memory: 7.86GiB
2017-10-02 17:36:56.808878: I tensorflow/core/common_runtime/gpu/gpu_device.cc:847] Peer access not supported between device ordinals 0 and 1
2017-10-02 17:36:56.808898: I tensorflow/core/common_runtime/gpu/gpu_device.cc:847] Peer access not supported between device ordinals 1 and 0
2017-10-02 17:36:56.808914: I tensorflow/core/common_runtime/gpu/gpu_device.cc:976] DMA: 0 1 
2017-10-02 17:36:56.808925: I tensorflow/core/common_runtime/gpu/gpu_device.cc:986] 0:   Y N 
2017-10-02 17:36:56.808929: I tensorflow/core/common_runtime/gpu/gpu_device.cc:986] 1:   N Y 
2017-10-02 17:36:56.808937: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1045] Creating TensorFlow device (/gpu:0) -> (device: 0, name: Tesla M60, pci bus id: 9fa3:00:00.0)
2017-10-02 17:36:56.808942: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1045] Creating TensorFlow device (/gpu:1) -> (device: 1, name: Tesla M60, pci bus id: c533:00:00.0)
WARNING:tensorflow:Standard services need a 'logdir' passed to the SessionManager
TensorFlow:  1.3
Model:       densenet100_k12
Mode:        training
Batch size:  128 global
             64 per device
Devices:     ['/gpu:0', '/gpu:1']
Data format: NCHW
Optimizer:   sgd
Variables:   replicated
Use NCCL:    False
==========
Generating model
number of parameters: 2259652.0
number of parameters: 4519303.0
Running warm up
Done warm up
Step	Img/sec	loss
1	images/sec: 202.6 +/- 0.0 (jitter = 0.0)	3.305
10	images/sec: 199.3 +/- 2.9 (jitter = 2.7)	3.263
20	images/sec: 197.9 +/- 2.2 (jitter = 2.8)	3.130
30	images/sec: 198.7 +/- 1.7 (jitter = 2.8)	3.148
40	images/sec: 199.0 +/- 1.4 (jitter = 2.8)	2.927
50	images/sec: 199.3 +/- 1.3 (jitter = 2.6)	3.066
60	images/sec: 199.0 +/- 1.2 (jitter = 2.6)	2.940
70	images/sec: 199.2 +/- 1.1 (jitter = 2.6)	3.004
80	images/sec: 199.4 +/- 1.0 (jitter = 2.5)	3.017
90	images/sec: 199.1 +/- 1.0 (jitter = 2.5)	2.764
100	images/sec: 199.4 +/- 0.9 (jitter = 2.5)	2.686
----------------------------------------------------------------
total images/sec: 199.39
----------------------------------------------------------------
++ CUDA_VISIBLE_DEVICES=0,1
++ python tensorflow-benchmarks/scripts/tf_cnn_benchmarks/tf_cnn_benchmarks.py --model densenet100_k12 --data_name cifar10 --data_dir /home/morgan/.keras/datasets/cifar-10-batches-py --num_gpus 2 --variable_update independent
2017-10-02 17:38:48.895394: W tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use SSE4.1 instructions, but these are available on your machine and could speed up CPU computations.
2017-10-02 17:38:48.895448: W tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use SSE4.2 instructions, but these are available on your machine and could speed up CPU computations.
2017-10-02 17:38:48.895454: W tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use AVX instructions, but these are available on your machine and could speed up CPU computations.
2017-10-02 17:38:48.895459: W tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use AVX2 instructions, but these are available on your machine and could speed up CPU computations.
2017-10-02 17:38:48.895463: W tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use FMA instructions, but these are available on your machine and could speed up CPU computations.
2017-10-02 17:38:55.281681: I tensorflow/core/common_runtime/gpu/gpu_device.cc:955] Found device 0 with properties: 
name: Tesla M60
major: 5 minor: 2 memoryClockRate (GHz) 1.1775
pciBusID 9fa3:00:00.0
Total memory: 7.93GiB
Free memory: 7.86GiB
2017-10-02 17:38:55.432134: W tensorflow/stream_executor/cuda/cuda_driver.cc:523] A non-primary context 0x13dcd360 exists before initializing the StreamExecutor. We haven't verified StreamExecutor works with that.
2017-10-02 17:38:55.432734: I tensorflow/core/common_runtime/gpu/gpu_device.cc:955] Found device 1 with properties: 
name: Tesla M60
major: 5 minor: 2 memoryClockRate (GHz) 1.1775
pciBusID c533:00:00.0
Total memory: 7.93GiB
Free memory: 7.86GiB
2017-10-02 17:38:55.432793: I tensorflow/core/common_runtime/gpu/gpu_device.cc:847] Peer access not supported between device ordinals 0 and 1
2017-10-02 17:38:55.432812: I tensorflow/core/common_runtime/gpu/gpu_device.cc:847] Peer access not supported between device ordinals 1 and 0
2017-10-02 17:38:55.432828: I tensorflow/core/common_runtime/gpu/gpu_device.cc:976] DMA: 0 1 
2017-10-02 17:38:55.432833: I tensorflow/core/common_runtime/gpu/gpu_device.cc:986] 0:   Y N 
2017-10-02 17:38:55.432837: I tensorflow/core/common_runtime/gpu/gpu_device.cc:986] 1:   N Y 
2017-10-02 17:38:55.432846: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1045] Creating TensorFlow device (/gpu:0) -> (device: 0, name: Tesla M60, pci bus id: 9fa3:00:00.0)
2017-10-02 17:38:55.432851: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1045] Creating TensorFlow device (/gpu:1) -> (device: 1, name: Tesla M60, pci bus id: c533:00:00.0)
WARNING:tensorflow:Standard services need a 'logdir' passed to the SessionManager
TensorFlow:  1.3
Model:       densenet100_k12
Mode:        training
Batch size:  128 global
             64 per device
Devices:     ['/gpu:0', '/gpu:1']
Data format: NCHW
Optimizer:   sgd
Variables:   independent
==========
Generating model
number of parameters: 2259652.0
number of parameters: 4519303.0
Running warm up
Done warm up
Step	Img/sec	loss
1	images/sec: 204.7 +/- 0.0 (jitter = 0.0)	3.324
10	images/sec: 201.6 +/- 2.5 (jitter = 1.0)	3.315
20	images/sec: 201.9 +/- 1.8 (jitter = 1.9)	3.263
30	images/sec: 201.1 +/- 1.7 (jitter = 2.4)	3.288
40	images/sec: 201.2 +/- 1.5 (jitter = 2.6)	3.079
50	images/sec: 201.2 +/- 1.3 (jitter = 2.5)	3.074
60	images/sec: 201.4 +/- 1.2 (jitter = 2.7)	3.000
70	images/sec: 201.0 +/- 1.1 (jitter = 2.2)	2.980
80	images/sec: 201.0 +/- 1.0 (jitter = 2.4)	2.990
90	images/sec: 201.1 +/- 1.0 (jitter = 2.4)	2.893
100	images/sec: 201.1 +/- 0.9 (jitter = 2.2)	2.848
----------------------------------------------------------------
total images/sec: 200.38
----------------------------------------------------------------
